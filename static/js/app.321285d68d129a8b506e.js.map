{"version":3,"sources":["webpack:///static/js/app.321285d68d129a8b506e.js","webpack:///./node_modules/vue-awesome/components/Icon.vue?bf0a","webpack:///./src/main.js","webpack:///./src/App.vue?3172","webpack:///App.vue","webpack:///./src/App.vue?05e5","webpack:///./src/router/index.js","webpack:///./src/components/Main.vue","webpack:///Main.vue","webpack:///./src/components/Reader.vue?dc1f","webpack:///Reader.vue","webpack:///./src/components/PDF.vue?59f9","webpack:///PDF.vue","webpack:///./src/components/Page.vue?eccc","webpack:///Page.vue","webpack:///./src/components/TextLayer.vue?5654","webpack:///TextLayer.vue","webpack:///./src/components/TextLayer.vue?088c","webpack:///./src/components/ImageLayer.vue?128d","webpack:///ImageLayer.vue","webpack:///./src/components/ImageLayer.vue?65bc","webpack:///./src/components/Page.vue?0da8","webpack:///./src/components/Search.vue","webpack:///Search.vue","webpack:///./src/components/Search.vue?e6e5","webpack:///./src/components/PDF.vue?abee","webpack:///./src/components/Table.vue?fbca","webpack:///Table.vue","webpack:///Icon.vue","webpack:///./node_modules/vue-awesome/components/Icon.vue?6fa1","webpack:///./src/components/Table.vue?9b1a","webpack:///./src/components/Grid.vue?ef26","webpack:///Grid.vue","webpack:///./src/components/Grid.vue?f662","webpack:///./src/components/Outline.vue?d620","webpack:///Outline.vue","webpack:///./src/components/Outline.vue?ac8e","webpack:///./src/components/Detail.vue?839d","webpack:///Detail.vue","webpack:///./src/components/Detail.vue?860f","webpack:///./src/components/Reader.vue?4c8a","webpack:///./src/components/Main.vue?7172"],"names":["webpackJsonp","module","exports","__webpack_require__","injectStyle","ssrContext","Component","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","n","__WEBPACK_IMPORTED_MODULE_2__router__","config","productionTip","el","router","template","components","App","a","name","render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticRenderFns","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_Main__","__WEBPACK_IMPORTED_MODULE_2__components_Main___default","use","routes","path","redirect","component","props","__WEBPACK_IMPORTED_MODULE_0__components_Reader__","__WEBPACK_IMPORTED_MODULE_0__components_Reader___default","Reader","origin","default","type","String","book","edition","page","undefined","image","tab","data","url","__WEBPACK_IMPORTED_MODULE_1__components_PDF__","__WEBPACK_IMPORTED_MODULE_1__components_PDF___default","__WEBPACK_IMPORTED_MODULE_2__components_Table__","__WEBPACK_IMPORTED_MODULE_2__components_Table___default","__WEBPACK_IMPORTED_MODULE_3__components_Grid__","__WEBPACK_IMPORTED_MODULE_3__components_Grid___default","__WEBPACK_IMPORTED_MODULE_4__components_Outline__","__WEBPACK_IMPORTED_MODULE_4__components_Outline___default","__WEBPACK_IMPORTED_MODULE_5__components_Detail__","__WEBPACK_IMPORTED_MODULE_5__components_Detail___default","__WEBPACK_IMPORTED_MODULE_6_whatwg_fetch__","__WEBPACK_IMPORTED_MODULE_25_vue_awesome_components_Icon__","__WEBPACK_IMPORTED_MODULE_25_vue_awesome_components_Icon___default","__WEBPACK_IMPORTED_MODULE_26_buefy__","__WEBPACK_IMPORTED_MODULE_26_buefy___default","__WEBPACK_IMPORTED_MODULE_27_buefy_lib_buefy_css__","__WEBPACK_IMPORTED_MODULE_28_debounce__","__WEBPACK_IMPORTED_MODULE_28_debounce___default","PDF","grid","tablegrid","icon","outline","detail","manifest-url","page-url","image-url","show-grid","show-table","bounds","getBounds","manifest","images","displayedPage","spreads","manualSpreads","currentDetail","width","height","outlineOpen","query","matchCount","currentMatchIndex","zoomLevel","shownDetail","displayedDetail","activeTab","title","shortTitle","current","isModalActive","showSearch","artworkOpen","navOpen","totalPages","editingPage","navTimeout","tableFilter","created","pageUrl","parseInt","fetchManifest","toggleNav","addListeners","handleResize","_showTable","_showGrid","beforeDestory","removeListeners","computed","displayedPages","watch","showTable","showGrid","active","$refs","triggerLoad","$router","push","params","loaded","pg","imageUrl","methods","_this","fetch","manifestUrl","then","response","json","subtitle","author_as_it_appears","catch","err","console","error","pdfDocument","numPages","next","e","pdf","stopPropagation","preventDefault","prev","keyListener","keyCode","goto","dest","_this2","getPageIndex","onImageSelected","onPageSelected","onInfoSelected","filter","toggleGrid","onImageClicked","objId","onDetailClosed","onDetailDisplayed","onFound","count","onMatch","index","onCurrentTitle","window","innerWidth","innerHeight","setSpreads","onOutlineReady","onPageChanged","pages","length","onTabChanged","_$refs","table","toggleTable","nextMatch","prevMatch","zoomIn","Math","round","zoomOut","showNav","clearTimeout","hideNav","_this3","setTimeout","onMouseMove","_this4","y","mouseMoved","openNav","onMouseDown","onTouchMove","onClick","_handleResize","bind","addEventListener","removeEventListener","onTouchStart","startPageEditing","pageEditor","focus","onPageEdited","v","target","__WEBPACK_IMPORTED_MODULE_0__components_Page__","__WEBPACK_IMPORTED_MODULE_0__components_Page___default","__WEBPACK_IMPORTED_MODULE_1__components_Search__","__WEBPACK_IMPORTED_MODULE_1__components_Search___default","pdfjsLib","PDFJS","workerSrc","Page","Search","src","Number","Boolean","Function","zoom","scale","rotate","isLoading","viewportWidth","viewportHeight","viewportLeft","viewportTop","displayedPagesNumbers","pageMatchesLength","pageMatches","matched","selectedMatch","updated","mounted","loadDocument","display","_spreads","$emit","clearMatches","container","getBoundingClientRect","scrollLeftDelta","scrollLeft","scrollWidth","scrollTopDelta","scrollTop","scrollHeight","getDocument","pagesCount","getOutline","processOutline","arguments","loadPage","pageIndex","Error","pageNumber","getPage","onPageLoad","onPageError","_this5","includes","$nextTick","updatedSelectedMatch","updateTextLayerMatches","afterDisplayed","handleViewport","viewport","left","top","onMatched","pageIdx","onSelected","selected","_this6","forEach","__WEBPACK_IMPORTED_MODULE_0__components_TextLayer__","__WEBPACK_IMPORTED_MODULE_0__components_TextLayer___default","__WEBPACK_IMPORTED_MODULE_1__components_ImageLayer__","__WEBPACK_IMPORTED_MODULE_1__components_ImageLayer___default","textlayer","imagelayer","onViewport","viewportScale","textContent","displayPage","displaying","getPageScale","pageScale","getViewport","canvas","canvasContext","getContext","scaled","imageCount","imageLayer","beginLayout","endLayout","appendImage","i","textLayer","clearTextLayerMatches","matchIdx","renderTimeout","matches","textDivs","getTextContent","onContent","destroyed","normalizeWhitespace","clearTextLayer","textLayerFrag","document","createDocumentFragment","textLayerRenderTask","cancel","renderTextLayer","timeout","promise","appendChild","convertMatches","renderMatches","warn","firstChild","removeChild","_sentSelected","beginText","begin","className","divIdx","appendTextToDiv","offset","fromOffset","toOffset","div","content","bidiTexts","str","substring","node","createTextNode","span","createElement","items","prevEnd","isSelectedPage","selectedMatchIdx","infinity","i0","i1","match","end","isSelected","highlightSuffix","n0","n1","matchesLength","iIndex","queryLen","ret","m","len","clearedUntilDivIdx","max","ref","staticClass","style","Array","handleClick","_l","refInFor","on","click","$event","class","loading","_v","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys___default","__WEBPACK_IMPORTED_MODULE_2_pdfjs_dist__","CHARACTERS_TO_NORMALIZE","‘","’","‚","‛","“","”","„","‟","¼","½","¾","replace","join","normalizationRegex","RegExp","waitTimeout","phraseSearch","minQueryLength","pageContents","pendingFindMatches","pagesToSearch","extractTextPromises","extractText","reset","findTimeout","find","prevQuery","calcFindMatch","normalize","text","ch","_prepareMatches","matchesWithLength","sort","b","matchLength","currentIndex","currentElem","nextElem","skipped","prevElem","calcFindPhraseMatch","pageContent","indexOf","calcFindWordMatch","queryArray","subquery","subqueryLen","caseSensitive","toLowerCase","getPageTextContent","startedTextExtraction","resolve","ii","extractTextCapability","textItems","strBuf","j","jj","centered","key","displayed","found","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default","__WEBPACK_IMPORTED_MODULE_1_vue_lazyload__","__WEBPACK_IMPORTED_MODULE_1_vue_lazyload___default","__WEBPACK_IMPORTED_MODULE_2_vue__","__WEBPACK_IMPORTED_MODULE_7_vue_awesome_components_Icon__","__WEBPACK_IMPORTED_MODULE_7_vue_awesome_components_Icon___default","preLoad","attempt","artworkFilter","artistFilter","collectionFilter","sortOrders","columns","sortKey","filterKey","gridColumns","imagesByArtwork","imagesByArtist","imagesByCollection","artworks","artists","collections","filteredData","order","row","artwork_title","artist_name","collection","some","slice","filters","capitalize","charAt","toUpperCase","titlecase","_str","txt","substr","truncate","stop","clamp","artistUri","encodeURI","uri","artworkUri","collectionUri","sortBy","nextTick","$Lazyload","lazyLoadHandler","icons","validator","val","util","spin","inverse","flip","label","x","childrenWidth","childrenHeight","outerScale","normalizedScale","isNaN","clazz","fa-icon","fa-spin","fa-flip-horizontal","fa-flip-vertical","fa-inverse","box","ratio","_icon","fontSize","$children","child","register","paths","d","polygons","points","version","role","aria-label","viewBox","_t","_b","_e","polygon","raw","domProps","innerHTML","_s","directives","rawName","expression","input","composing","staticStyle","overflow","position","model","callback","$$v","slot","artwork","_f","artist","bordered","striped","mobile-cards","paginated","per-page","pagination-simple","scopedSlots","_u","fn","tb","field","sortable","href","__WEBPACK_IMPORTED_MODULE_6_vue_awesome_components_Icon__","__WEBPACK_IMPORTED_MODULE_6_vue_awesome_components_Icon___default","chunkedData","cols","chunked","c","floor","downsampled","asset","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","pageList","activeItem","processData","item","li","checkActive","handleLink","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","done","return","__WEBPACK_IMPORTED_MODULE_0_whatwg_fetch__","__WEBPACK_IMPORTED_MODULE_4_vue_awesome_components_Icon__","__WEBPACK_IMPORTED_MODULE_4_vue_awesome_components_Icon___default","imagesById","hoverArtwork","hoverArtist","hoverCollection","imageRef","location","nextDetail","prevDetail","artistLookup","artist_uri","artistJson","artist_json","log","artwork_uri","copyright","hover","rel","open","results","placeholder","pageChanged","disabled","keyup","_k","closed","_m","cover_image_url","change","onImageClick","onPageClick","is-active","infoSelected","pageSelected"],"mappings":"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hB,YU9BN3B,GV+BM4C,aU9BN,EV+BMC,MU9BN,GV+BMC,eU9BN9C,GV+BM+C,sBU9BN/C,GV+BMgD,UU9BN,EV+BMC,gBU9BNjD,GV+BMkD,oBU9BNlD,GV+BMmD,UU9BN,EV+BMC,MU9BN,GV+BMC,WU9BN,GV+BMC,QU9BN,GV+BMC,eU9BN,EV+BMC,YU9BN,EV+BMC,aU9BN,EV+BMC,SU9BN,EV+BMC,WU9BN,EV+BMC,aU9BN,EV+BMC,eU9BN7D,GV+BM8D,gBU7BN9D,KVgCE+D,QAAS,WACH1F,KAAK2F,UACP3F,KAAK0B,KAAOkE,SAAS5F,KU9B3B2F,UViCI3F,KU7BJ6F,gBV+BI7F,KAAKoE,kBU7BTzC,GV+BI3B,KU7BJ8F,YV+BI9F,KU7BJ+F,eV+BI/F,KU7BJgG,eV+BIhG,KU9BJiG,aV+BIjG,KUvBJkG,aVyBEC,cAAe,WACbnG,KUvBJoG,mBV0BEC,UACEC,eAAgB,WACd,MAAKtG,MAAKkE,SAAkC,IAAvBlE,KAAKiE,cAEfjE,KAAKiE,gBAAkBjE,KAAKsF,WAAa,EAC3CtF,KAAKiE,cUxBpB,EV0BejE,KAAKiE,cAAgB,KAAYjE,KAAKiE,cUxBrD,GVoBejE,KAAKiE,cUxBpB,IVgCEsC,OACEC,UAAW,WACTxG,KUxBNiG,cV0BIQ,SAAU,WACRzG,KUxBNkG,aV0BId,YAAa,SAAqBsB,GUxBtC,GAAAvD,GAAAnD,KACA2G,MAAAxD,IV0BMA,GUzBN6C,eV0BM7C,EUzBNyD,cV0BWF,EAOH1G,KAAK6G,QAAQC,MAAOjH,KAAM,cAAekH,QAAUlF,IAAwB,IAAnB7B,KAAK8E,UAAkB,OUzBvF,WVmBY9E,KAAKiE,cACPjE,KAAK6G,QAAQC,MAAOjH,KAAM,WAAYkH,QAAUrF,KAAM1B,KUzBhEiE,iBV2BUjE,KAAK6G,QAAQC,MAAOjH,KUzB9B,cV+BIiF,UAAW,WACc,IAAnB9E,KAAK8E,UACP9E,KAAK6G,QAAQC,MAAOjH,KAAM,cAAekH,QAAUlF,IUzB3D,UV0BoC,IAAnB7B,KAAK8E,WACd9E,KAAK6G,QAAQC,MAAOjH,KAAM,cAAekH,QAAUlF,IUzB3D,YV4BI8D,QAAS,WACP,G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,EAAA,SZm3BEiB,KYj3BF,MZk3BEH,YACEmN,KYj3BJN,EAAA3M,EZk3BIkN,OYh3BJL,EAAA7M,GZk3BEoB,OACE+L,KACEzL,KYh3BNC,QZk3BI8C,OACE/C,KYj3BN0L,OZk3BM3L,YYh3BNM,IZk3BI2C,QACEhD,KYj3BN0L,OZk3BM3L,YYh3BNM,IZk3BID,MACEL,QYj3BN,EZk3BMC,KYh3BN0L,QZk3BI9I,SACE7C,SYj3BN,EZk3BMC,KYh3BN2L,SZk3BI9D,gBACE9H,YYj3BNM,GZk3BML,KYh3BN4L,UZk3BIlD,gBACE3I,YYj3BNM,GZk3BML,KYh3BN4L,UZk3BI1I,OACEnD,YYj3BNM,GZk3BML,KYh3BNC,QZk3BI4L,MACE9L,QYj3BN,EZk3BMC,KY/2BN0L,SZk3BElL,KAAM,WACJ,OACEkG,gBYj3BNrG,GZk3BMsG,SYj3BN,EZk3BMmF,MYj3BN,EZk3BMC,WYj3BN1L,GZk3BM2L,WYj3BN,EZk3BMC,cYj3BN,EZk3BMC,eYj3BN,EZk3BMC,aYj3BN,EZk3BMC,YYj3BN,EZk3BMzJ,cYj3BN,EZk3BMqC,kBACAqH,yBACArK,YYj3BN3B,GZk3BMiM,qBACAC,eACAC,WACAC,mBAGJC,QAAS,aACTC,QAAS,WYh3BX,GAAA7G,GAAApH,IZm3BQA,MAAK+M,KACP/M,KAAKkO,aAAalO,KYl3BxB+M,KAAAxF,KAAA,WZm3BQH,EAAM+G,QAAQ/G,EYj3BtB1F,QACAkG,MAAA,SAAAC,GZk3BQ,MAAOC,SAAQC,MYj3BvBF,MZs3BEtB,OACEwG,IAAK,WYn3BT,GAAAnE,GAAA5I,IZs3BUA,MAAK+M,KACP/M,KAAKkO,aAAalO,KYr3B1B+M,KAAAxF,KAAA,WZs3BUqB,EAAOuF,QAAQvF,EYp3BzBlH,QACAkG,MAAA,SAAAC,GZq3BU,MAAOC,SAAQC,MYp3BzBF,MZw3BInG,KAAM,SAAcuF,OACO,KAAdjH,KAAK0B,MAAwB1B,KAAK0B,MAAQ,GACnD1B,KAAKmO,QAAQnO,KYr3BrB0B,OZw3BIwC,QAAS,SAAiBkK,OACU,KAAvBpO,KAAKiE,eACdjE,KAAKmO,QAAQnO,KYr3BrBiE,gBZw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","file":"static/js/app.321285d68d129a8b506e.js","sourcesContent":["webpackJsonp([2],[\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(119)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(120),\n  /* template */\n  __webpack_require__(121),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */,\n/* 32 */,\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(56);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App___default.a }\n});\n\n/***/ }),\n/* 50 */,\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(52)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(54),\n  /* template */\n  __webpack_require__(55),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 53 */,\n/* 54 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'app'\n});\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 56 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(57);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Main__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Main___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_Main__);\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    redirect: '/books/711/editions/884',\n    name: 'Main'\n  }, {\n    path: '/books/:book/editions/:edition',\n    name: 'Manifest',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Main___default.a,\n    props: true\n  }, {\n    path: '/books/:book/editions/:edition/pages/:page',\n    name: 'PageLink',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Main___default.a,\n    props: true\n  }, {\n    path: '/books/:book/editions/:edition/images/:image',\n    name: 'ImageLink',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Main___default.a,\n    props: true\n  }, {\n    path: '/books/:book/editions/:edition/artworks/:tab',\n    name: 'ArtworkLink',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Main___default.a,\n    props: true\n  }]\n}));\n\n/***/ }),\n/* 57 */,\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(59),\n  /* template */\n  __webpack_require__(164),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Reader__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Reader___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_Reader__);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'main',\n  components: {\n    'Reader': __WEBPACK_IMPORTED_MODULE_0__components_Reader___default.a\n  },\n  props: {\n    'origin': {\n      default: 'https://s3.amazonaws.com/pubs-fchasen/books',\n      type: String\n    },\n    'book': {\n      default: '',\n      type: String\n    },\n    'edition': {\n      default: '',\n      type: String\n    },\n    'page': {\n      default: undefined\n    },\n    'image': {\n      default: undefined,\n      type: String\n    },\n    'tab': {\n      default: undefined\n    }\n  },\n  data: function data() {\n    return {\n      url: this.origin + '/' + this.book + '/editions/' + this.edition + '/manifest.json'\n    };\n  }\n});\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(61)\n  __webpack_require__(62)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(63),\n  /* template */\n  __webpack_require__(163),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 63 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_PDF__ = __webpack_require__(64);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_PDF___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_PDF__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Table__ = __webpack_require__(115);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Table___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_Table__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_Grid__ = __webpack_require__(123);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_Grid___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_Grid__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_Outline__ = __webpack_require__(127);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_Outline___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_Outline__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_Detail__ = __webpack_require__(140);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_Detail___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__components_Detail__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_whatwg_fetch__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_whatwg_fetch___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_whatwg_fetch__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_vue_awesome_icons_bars__ = __webpack_require__(144);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_vue_awesome_icons_search__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_vue_awesome_icons_columns__ = __webpack_require__(145);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_vue_awesome_icons_file_o__ = __webpack_require__(146);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_vue_awesome_icons_table__ = __webpack_require__(147);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_vue_awesome_icons_th__ = __webpack_require__(148);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_vue_awesome_icons_chevron_right__ = __webpack_require__(149);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_vue_awesome_icons_chevron_left__ = __webpack_require__(150);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_vue_awesome_icons_close__ = __webpack_require__(151);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_vue_awesome_icons_caret_right__ = __webpack_require__(152);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17_vue_awesome_icons_plus__ = __webpack_require__(153);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18_vue_awesome_icons_minus__ = __webpack_require__(154);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19_vue_awesome_icons_hand_paper_o__ = __webpack_require__(155);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20_vue_awesome_icons_i_cursor__ = __webpack_require__(156);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21_vue_awesome_icons_picture_o__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22_vue_awesome_icons_search_plus__ = __webpack_require__(157);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23_vue_awesome_icons_search_minus__ = __webpack_require__(158);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24_vue_awesome_icons_book__ = __webpack_require__(159);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25_vue_awesome_components_Icon__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25_vue_awesome_components_Icon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_25_vue_awesome_components_Icon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26_buefy__ = __webpack_require__(160);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26_buefy___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_26_buefy__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27_buefy_lib_buefy_css__ = __webpack_require__(161);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27_buefy_lib_buefy_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_27_buefy_lib_buefy_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28_debounce__ = __webpack_require__(162);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28_debounce___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_28_debounce__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_26_buefy___default.a, {});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'reader',\n  components: {\n    'PDF': __WEBPACK_IMPORTED_MODULE_1__components_PDF___default.a,\n    'grid': __WEBPACK_IMPORTED_MODULE_3__components_Grid___default.a,\n    'tablegrid': __WEBPACK_IMPORTED_MODULE_2__components_Table___default.a,\n    'icon': __WEBPACK_IMPORTED_MODULE_25_vue_awesome_components_Icon___default.a,\n    'outline': __WEBPACK_IMPORTED_MODULE_4__components_Outline___default.a,\n    'detail': __WEBPACK_IMPORTED_MODULE_5__components_Detail___default.a\n  },\n  props: {\n    'manifest-url': {\n      type: String\n    },\n    'page-url': {\n      default: undefined\n    },\n    'image-url': {\n      type: String\n    },\n    'show-grid': {\n      default: undefined\n    },\n    'show-table': {\n      default: undefined\n    }\n  },\n  data: function data() {\n    var bounds = this.getBounds();\n\n    return {\n      manifest: {},\n      images: [],\n      page: 0,\n      displayedPage: 0,\n      spreads: true,\n      manualSpreads: false,\n\n      currentDetail: undefined,\n      width: bounds.width,\n      height: bounds.height,\n      outline: undefined,\n      outlineOpen: false,\n      query: '',\n      matchCount: undefined,\n      currentMatchIndex: undefined,\n      zoomLevel: 1.0,\n      shownDetail: undefined,\n      displayedDetail: undefined,\n      activeTab: 0,\n      title: '',\n      shortTitle: '',\n      current: '',\n      isModalActive: false,\n      showSearch: false,\n      artworkOpen: false,\n      navOpen: false,\n      totalPages: 1,\n      editingPage: false,\n      navTimeout: undefined,\n      tableFilter: undefined\n    };\n  },\n  created: function created() {\n    if (this.pageUrl) {\n      this.page = parseInt(this.pageUrl);\n    }\n\n    this.fetchManifest();\n\n    this.currentDetail = undefined;\n\n    this.toggleNav();\n\n    this.addListeners();\n\n    this.handleResize();\n\n    this._showTable();\n    this._showGrid();\n  },\n  beforeDestory: function beforeDestory() {\n    this.removeListeners();\n  },\n\n  computed: {\n    displayedPages: function displayedPages() {\n      if (!this.spreads || this.displayedPage === 0) {\n        return this.displayedPage + 1;\n      } else if (this.displayedPage === this.totalPages - 1) {\n        return this.displayedPage + 1;\n      } else {\n        return this.displayedPage + '\\u2013' + (this.displayedPage + 1);\n      }\n    }\n  },\n  watch: {\n    showTable: function showTable() {\n      this._showTable();\n    },\n    showGrid: function showGrid() {\n      this._showGrid();\n    },\n    artworkOpen: function artworkOpen(active) {\n      var grid = this.$refs.grid;\n\n      grid.handleResize();\n      grid.triggerLoad();\n      if (!active) {\n        if (this.displayedPage) {\n          this.$router.push({ name: 'PageLink', params: { page: this.displayedPage } });\n        } else {\n          this.$router.push({ name: 'Manifest' });\n        }\n      } else {\n        this.$router.push({ name: 'ArtworkLink', params: { tab: this.activeTab === 0 ? 'grid' : 'table' } });\n      }\n    },\n    activeTab: function activeTab() {\n      if (this.activeTab === 0) {\n        this.$router.push({ name: 'ArtworkLink', params: { tab: 'grid' } });\n      } else if (this.activeTab === 1) {\n        this.$router.push({ name: 'ArtworkLink', params: { tab: 'table' } });\n      }\n    },\n    pageUrl: function pageUrl() {\n      if (this.loaded) {\n        var pg = parseInt(this.pageUrl);\n        if (this.page !== pg && this.displayedPage !== pg) {\n          this.page = pg;\n        }\n      }\n    },\n    imageUrl: function imageUrl() {\n      if (this.loaded) {\n        this.currentDetail = this.imageUrl;\n      }\n    },\n    displayedDetail: function displayedDetail() {\n      if (this.displayedDetail) {\n        this.$router.push({ name: 'ImageLink', params: { image: this.displayedDetail } });\n      } else {}\n    },\n    displayedPage: function displayedPage() {\n      if (this.displayedPage) {\n        this.$router.push({ name: 'PageLink', params: { page: this.displayedPage } });\n      } else {\n        this.$router.push({ name: 'Manifest' });\n      }\n    },\n    spreads: function spreads() {},\n    isModalActive: function isModalActive(active) {\n      if (!active) {\n        if (this.artworkOpen) {\n          this.$router.push({ name: 'ArtworkLink', params: { tab: this.activeTab === 0 ? 'grid' : 'table' } });\n        } else if (this.displayedPage) {\n          this.$router.push({ name: 'PageLink', params: { page: this.displayedPage } });\n        } else {\n          this.$router.push({ name: 'Manifest' });\n        }\n      } else {\n        if (this.displayedDetail) {\n          this.$router.push({ name: 'ImageLink', params: { image: this.displayedDetail } });\n        }\n      }\n    }\n  },\n  methods: {\n    fetchManifest: function fetchManifest() {\n      var _this = this;\n\n      return fetch(this.manifestUrl).then(function (response) {\n        return response.json();\n      }).then(function (manifest) {\n        _this.manifest = manifest;\n\n        _this.shortTitle = manifest.title;\n        _this.title = manifest.title;\n        if (manifest.subtitle) {\n          _this.title += ': ' + manifest.subtitle;\n        }\n\n        _this.title += ' – ' + manifest.author_as_it_appears;\n\n        if (_this.imageUrl) {\n          _this.currentDetail = _this.imageUrl;\n        }\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    },\n    loaded: function loaded(pdfDocument) {\n      this.loaded = true;\n\n      this.pdfDocument = pdfDocument;\n\n      this.images = this.manifest.images;\n\n      this.totalPages = pdfDocument.numPages;\n    },\n    next: function next(e) {\n      var pdf = this.$refs.pdf;\n\n      pdf.next();\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    prev: function prev(e) {\n      var pdf = this.$refs.pdf;\n\n      pdf.prev();\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    keyListener: function keyListener(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === 37) {\n        this.prev();\n      } else if (keyCode === 39) {\n        this.next();\n      }\n    },\n    handleResize: function handleResize() {\n      var bounds = this.getBounds();\n      this.width = bounds.width;\n      this.height = bounds.height;\n\n      if (!this.manualSpreads) {\n        if (this.width < 600 && this.spreads === true) {\n          this.spreads = false;\n        }\n\n        if (this.width >= 600 && this.spreads === false) {\n          this.spreads = true;\n        }\n      }\n    },\n    goto: function goto(dest) {\n      var _this2 = this;\n\n      var pdf = this.$refs.pdf;\n\n      this.outlineOpen = false;\n      return pdf.getPageIndex(dest[0]).then(function (pg) {\n        _this2.page = pg;\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    },\n    onImageSelected: function onImageSelected(image) {\n      this.currentDetail = image;\n\n      if (this.displayedDetail && !this.isModalActive) {\n        this.isModalActive = true;\n      }\n    },\n    onPageSelected: function onPageSelected(page) {\n      this.page = page - 1;\n      this.isModalActive = false;\n      this.artworkOpen = false;\n      this.currentDetail = undefined;\n    },\n    onInfoSelected: function onInfoSelected(filter) {\n      this.toggleGrid();\n      this.tableFilter = filter;\n      this.artworkOpen = true;\n      this.isModalActive = false;\n      this.currentDetail = undefined;\n    },\n    onImageClicked: function onImageClicked(image) {\n      this.currentDetail = image.objId;\n\n      if (this.displayedDetail && !this.isModalActive) {\n        this.isModalActive = true;\n      }\n    },\n    onDetailClosed: function onDetailClosed() {\n      this.currentDetail = undefined;\n      this.displayedDetail = undefined;\n      this.isModalActive = false;\n    },\n    onDetailDisplayed: function onDetailDisplayed(detail) {\n      this.displayedDetail = detail;\n      this.isModalActive = true;\n    },\n    onFound: function onFound(count) {\n      this.matchCount = count;\n    },\n    onMatch: function onMatch(index) {\n      this.currentMatchIndex = index + 1;\n    },\n    onCurrentTitle: function onCurrentTitle(title) {\n      this.current = title;\n\n      if (title === 'Cover') {\n        this.current = '';\n      }\n    },\n    getBounds: function getBounds() {\n      var width = window.innerWidth;\n      var height = window.innerHeight;\n\n      return {\n        width: width,\n        height: height\n      };\n    },\n    setSpreads: function setSpreads(spreads) {\n      if (this.spreads !== spreads) {\n        this.spreads = spreads;\n      }\n\n      this.manualSpreads = true;\n    },\n    onOutlineReady: function onOutlineReady(outline) {\n      this.outline = outline;\n    },\n    onPageChanged: function onPageChanged(pages) {\n      this.displayedPage = pages[pages.length - 1];\n      this.page = -1;\n    },\n    onTabChanged: function onTabChanged(index) {\n      var _$refs = this.$refs,\n          grid = _$refs.grid,\n          table = _$refs.table;\n\n\n      if (index === 0) {\n        grid.handleResize();\n        grid.triggerLoad();\n      }\n\n      if (index === 1) {\n        table.triggerLoad();\n      }\n    },\n    toggleTable: function toggleTable() {\n      this.activeTab = 1;\n    },\n    toggleGrid: function toggleGrid() {\n      this.activeTab = 0;\n    },\n    nextMatch: function nextMatch() {\n      var pdf = this.$refs.pdf;\n\n      pdf.nextMatch();\n    },\n    prevMatch: function prevMatch() {\n      var pdf = this.$refs.pdf;\n\n      pdf.prevMatch();\n    },\n    zoomIn: function zoomIn() {\n      this.zoomLevel = Math.round(this.zoomLevel * 10 + 2) / 10;\n    },\n    zoomOut: function zoomOut() {\n      if (this.zoomLevel > 0.20) {\n        this.zoomLevel = Math.round(this.zoomLevel * 10 - 2) / 10;\n      }\n    },\n    showNav: function showNav() {\n      clearTimeout(this.navTimeout);\n      this.navOpen = true;\n    },\n    hideNav: function hideNav() {\n      this.navOpen = false;\n    },\n    toggleNav: function toggleNav() {\n      var _this3 = this;\n\n      if (this.navOpen) {\n        clearTimeout(this.navTimeout);\n        this.hideNav();\n      } else {\n        this.showNav();\n        this.navTimeout = setTimeout(function () {\n          _this3.hideNav();\n        }, 2000);\n      }\n    },\n    onMouseMove: function onMouseMove(e) {\n      var _this4 = this;\n\n      var y = e.y;\n\n      var dist = 100;\n      this.mouseMoved = true;\n\n      if (y < dist || y > window.innerHeight - dist) {\n        if (!this.openNav) {\n          this.openNav = setTimeout(function () {\n            _this4.showNav();\n          }, 300);\n        }\n      } else {\n        if (this.openNav) {\n          clearTimeout(this.openNav);\n          this.openNav = undefined;\n\n          if (this.navOpen) {\n            this.hideNav();\n          }\n        }\n      }\n    },\n    onMouseDown: function onMouseDown(e) {\n      this.mouseMoved = false;\n    },\n    onTouchMove: function onTouchMove(e) {\n      this.mouseMoved = true;\n    },\n    onClick: function onClick(e) {\n      var y = e.y;\n\n      var dist = 100;\n\n      if (y > dist && y < window.innerHeight - dist) {\n        if (!this.mouseMoved && !this.outlineOpen && !this.outlineOpen && !this.isModalActive) {\n          this.toggleNav();\n        }\n      }\n      this.mouseMoved = false;\n    },\n    addListeners: function addListeners() {\n      this._handleResize = __WEBPACK_IMPORTED_MODULE_28_debounce___default.a(this.handleResize.bind(this), 200);\n\n      window.addEventListener('keyup', this.keyListener.bind(this), false);\n      window.addEventListener('resize', this._handleResize, false);\n\n      window.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n      window.addEventListener('mousedown', this.onMouseDown.bind(this), false);\n      window.addEventListener('click', this.onClick.bind(this), false);\n      window.addEventListener('touchend', this.onClick.bind(this), false);\n      window.addEventListener('touchstart', this.onMouseDown.bind(this), false);\n      window.addEventListener('touchmove', this.onTouchMove.bind(this), false);\n    },\n    removeListeners: function removeListeners() {\n      window.removeEventListener('resize', this.handleResize);\n      window.removeEventListener('keyup', this.keyListener);\n\n      window.removeEventListener('mousemove', this.onMouseMove);\n      window.removeEventListener('mousedown', this.onMouseDown);\n      window.removeEventListener('click', this.onClick);\n      window.removeEventListener('touchend', this.onClick);\n      window.removeEventListener('touchstart', this.onMouseDown);\n      window.removeEventListener('touchmove', this.onTouchStart);\n    },\n    startPageEditing: function startPageEditing() {\n      this.editingPage = true;\n      this.$refs.pageEditor.focus();\n      this.$refs.pageEditor.value = '';\n    },\n    onPageEdited: function onPageEdited(v) {\n      var value = parseInt(v.target.value);\n      if (value) {\n        this.page = value - 1;\n      }\n      this.editingPage = false;\n    },\n    _showTable: function _showTable() {\n      var table = this.$refs.table;\n\n\n      if (this.showTable) {\n        this.artworkOpen = true;\n        this.toggleTable();\n      } else if (!this.showTable && !this.showGrid) {\n        this.artworkOpen = false;\n      }\n\n      table && table.triggerLoad();\n    },\n    _showGrid: function _showGrid() {\n      var grid = this.$refs.grid;\n\n\n      if (this.showGrid) {\n        this.artworkOpen = true;\n        this.toggleGrid();\n      } else if (!this.showGrid && !this.showTable) {\n        this.artworkOpen = false;\n      }\n\n      grid && grid.triggerLoad();\n    }\n  }\n});\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(65)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(66),\n  /* template */\n  __webpack_require__(114),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-84dcc46e\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 66 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Page__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Page___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_Page__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_Search__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_Search___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_Search__);\n\n\n\n\n\nvar pdfjsLib = __webpack_require__(10);\n\n\npdfjsLib.PDFJS.workerSrc = 'static/libs/pdfjs-dist/build/pdf.worker.js';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'pdf',\n  components: {\n    'Page': __WEBPACK_IMPORTED_MODULE_0__components_Page___default.a,\n    'Search': __WEBPACK_IMPORTED_MODULE_1__components_Search___default.a\n  },\n  props: {\n    'src': {\n      type: String\n    },\n    'width': {\n      type: Number,\n      default: undefined\n    },\n    'height': {\n      type: Number,\n      default: undefined\n    },\n    'page': {\n      default: 0,\n      type: Number\n    },\n    'spreads': {\n      default: true,\n      type: Boolean\n    },\n    'onImageClicked': {\n      default: undefined,\n      type: Function\n    },\n    'onOutlineReady': {\n      default: undefined,\n      type: Function\n    },\n    'query': {\n      default: undefined,\n      type: String\n    },\n    'zoom': {\n      default: 1,\n      type: Number\n    }\n  },\n  data: function data() {\n    return {\n      pdfDocument: undefined,\n      numPages: 0,\n      scale: 1,\n      rotate: undefined,\n      isLoading: true,\n      viewportWidth: 0,\n      viewportHeight: 0,\n      viewportLeft: 0,\n      viewportTop: 0,\n      displayedPage: 0,\n      displayedPages: [],\n      displayedPagesNumbers: [],\n      outline: undefined,\n      pageMatchesLength: [],\n      pageMatches: [],\n      matched: [],\n      selectedMatch: {}\n    };\n  },\n  updated: function updated() {},\n  mounted: function mounted() {\n    var _this = this;\n\n    if (this.src) {\n      this.loadDocument(this.src).then(function () {\n        _this.display(_this.page);\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    }\n  },\n\n  watch: {\n    src: function src() {\n      var _this2 = this;\n\n      if (this.src) {\n        this.loadDocument(this.src).then(function () {\n          _this2.display(_this2.page);\n        }).catch(function (err) {\n          return console.error(err);\n        });\n      }\n    },\n    page: function page(pg) {\n      if (typeof this.page !== 'undefined' && this.page > -1) {\n        this.display(this.page);\n      }\n    },\n    spreads: function spreads(_spreads) {\n      if (typeof this.displayedPage !== 'undefined') {\n        this.display(this.displayedPage);\n      }\n    },\n    displayedPage: function displayedPage() {\n      this.$emit('pageChanged', this.displayedPagesNumbers);\n    },\n    query: function query() {\n      if (this.query === '') {\n        this.clearMatches();\n      }\n    },\n    zoom: function zoom() {\n      var container = this.$refs.container;\n      var bounds = container.getBoundingClientRect();\n      this.scrollLeftDelta = container.scrollLeft - (container.scrollWidth - bounds.width) / 2;\n      this.scrollTopDelta = container.scrollTop - (container.scrollHeight - bounds.height) / 2;\n    }\n  },\n  methods: {\n    loadDocument: function loadDocument(src) {\n      var _this3 = this;\n\n      return pdfjsLib.getDocument(src).then(function (pdfDocument) {\n        var pagesCount = pdfDocument.numPages;\n\n        _this3.numPages = pagesCount;\n\n        _this3.pdfDocument = pdfDocument;\n\n        _this3.$emit('loaded', pdfDocument);\n\n        _this3.outline = pdfDocument.getOutline().then(function (outline) {\n          return _this3.processOutline(outline);\n        });\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    },\n    display: function display() {\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.page;\n\n      this.displayedPages = [];\n\n      if (page < 0) {\n        return;\n      }\n\n      if (page > this.numPages) {\n        page = 0;\n      }\n\n      if (this.spreads) {\n        if (page % 2 !== 0 || page === 0) {\n          this.displayedPage = page;\n        } else {\n          this.displayedPage = page - 1;\n        }\n\n        if (this.displayedPage > 0) {\n          this.loadPage(this.displayedPage);\n          if (this.displayedPage !== this.numPages - 1) {\n            this.loadPage(this.displayedPage + 1);\n            this.displayedPagesNumbers = [this.displayedPage, this.displayedPage + 1];\n          } else {\n            this.displayedPagesNumbers = [this.displayedPage];\n          }\n        } else {\n          this.loadPage(this.displayedPage);\n          this.displayedPagesNumbers = [this.displayedPage];\n        }\n      } else {\n        this.displayedPage = page;\n        this.loadPage(this.displayedPage);\n\n        this.displayedPagesNumbers = [this.displayedPage];\n      }\n    },\n    next: function next() {\n      if (this.displayedPage === 0) {\n        this.displayedPage += 1;\n      } else {\n        this.displayedPage += this.spreads ? 2 : 1;\n      }\n      if (this.displayedPage < this.numPages) {\n        this.display(this.displayedPage);\n      } else {\n        this.displayedPage = this.numPages - (this.spreads ? 2 : 1);\n      }\n    },\n    prev: function prev() {\n      if (this.displayedPage > 0) {\n        if (this.displayedPage === 1) {\n          this.displayedPage -= 1;\n        } else {\n          this.displayedPage -= this.spreads ? 2 : 1;\n        }\n        this.display(this.displayedPage);\n      }\n    },\n    loadPage: function loadPage(pageIndex) {\n      var _this4 = this;\n\n      var pdfDocument = this.pdfDocument;\n\n\n      if (!pdfDocument) {\n        throw new Error('Unexpected call to getPage() before the document has been loaded.');\n      }\n\n      var pageNumber = pageIndex + 1;\n\n      if (!pageIndex || pageNumber < 1) {\n        pageNumber = 1;\n      } else if (pageNumber >= pdfDocument.numPages) {\n        pageNumber = pdfDocument.numPages;\n      }\n\n      return pdfDocument.getPage(pageNumber).then(function (page) {\n        return _this4.onPageLoad(page);\n      }).catch(function (page) {\n        return _this4.onPageError(page);\n      });\n    },\n    onPageLoad: function onPageLoad(page) {\n      var _this5 = this;\n\n      if (!this.displayedPagesNumbers.includes(page.pageIndex)) {\n        return;\n      }\n\n      this.displayedPages.push(page);\n\n      this.$nextTick(function () {\n        var pg = _this5.$refs['page_' + page.pageIndex][0];\n        pg.updatedSelectedMatch(_this5.selectedMatch);\n        pg.updateTextLayerMatches(_this5.query, _this5.pageMatches, _this5.pageMatchesLength);\n      });\n    },\n    afterDisplayed: function afterDisplayed() {\n      var container = this.$refs.container;\n      var bounds = container.getBoundingClientRect();\n      container.scrollLeft = (container.scrollWidth - bounds.width) / 2 + this.scrollLeftDelta;\n      container.scrollTop = (container.scrollHeight - bounds.height) / 2 + this.scrollTopDelta;\n    },\n    onPageError: function onPageError(page) {\n      console.error(page);\n    },\n    handleViewport: function handleViewport(viewport) {\n      this.viewportWidth = this.spreads && this.displayedPage > 0 && this.displayedPage < this.numPages - 1 ? viewport.width * 2 : viewport.width;\n      this.viewportHeight = viewport.height;\n\n      var left = (this.width - this.viewportWidth) / 2;\n      var top = (this.height - this.viewportHeight) / 2;\n\n      this.viewportLeft = left > 0 ? left : 0;\n      this.viewportTop = top > 0 ? top : 0;\n    },\n    processOutline: function processOutline(outline) {\n      this.onOutlineReady && this.onOutlineReady(outline);\n      return outline;\n    },\n    getPageIndex: function getPageIndex(dest) {\n      return this.pdfDocument.getPageIndex(dest);\n    },\n    onMatched: function onMatched(matched, pageMatches, pageMatchesLength, count) {},\n    onFound: function onFound(query, matched, pageMatches, pageMatchesLength, count) {\n      this.pageMatches = pageMatches;\n      this.pageMatchesLength = pageMatchesLength;\n      this.matched = matched;\n      this.$emit('found', count);\n      if (this.matched && this.matched.length) {\n        this.currentMatchIndex = 0;\n        this.selectedMatch = this.matched[this.currentMatchIndex];\n        this.$emit('match', this.currentMatchIndex);\n\n        if (!this.displayedPagesNumbers.includes(this.selectedMatch.pageIdx)) {\n          this.display(this.selectedMatch.pageIdx);\n        } else {\n          var pg = this.$refs['page_' + this.selectedMatch.pageIdx][0];\n          pg.updatedSelectedMatch(this.selectedMatch);\n          pg.updateTextLayerMatches(this.query, this.pageMatches, this.pageMatchesLength);\n        }\n      }\n    },\n    onSelected: function onSelected(selected) {\n      var container = this.$refs.container;\n      var bounds = container.getBoundingClientRect();\n      container.scrollLeft = bounds.left + selected.left;\n      container.scrollTop = bounds.top + selected.top;\n    },\n    clearMatches: function clearMatches() {\n      var _this6 = this;\n\n      this.displayedPagesNumbers.forEach(function (pageIndex) {\n        var pg = _this6.$refs['page_' + pageIndex][0];\n        pg.updateTextLayerMatches('', [], null);\n      });\n    },\n    nextMatch: function nextMatch() {\n      if (!this.matched || this.matched.length === 0) {\n        return;\n      }\n\n      if (this.currentMatchIndex < this.matched.length - 1) {\n        this.currentMatchIndex += 1;\n      } else {\n        this.currentMatchIndex = 0;\n      }\n\n      this.selectedMatch = this.matched[this.currentMatchIndex];\n      this.$emit('match', this.currentMatchIndex);\n\n      if (!this.displayedPagesNumbers.includes(this.selectedMatch.pageIdx)) {\n        this.display(this.selectedMatch.pageIdx);\n      } else {\n        var pg = this.$refs['page_' + this.selectedMatch.pageIdx][0];\n        pg.updatedSelectedMatch(this.selectedMatch);\n      }\n    },\n    prevMatch: function prevMatch() {\n      if (!this.matched || this.matched.length === 0) {\n        return;\n      }\n\n      if (this.currentMatchIndex > 0) {\n        this.currentMatchIndex -= 1;\n      } else {\n        this.currentMatchIndex = this.matched.length - 1;\n      }\n\n      this.selectedMatch = this.matched[this.currentMatchIndex];\n      this.$emit('match', this.currentMatchIndex);\n\n      if (!this.displayedPagesNumbers.includes(this.selectedMatch.pageIdx)) {\n        this.display(this.selectedMatch.pageIdx);\n      } else {\n        var pg = this.$refs['page_' + this.selectedMatch.pageIdx][0];\n        pg.updatedSelectedMatch(this.selectedMatch);\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(68)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(69),\n  /* template */\n  __webpack_require__(79),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 69 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_TextLayer__ = __webpack_require__(70);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_TextLayer___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_TextLayer__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_ImageLayer__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_ImageLayer___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_ImageLayer__);\n\n\n\n\n\nvar pdfjsLib = __webpack_require__(10);\npdfjsLib.PDFJS.workerSrc = '/static/libs/pdfjs-dist/build/pdf.worker.js';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'page',\n  components: {\n    'textlayer': __WEBPACK_IMPORTED_MODULE_0__components_TextLayer___default.a,\n    'imagelayer': __WEBPACK_IMPORTED_MODULE_1__components_ImageLayer___default.a\n  },\n  props: {\n    'scale': {\n      default: 1,\n      type: Number\n    },\n    'rotate': {\n      default: undefined,\n      type: Number\n    },\n    'width': {\n      type: Number\n    },\n    'height': {\n      type: Number\n    },\n    'page': {\n      default: undefined,\n      type: Object\n    },\n    'onViewport': {\n      default: undefined,\n      type: Function\n    },\n    'onImageClicked': {\n      default: undefined,\n      type: Function\n    },\n    'onSelected': {\n      default: undefined,\n      type: Function\n    }\n  },\n  data: function data() {\n    return {\n      pdf: undefined,\n      isLoading: true,\n      viewportWidth: 0,\n      viewportHeight: 0,\n      viewportScale: 1,\n      viewport: undefined,\n      textContent: undefined,\n      images: [],\n      pageIndex: undefined\n    };\n  },\n  updated: function updated() {},\n  mounted: function mounted() {\n    if (this.page) {\n      this.displayPage(this.page);\n    }\n  },\n\n  watch: {\n    page: function page() {\n      if (this.page) {\n        this.displayPage(this.page);\n      }\n    },\n    scale: function scale() {\n      if (this.displaying) {\n        return;\n      }\n      if (typeof this.scale !== 'undefined') {\n        this.displayPage(this.page);\n      }\n    },\n    width: function width() {\n      if (this.displaying) {\n        return;\n      }\n      if (typeof this.scale !== 'undefined') {\n        this.displayPage(this.page);\n      }\n    },\n    height: function height() {\n      if (this.displaying) {\n        return;\n      }\n      if (typeof this.scale !== 'undefined') {\n        this.displayPage(this.page);\n      }\n    },\n    pageMatches: function pageMatches() {}\n  },\n  methods: {\n    getPageScale: function getPageScale() {\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.page;\n      var scale = this.scale,\n          width = this.width,\n          height = this.height;\n\n      var pageScale = 1;\n\n      if (width < height) {\n        pageScale = width / page.getViewport(scale).width;\n      } else {\n        pageScale = height / page.getViewport(scale).height;\n      }\n\n      return scale * pageScale;\n    },\n    displayPage: function displayPage(page) {\n      var _this = this;\n\n      var canvas = this.$refs.canvas;\n\n      var canvasContext = canvas.getContext('2d');\n      var scale = this.scale;\n\n      var scaled = scale !== 1 ? scale : this.getPageScale(page);\n      var viewport = page.getViewport(scaled);\n      var images = this.images;\n      var imageCount = 0;\n      var imageLayer = {\n        beginLayout: function beginLayout() {},\n        endLayout: function endLayout() {},\n        appendImage: function appendImage(i) {\n          i.page = page.pageIndex;\n          i.index = imageCount;\n          images.push(i);\n          imageCount++;\n        }\n      };\n\n      this.pageIndex = page.pageIndex;\n      this.viewport = viewport;\n      this.viewportScale = scale;\n      this.viewportHeight = viewport.height;\n      this.viewportWidth = viewport.width;\n\n      this.onViewport && this.onViewport(viewport);\n\n      this.displaying = true;\n      page.render({ canvasContext: canvasContext, viewport: viewport, imageLayer: imageLayer }).then(function () {\n        _this.$emit('displayed', _this);\n        _this.displaying = false;\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    },\n    onPageError: function onPageError(page) {\n      console.error(page);\n    },\n    updateTextLayerMatches: function updateTextLayerMatches(query, pageMatches, pageMatchesLength) {\n      this.query = query;\n      this.pageMatchesLength = pageMatchesLength;\n      this.pageMatches = pageMatches;\n\n      if (pageMatches && pageMatches.length > this.pageIndex) {\n        this.$refs.textLayer.updateTextLayerMatches(query, pageMatches[this.pageIndex], pageMatchesLength ? pageMatchesLength[this.pageIndex] : null);\n      } else {\n        this.$refs.textLayer.clearTextLayerMatches();\n      }\n    },\n    updatedSelectedMatch: function updatedSelectedMatch(selectedMatch) {\n      this.selectedMatch = selectedMatch;\n      if (this.pageIndex === selectedMatch.pageIdx) {\n        this.$refs.textLayer.selectedMatch(selectedMatch.pageIdx, selectedMatch.matchIdx);\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(71)\n  __webpack_require__(72)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(73),\n  /* template */\n  __webpack_require__(74),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-448030bb\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 73 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\nvar pdfjsLib = __webpack_require__(10);\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'textlayer',\n  props: {\n    'page': {\n      default: undefined\n    },\n    'viewport': {\n      default: undefined\n    },\n    'renderTimeout': {\n      default: 300,\n      type: Number\n    }\n  },\n  data: function data() {\n    return {\n      matches: [],\n      textDivs: [],\n      selected: {\n        pageIdx: -1,\n        matchIdx: -1\n      },\n      query: ''\n    };\n  },\n  updated: function updated() {},\n  mounted: function mounted() {\n    var _this = this;\n\n    if (this.page) {\n      this.getTextContent(this.page).then(function (textContent) {\n        return _this.onContent(textContent);\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    }\n  },\n  destroyed: function destroyed() {},\n\n  watch: {\n    page: function page() {\n      var _this2 = this;\n\n      if (this.page) {\n        this.getTextContent(this.page).then(function (textContent) {\n          return _this2.onContent(textContent);\n        }).catch(function (err) {\n          return console.error(err);\n        });\n      }\n    },\n    viewport: function viewport() {\n      if (this.textContent) {\n        this.onContent(this.textContent);\n      }\n    }\n  },\n  methods: {\n    getTextContent: function getTextContent(page) {\n      return page.getTextContent({ normalizeWhitespace: true });\n    },\n    onContent: function onContent(textContent) {\n      var _this3 = this;\n\n      var textLayer = this.$refs.textLayer;\n\n\n      this.clearTextLayer();\n\n      this.textContent = textContent;\n\n      this.textDivs = [];\n      var textLayerFrag = document.createDocumentFragment();\n\n      if (this.textLayerRenderTask) {\n        this.textLayerRenderTask.cancel();\n        this.textLayerRenderTask = null;\n      }\n\n      this.textLayerRenderTask = pdfjsLib.renderTextLayer({\n        textContent: textContent,\n        container: textLayerFrag,\n        viewport: this.viewport,\n        textDivs: this.textDivs,\n        timeout: this.renderTimeout\n      });\n\n      this.textLayerRenderTask.promise.then(function () {\n        textLayer.appendChild(textLayerFrag);\n\n        if (_this3.pageMatches) {\n          _this3.matches = _this3.convertMatches(_this3.pageMatches, _this3.pageMatchesLength);\n          _this3.renderMatches(_this3.matches);\n        }\n      }).catch(function (err) {\n        return console.warn(err);\n      });\n    },\n    onPageError: function onPageError(page) {\n      console.error(page);\n    },\n    clearTextLayer: function clearTextLayer() {\n      var textLayer = this.$refs.textLayer;\n\n      while (textLayer.firstChild) {\n        textLayer.removeChild(textLayer.firstChild);\n      }\n    },\n    updateTextLayerMatches: function updateTextLayerMatches(query, pageMatches, pageMatchesLength) {\n      this.pageMatches = pageMatches;\n      this.pageMatchesLength = pageMatchesLength;\n      this.query = query;\n      if (this.textContent) {\n        this.clearMatches();\n        this.matches = this.convertMatches(this.pageMatches, this.pageMatchesLength);\n        this.renderMatches(this.matches);\n      }\n    },\n    clearTextLayerMatches: function clearTextLayerMatches() {\n      this.pageMatches = [];\n      this.pageMatchesLength = [];\n      this.query = '';\n      this.clearMatches();\n      this.selected = { pageIdx: -1, matchIdx: -1 };\n      this._sentSelected = false;\n    },\n    selectedMatch: function selectedMatch(pageIdx, matchIdx) {\n      this._sentSelected = false;\n      this.clearMatches();\n      this.selected = { pageIdx: pageIdx, matchIdx: matchIdx };\n      this.renderMatches(this.matches);\n    },\n    renderMatches: function renderMatches(matches) {\n      if (matches.length === 0) {\n        return;\n      }\n\n      var bidiTexts = this.textContent.items;\n      var textDivs = this.textDivs;\n      var prevEnd = null;\n      var pageIdx = this.page.pageIndex;\n      var isSelectedPage = this.selected.pageIdx === pageIdx;\n      var selectedMatchIdx = this.selected.matchIdx || -1;\n      var highlightAll = true;\n      var infinity = {\n        divIdx: -1,\n        offset: undefined\n      };\n\n      function beginText(begin, className) {\n        var divIdx = begin.divIdx;\n        textDivs[divIdx].textContent = '';\n        appendTextToDiv(divIdx, 0, begin.offset, className);\n      }\n\n      function appendTextToDiv(divIdx, fromOffset, toOffset, className) {\n        var div = textDivs[divIdx];\n        var content = bidiTexts[divIdx].str.substring(fromOffset, toOffset);\n        var node = document.createTextNode(content);\n        if (className) {\n          var span = document.createElement('span');\n          span.className = className;\n          span.appendChild(node);\n          div.appendChild(span);\n          return;\n        }\n        div.appendChild(node);\n      }\n\n      var i0 = selectedMatchIdx;\n      var i1 = i0 + 1;\n      if (highlightAll) {\n        i0 = 0;\n        i1 = matches.length;\n      } else if (!isSelectedPage) {\n        return;\n      }\n\n      for (var i = i0; i < i1; i++) {\n        var match = matches[i];\n        var begin = match.begin;\n        var end = match.end;\n        var isSelected = isSelectedPage && match.matchIdx === selectedMatchIdx;\n        var highlightSuffix = isSelected ? ' selected' : '';\n\n        if (isSelected && !this._sentSelected) {\n          this.$emit('selected', textDivs[begin.divIdx].getBoundingClientRect());\n          this._sentSelected = true;\n        }\n\n        if (!prevEnd || begin.divIdx !== prevEnd.divIdx) {\n          if (prevEnd !== null) {\n            appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n          }\n\n          beginText(begin);\n        } else {\n          appendTextToDiv(prevEnd.divIdx, prevEnd.offset, begin.offset);\n        }\n\n        if (begin.divIdx === end.divIdx) {\n          appendTextToDiv(begin.divIdx, begin.offset, end.offset, 'highlight' + highlightSuffix);\n        } else {\n          appendTextToDiv(begin.divIdx, begin.offset, infinity.offset, 'highlight begin' + highlightSuffix);\n          for (var n0 = begin.divIdx + 1, n1 = end.divIdx; n0 < n1; n0++) {\n            textDivs[n0].className = 'highlight middle' + highlightSuffix;\n          }\n          beginText(end, 'highlight end' + highlightSuffix);\n        }\n        prevEnd = end;\n      }\n\n      if (prevEnd) {\n        appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n      }\n    },\n    convertMatches: function convertMatches(matches, matchesLength) {\n      var i = 0;\n      var iIndex = 0;\n      var bidiTexts = this.textContent.items;\n      var end = bidiTexts.length - 1;\n      var queryLen = this.query ? this.query.length : 0;\n      var ret = [];\n      if (!matches) {\n        return ret;\n      }\n      for (var m = 0, len = matches.length; m < len; m++) {\n        var matchIdx = matches[m];\n\n        while (i !== end && matchIdx >= iIndex + bidiTexts[i].str.length) {\n          iIndex += bidiTexts[i].str.length;\n          i++;\n        }\n\n        if (i === bidiTexts.length) {\n          console.error('Could not find a matching mapping');\n        }\n\n        var match = {\n          matchIdx: matchIdx,\n          begin: {\n            divIdx: i,\n            offset: matchIdx - iIndex\n          }\n        };\n\n        if (matchesLength) {\n          matchIdx += matchesLength[m];\n        } else {\n          matchIdx += queryLen;\n        }\n\n        while (i !== end && matchIdx > iIndex + bidiTexts[i].str.length) {\n          iIndex += bidiTexts[i].str.length;\n          i++;\n        }\n\n        match.end = {\n          divIdx: i,\n          offset: matchIdx - iIndex\n        };\n        ret.push(match);\n      }\n\n      return ret;\n    },\n    clearMatches: function clearMatches() {\n      if (!this.textContent) {\n        return;\n      }\n\n      var matches = this.matches;\n      var textDivs = this.textDivs;\n      var bidiTexts = this.textContent.items;\n      var clearedUntilDivIdx = -1;\n\n      for (var i = 0, len = matches.length; i < len; i++) {\n        var match = matches[i];\n        var begin = Math.max(clearedUntilDivIdx, match.begin.divIdx);\n        for (var n = begin, end = match.end.divIdx; n <= end; n++) {\n          var div = textDivs[n];\n          div.textContent = bidiTexts[n].str;\n          div.className = '';\n        }\n        clearedUntilDivIdx = match.end.divIdx + 1;\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"textLayer\",\n    staticClass: \"textLayer\",\n    style: ({\n      width: ((_vm.viewport ? _vm.viewport.width : 0) + \"px\"),\n      height: ((_vm.viewport ? _vm.viewport.height : 0) + \"px\")\n    })\n  })\n},staticRenderFns: []}\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(76)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(77),\n  /* template */\n  __webpack_require__(78),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-633d2fa2\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 77 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'imagelayer',\n  props: {\n    'images': {\n      default: [],\n      type: Array\n    },\n    'viewport': {\n      default: undefined,\n      type: Object\n    },\n    'onImageClicked': {\n      default: undefined,\n      type: Function\n    }\n  },\n  data: function data() {\n    return {};\n  },\n  updated: function updated() {},\n  mounted: function mounted() {\n    if (this.images) {}\n  },\n\n  watch: {\n    images: function images() {\n      if (this.images) {}\n    }\n  },\n  methods: {\n    handleClick: function handleClick(image) {\n      if (this.onImageClicked) {\n        this.onImageClicked(image);\n      }\n      this.$emit('imageClicked', image);\n    }\n  }\n});\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"imageLayer\",\n    staticClass: \"imageLayer\",\n    style: ({\n      width: ((_vm.viewport ? _vm.viewport.width : 0) + \"px\"),\n      height: ((_vm.viewport ? _vm.viewport.height : 0) + \"px\")\n    })\n  }, _vm._l((_vm.images), function(image) {\n    return _c('div', {\n      ref: image.objId,\n      refInFor: true,\n      staticClass: \"imageLayerItem\",\n      style: ({\n        width: ((image.width) + \"px\"),\n        height: ((image.height) + \"px\"),\n        top: ((image.top-image.height) + \"px\"),\n        left: ((image.left) + \"px\")\n      }),\n      attrs: {\n        \"id\": image.objId\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.handleClick(image)\n        }\n      }\n    })\n  }))\n},staticRenderFns: []}\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"pageWrapper\",\n    class: {\n      loading: _vm.isLoading\n    },\n    style: ({\n      width: (_vm.viewportWidth + \"px\"),\n      height: (_vm.viewportHeight + \"px\")\n    })\n  }, [_c('canvas', {\n    ref: \"canvas\",\n    attrs: {\n      \"width\": (_vm.viewportWidth + \"px\"),\n      \"height\": (_vm.viewportHeight + \"px\")\n    }\n  }), _vm._v(\" \"), _c('textlayer', {\n    ref: \"textLayer\",\n    attrs: {\n      \"page\": _vm.page,\n      \"viewport\": _vm.viewport,\n      \"scale\": _vm.scale\n    },\n    on: {\n      \"selected\": _vm.onSelected\n    }\n  }), _vm._v(\" \"), _c('imagelayer', {\n    attrs: {\n      \"images\": _vm.images,\n      \"viewport\": _vm.viewport,\n      \"scale\": _vm.scale,\n      \"onImageClicked\": _vm.onImageClicked\n    }\n  }), _vm._v(\" \"), _c('div', {\n    ref: \"annotationLayer\"\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(81),\n  /* template */\n  __webpack_require__(113),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 81 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_pdfjs_dist__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_pdfjs_dist___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_pdfjs_dist__);\n\n\n\n\n\n\nvar FIND_TIMEOUT = 250;\n\nvar CHARACTERS_TO_NORMALIZE = {\n  '\\u2018': '\\'',\n  '\\u2019': '\\'',\n  '\\u201A': '\\'',\n  '\\u201B': '\\'',\n  '\\u201C': '\"',\n  '\\u201D': '\"',\n  '\\u201E': '\"',\n  '\\u201F': '\"',\n  '\\xBC': '1/4',\n  '\\xBD': '1/2',\n  '\\xBE': '3/4' };\n\nvar replace = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_keys___default.a(CHARACTERS_TO_NORMALIZE).join('');\nvar normalizationRegex = new RegExp('[' + replace + ']', 'g');\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'search',\n  props: {\n    'waitTimeout': {\n      default: 30,\n      type: Number\n    },\n    'pdfDocument': {\n      default: undefined\n    },\n    'query': {\n      default: '',\n      type: String\n    },\n    'phraseSearch': {\n      default: true,\n      type: Boolean\n    },\n    'minQueryLength': {\n      default: 3,\n      type: Number\n    }\n  },\n  data: function data() {\n    return {\n      matches: [],\n      textDivs: [],\n      pageContents: [],\n      pageMatches: [],\n      pageMatchesLength: null,\n      matchCount: 0,\n      pagesCount: 0,\n      pendingFindMatches: {},\n      active: false,\n      pagesToSearch: null,\n      extractTextPromises: [],\n      matched: []\n    };\n  },\n  updated: function updated() {},\n  mounted: function mounted() {\n    if (this.pdfDocument) {\n      this.extractText();\n    }\n  },\n\n  watch: {\n    pdfDocument: function pdfDocument() {\n      if (this.pdfDocument) {\n        this.extractText();\n      }\n    },\n    query: function query() {\n      var _this = this;\n\n      if (this.query === '') {\n        this.reset();\n      }\n\n      clearTimeout(this.findTimeout);\n      this.findTimeout = setTimeout(function () {\n        if (_this.query.length > _this.minQueryLength) {\n          _this.find(_this.query);\n        }\n      }, FIND_TIMEOUT);\n    }\n  },\n  methods: {\n    reset: function reset() {\n      this.matched = [];\n      this.pageMatches = [];\n      this.pageMatchesLength = null;\n      this.matchCount = 0;\n\n      this.$emit('matched', this.matched, this.pageMatchesLength, this.matchCount);\n      this.$emit('found', this.pageMatches, this.pageMatchesLength, this.matchCount);\n    },\n    find: function find(query) {\n      var _this2 = this;\n\n      var numPages = this.pagesCount;\n\n      if (this.prevQuery && this.prevQuery === query) {\n        return;\n      }\n      this.prevQuery = query;\n\n      this.matched = [];\n      this.pageMatches = [];\n      this.pageMatchesLength = null;\n      this.matchCount = 0;\n      this.selected = {\n        pageIdx: -1,\n        matchIdx: -1\n      };\n\n      for (var i = 0; i < numPages; i++) {\n        if (!(i in this.pendingFindMatches)) {\n          this.pendingFindMatches[i] = true;\n          this.extractTextPromises[i].then(function (pageIdx) {\n            delete _this2.pendingFindMatches[pageIdx];\n            _this2.calcFindMatch(pageIdx);\n          });\n        }\n      }\n    },\n    normalize: function normalize(text) {\n      return text.replace(normalizationRegex, function (ch) {\n        return CHARACTERS_TO_NORMALIZE[ch];\n      });\n    },\n    _prepareMatches: function _prepareMatches(matchesWithLength, matches, matchesLength) {\n      function isSubTerm(matchesWithLength, currentIndex) {\n        var currentElem = matchesWithLength[currentIndex];\n        var nextElem = matchesWithLength[currentIndex + 1];\n\n        if (currentIndex < matchesWithLength.length - 1 && currentElem.match === nextElem.match) {\n          currentElem.skipped = true;\n          return true;\n        }\n\n        for (var i = currentIndex - 1; i >= 0; i--) {\n          var prevElem = matchesWithLength[i];\n          if (prevElem.skipped) {\n            continue;\n          }\n          if (prevElem.match + prevElem.matchLength < currentElem.match) {\n            break;\n          }\n          if (prevElem.match + prevElem.matchLength >= currentElem.match + currentElem.matchLength) {\n            currentElem.skipped = true;\n            return true;\n          }\n        }\n        return false;\n      }\n\n      matchesWithLength.sort(function (a, b) {\n        return a.match === b.match ? a.matchLength - b.matchLength : a.match - b.match;\n      });\n      for (var i = 0, len = matchesWithLength.length; i < len; i++) {\n        if (isSubTerm(matchesWithLength, i)) {\n          continue;\n        }\n        matches.push(matchesWithLength[i].match);\n        matchesLength.push(matchesWithLength[i].matchLength);\n      }\n    },\n    calcFindPhraseMatch: function calcFindPhraseMatch(query, pageIndex, pageContent) {\n      var matches = [];\n      var queryLen = query.length;\n      var matchIdx = -queryLen;\n      while (true) {\n        matchIdx = pageContent.indexOf(query, matchIdx + queryLen);\n        if (matchIdx === -1) {\n          break;\n        }\n        matches.push(matchIdx);\n      }\n      this.pageMatches[pageIndex] = matches;\n    },\n    calcFindWordMatch: function calcFindWordMatch(query, pageIndex, pageContent) {\n      var matchesWithLength = [];\n\n      var queryArray = query.match(/\\S+/g);\n      for (var i = 0, len = queryArray.length; i < len; i++) {\n        var subquery = queryArray[i];\n        var subqueryLen = subquery.length;\n        var matchIdx = -subqueryLen;\n        while (true) {\n          matchIdx = pageContent.indexOf(subquery, matchIdx + subqueryLen);\n          if (matchIdx === -1) {\n            break;\n          }\n\n          matchesWithLength.push({\n            match: matchIdx,\n            matchLength: subqueryLen,\n            skipped: false\n          });\n        }\n      }\n\n      if (!this.pageMatchesLength) {\n        this.pageMatchesLength = [];\n      }\n      this.pageMatchesLength[pageIndex] = [];\n      this.pageMatches[pageIndex] = [];\n\n      this._prepareMatches(matchesWithLength, this.pageMatches[pageIndex], this.pageMatchesLength[pageIndex]);\n    },\n    calcFindMatch: function calcFindMatch(pageIndex) {\n      var _this3 = this;\n\n      var pageContent = this.normalize(this.pageContents[pageIndex]);\n      var query = this.normalize(this.query);\n      var caseSensitive = this.caseSensitive;\n      var phraseSearch = this.phraseSearch;\n      var queryLen = query.length;\n\n      if (queryLen === 0) {\n        return;\n      }\n\n      if (!caseSensitive) {\n        pageContent = pageContent.toLowerCase();\n        query = query.toLowerCase();\n      }\n\n      if (phraseSearch) {\n        this.calcFindPhraseMatch(query, pageIndex, pageContent);\n      } else {\n        this.calcFindWordMatch(query, pageIndex, pageContent);\n      }\n\n      if (pageIndex in this.pageMatches && this.pageMatches[pageIndex].length > 0) {\n        this.matchCount += this.pageMatches[pageIndex].length;\n\n        this.pageMatches[pageIndex].forEach(function (match) {\n          _this3.matched.push({\n            matchIdx: match,\n            pageIdx: pageIndex\n          });\n          _this3.$emit('matched', _this3.query, _this3.matched, _this3.pageMatches[pageIndex], _this3.pageMatchesLength ? _this3.pageMatchesLength[pageIndex] : null, _this3.matchCount);\n        });\n      }\n\n      if (this.pageMatches.length === this.pagesCount) {\n        this.$emit('found', this.query, this.matched, this.pageMatches, this.pageMatchesLength, this.matchCount);\n      }\n    },\n    getPageTextContent: function getPageTextContent(pageIndex) {\n      return this.pdfDocument.getPage(pageIndex + 1).then(function (page) {\n        return page.getTextContent({\n          normalizeWhitespace: true\n        });\n      }).catch(function (err) {\n        return console.error(err);\n      });\n    },\n    extractText: function extractText() {\n      var _this4 = this;\n\n      if (this.startedTextExtraction) {\n        return;\n      }\n      this.startedTextExtraction = true;\n      this.pageContents.length = 0;\n      this.pagesCount = this.pdfDocument.numPages - 1;\n\n      var promise = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a.resolve();\n\n      var _loop = function _loop(i, ii) {\n        var extractTextCapability = __WEBPACK_IMPORTED_MODULE_2_pdfjs_dist__[\"createPromiseCapability\"]();\n        _this4.extractTextPromises[i] = extractTextCapability.promise;\n\n        promise = promise.then(function () {\n          return _this4.getPageTextContent(i).then(function (textContent) {\n            var textItems = textContent.items;\n            var strBuf = [];\n\n            for (var j = 0, jj = textItems.length; j < jj; j++) {\n              strBuf.push(textItems[j].str);\n            }\n\n            _this4.pageContents[i] = strBuf.join('');\n            extractTextCapability.resolve(i);\n          });\n        });\n      };\n\n      for (var i = 0, ii = this.pagesCount; i < ii; i++) {\n        _loop(i, ii);\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 82 */,\n/* 83 */,\n/* 84 */,\n/* 85 */,\n/* 86 */,\n/* 87 */,\n/* 88 */,\n/* 89 */,\n/* 90 */,\n/* 91 */,\n/* 92 */,\n/* 93 */,\n/* 94 */,\n/* 95 */,\n/* 96 */,\n/* 97 */,\n/* 98 */,\n/* 99 */,\n/* 100 */,\n/* 101 */,\n/* 102 */,\n/* 103 */,\n/* 104 */,\n/* 105 */,\n/* 106 */,\n/* 107 */,\n/* 108 */,\n/* 109 */,\n/* 110 */,\n/* 111 */,\n/* 112 */,\n/* 113 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c(\"div\")\n},staticRenderFns: []}\n\n/***/ }),\n/* 114 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: 'container',\n    staticClass: \"pageContainer\",\n    class: {\n      loading: _vm.isLoading, centered: (!_vm.spreads || _vm.zoom <= 1)\n    },\n    style: ({\n      width: (_vm.width + \"px\"),\n      height: ((_vm.height ? _vm.height : _vm.viewportHeight) + \"px\")\n    })\n  }, [_c('div', {\n    staticClass: \"pages\",\n    style: ({\n      width: (_vm.viewportWidth + \"px\"),\n      height: (_vm.viewportHeight + \"px\"),\n      top: (_vm.viewportTop + \"px\"),\n      left: (_vm.viewportLeft + \"px\")\n    })\n  }, _vm._l((_vm.displayedPages), function(page) {\n    return _c('page', {\n      key: page.pageIndex,\n      ref: 'page_' + page.pageIndex,\n      refInFor: true,\n      staticClass: \"page\",\n      attrs: {\n        \"page\": page,\n        \"width\": _vm.spreads ? (_vm.width / 2) - 40 : _vm.width - 40,\n        \"height\": _vm.height - 40,\n        \"scale\": _vm.zoom,\n        \"onViewport\": _vm.handleViewport,\n        \"onImageClicked\": _vm.onImageClicked,\n        \"onSelected\": _vm.onSelected\n      },\n      on: {\n        \"displayed\": _vm.afterDisplayed\n      }\n    })\n  })), _vm._v(\" \"), _c('search', {\n    attrs: {\n      \"pdfDocument\": _vm.pdfDocument,\n      \"query\": _vm.query\n    },\n    on: {\n      \"matched\": this.onMatched,\n      \"found\": this.onFound\n    }\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 115 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(116)\n  __webpack_require__(117)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(118),\n  /* template */\n  __webpack_require__(122),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-31beea36\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 116 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 117 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 118 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_lazyload__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_lazyload___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_vue_lazyload__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vue_awesome_icons_search__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue_awesome_icons_institution__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vue_awesome_icons_user__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_vue_awesome_icons_picture_o__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_vue_awesome_components_Icon__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_vue_awesome_components_Icon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_vue_awesome_components_Icon__);\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_2_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_lazyload___default.a, {\n  preLoad: 1.3,\n\n  attempt: 1\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'table',\n  components: {\n    'icon': __WEBPACK_IMPORTED_MODULE_7_vue_awesome_components_Icon___default.a\n  },\n  props: {\n    'data': {\n      type: Array\n    },\n    'filter': {\n      type: Object,\n      default: undefined\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    if (this.filter) {\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default.a(this.filter).forEach(function (key) {\n        var value = _this.filter[key];\n\n        if (key === 'artwork_title') {\n          _this.artworkFilter = value;\n        }\n\n        if (key === 'artist_name') {\n          _this.artistFilter = value;\n        }\n\n        if (key === 'collection') {\n          _this.collectionFilter = value;\n        }\n      });\n    }\n  },\n  data: function data() {\n    var sortOrders = {};\n    this.columns = ['thumbnail', 'page', 'artwork_title', 'artist', 'collection'];\n    this.columns.forEach(function (key) {\n      sortOrders[key] = 1;\n    });\n    return {\n      sortKey: '',\n      sortOrders: sortOrders,\n      filterKey: '',\n\n      gridColumns: [],\n      imagesByArtwork: {},\n      imagesByArtist: {},\n      imagesByCollection: {},\n      artworks: [],\n      artists: [],\n      collections: [],\n      artistFilter: '',\n      artworkFilter: '',\n      collectionFilter: ''\n    };\n  },\n\n  computed: {\n    filteredData: function filteredData() {\n      var sortKey = this.sortKey;\n      var filterKey = this.filterKey && this.filterKey.toLowerCase();\n      var artworkFilter = this.artworkFilter && this.artworkFilter.toLowerCase();\n      var artistFilter = this.artistFilter && this.artistFilter.toLowerCase();\n      var collectionFilter = this.collectionFilter && this.collectionFilter.toLowerCase();\n      var order = this.sortOrders[sortKey] || 1;\n      var data = this.data;\n\n      if (artworkFilter && data) {\n        data = data.filter(function (row) {\n          if (row.artwork_title) {\n            return String(row.artwork_title).toLowerCase().indexOf(artworkFilter) > -1;\n          }\n        });\n      }\n\n      if (artistFilter && data) {\n        data = data.filter(function (row) {\n          if (row.artist_name) {\n            return String(row.artist_name).toLowerCase().indexOf(artistFilter) > -1;\n          }\n        });\n      }\n\n      if (collectionFilter && data) {\n        data = data.filter(function (row) {\n          if (row.collection) {\n            return String(row.collection).toLowerCase().indexOf(collectionFilter) > -1;\n          }\n        });\n      }\n\n      if (filterKey && data) {\n        data = data.filter(function (row) {\n          return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default.a(row).some(function (key) {\n            return String(row[key]).toLowerCase().indexOf(filterKey) > -1;\n          });\n        });\n      }\n      if (sortKey) {\n        data = data.slice().sort(function (a, b) {\n          a = a[sortKey];\n          b = b[sortKey];\n          return (a === b ? 0 : a > b ? 1 : -1) * order;\n        });\n      }\n      return data;\n    }\n  },\n  filters: {\n    capitalize: function capitalize(str) {\n      return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    titlecase: function titlecase(_str) {\n      var str;\n      str = _str.replace(/_/g, ' ');\n      str = str.replace(/([^\\W_]+[^\\s-]*) */g, function (txt) {\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n      });\n\n      return str;\n    },\n    truncate: function truncate(text) {\n      var stop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 60;\n      var clamp = arguments[2];\n\n      return text.slice(0, stop) + (stop < text.length ? clamp || '...' : '');\n    }\n  },\n  watch: {\n    data: function data() {\n      var _this2 = this;\n\n      this.data.forEach(function (image) {\n        if (image.artist_name) {\n          var artistUri = encodeURI(image.artist_name);\n          if (!_this2.imagesByArtist[artistUri]) {\n            _this2.imagesByArtist[artistUri] = [];\n            _this2.artists.push({\n              uri: artistUri,\n              name: image.artist_name\n            });\n          }\n          _this2.imagesByArtist[artistUri].push(image);\n        }\n\n        if (image.artwork_title) {\n          var artworkUri = encodeURI(image.artwork_title);\n          if (!_this2.imagesByArtwork[artworkUri]) {\n            _this2.imagesByArtwork[artworkUri] = [];\n            _this2.artworks.push({\n              uri: artworkUri,\n              name: image.artwork_title\n            });\n          }\n          _this2.imagesByArtwork[artworkUri].push(image);\n        }\n\n        if (image.collection) {\n          var collectionUri = encodeURI(image.collection);\n          if (!_this2.imagesByCollection[collectionUri]) {\n            _this2.imagesByCollection[collectionUri] = [];\n            _this2.collections.push({\n              uri: collectionUri,\n              name: image.collection\n            });\n          }\n          _this2.imagesByCollection[collectionUri].push(image);\n        }\n      });\n    },\n    filter: function filter() {\n      var _this3 = this;\n\n      if (this.filter) {\n        __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default.a(this.filter).forEach(function (key) {\n          var value = _this3.filter[key];\n\n          if (key === 'artwork_title') {\n            _this3.artworkFilter = value;\n          }\n\n          if (key === 'artist_name') {\n            _this3.artistFilter = value;\n          }\n\n          if (key === 'collection') {\n            _this3.collectionFilter = value;\n          }\n        });\n      }\n    }\n  },\n  methods: {\n    reset: function reset() {\n      this.data = [];\n      this.imagesByArtwork = {};\n      this.imagesByArtist = {};\n      this.imagesByCollection = {};\n      this.artworks = {};\n      this.artists = {};\n      this.collections = {};\n    },\n\n    sortBy: function sortBy(key) {\n      this.sortKey = key;\n      this.sortOrders[key] = this.sortOrders[key] * -1;\n    },\n    triggerLoad: function triggerLoad() {\n      __WEBPACK_IMPORTED_MODULE_2_vue__[\"a\" /* default */].nextTick(this.$Lazyload.lazyLoadHandler);\n    }\n  },\n  updated: function updated() {}\n});\n\n/***/ }),\n/* 119 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 120 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(6);\n\n\n\n\nvar icons = {};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'icon',\n  props: {\n    name: {\n      type: String,\n      validator: function validator(val) {\n        if (val) {\n          if (!(val in icons)) {\n            __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].util.warn('Invalid prop: prop \"icon\" is referring to an unregistered icon \"' + val + '\".' + '\\nPlesase make sure you have imported this icon before using it.', this);\n            return false;\n          }\n          return true;\n        }\n        return null;\n      }\n    },\n    scale: [Number, String],\n    spin: Boolean,\n    inverse: Boolean,\n    flip: {\n      validator: function validator(val) {\n        return val === 'horizontal' || val === 'vertical';\n      }\n    },\n    label: String\n  },\n  data: function data() {\n    return {\n      x: false,\n      y: false,\n      childrenWidth: 0,\n      childrenHeight: 0,\n      outerScale: 1\n    };\n  },\n\n  computed: {\n    normalizedScale: function normalizedScale() {\n      var scale = this.scale;\n      scale = typeof scale === 'undefined' ? 1 : Number(scale);\n      if (isNaN(scale) || scale <= 0) {\n        __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].util.warn('Invalid prop: prop \"scale\" should be a number over 0.', this);\n        return this.outerScale;\n      }\n      return scale * this.outerScale;\n    },\n    clazz: function clazz() {\n      return {\n        'fa-icon': true,\n        'fa-spin': this.spin,\n        'fa-flip-horizontal': this.flip === 'horizontal',\n        'fa-flip-vertical': this.flip === 'vertical',\n        'fa-inverse': this.inverse\n      };\n    },\n    icon: function icon() {\n      if (this.name) {\n        return icons[this.name];\n      }\n      return null;\n    },\n    box: function box() {\n      if (this.icon) {\n        return '0 0 ' + this.icon.width + ' ' + this.icon.height;\n      }\n      return '0 0 ' + this.width + ' ' + this.height;\n    },\n    ratio: function ratio() {\n      if (!this.icon) {\n        return 1;\n      }\n      var _icon = this.icon,\n          width = _icon.width,\n          height = _icon.height;\n\n      return Math.max(width, height) / 16;\n    },\n    width: function width() {\n      return this.childrenWidth || this.icon && this.icon.width / this.ratio * this.normalizedScale || 0;\n    },\n    height: function height() {\n      return this.childrenHeight || this.icon && this.icon.height / this.ratio * this.normalizedScale || 0;\n    },\n    style: function style() {\n      if (this.normalizedScale === 1) {\n        return false;\n      }\n      return {\n        fontSize: this.normalizedScale + 'em'\n      };\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    if (this.icon) {\n      return;\n    }\n    this.$children.forEach(function (child) {\n      child.outerScale = _this.normalizedScale;\n    });\n    var width = 0;\n    var height = 0;\n    this.$children.forEach(function (child) {\n      width = Math.max(width, child.width);\n      height = Math.max(height, child.height);\n    });\n    this.childrenWidth = width;\n    this.childrenHeight = height;\n    this.$children.forEach(function (child) {\n      child.x = (width - child.width) / 2;\n      child.y = (height - child.height) / 2;\n    });\n  },\n  register: function register(data) {\n    for (var name in data) {\n      var icon = data[name];\n\n      if (!icon.paths) {\n        icon.paths = [];\n      }\n      if (icon.d) {\n        icon.paths.push({ d: icon.d });\n      }\n\n      if (!icon.polygons) {\n        icon.polygons = [];\n      }\n      if (icon.points) {\n        icon.polygons.push({ points: icon.points });\n      }\n\n      icons[name] = icon;\n    }\n  },\n\n  icons: icons\n});\n\n/***/ }),\n/* 121 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('svg', {\n    class: _vm.clazz,\n    style: (_vm.style),\n    attrs: {\n      \"version\": \"1.1\",\n      \"role\": _vm.label ? 'img' : 'presentation',\n      \"aria-label\": _vm.label,\n      \"x\": _vm.x,\n      \"y\": _vm.y,\n      \"width\": _vm.width,\n      \"height\": _vm.height,\n      \"viewBox\": _vm.box\n    }\n  }, [_vm._t(\"default\", [(_vm.icon && _vm.icon.paths) ? _vm._l((_vm.icon.paths), function(path) {\n    return _c('path', _vm._b({}, 'path', path))\n  }) : _vm._e(), _vm._v(\" \"), (_vm.icon && _vm.icon.polygons) ? _vm._l((_vm.icon.polygons), function(polygon) {\n    return _c('polygon', _vm._b({}, 'polygon', polygon))\n  }) : _vm._e(), _vm._v(\"\\b\\n    \"), (_vm.icon && _vm.icon.raw) ? [_c('g', {\n    domProps: {\n      \"innerHTML\": _vm._s(_vm.icon.raw)\n    }\n  })] : _vm._e()])], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 122 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('nav', {\n    staticClass: \"nav section_nav\"\n  }, [_c('div', {\n    staticClass: \"nav-left\"\n  }, [_c('div', {\n    staticClass: \"nav-item first-nav-item\"\n  }, [_c('p', {\n    staticClass: \"control has-icons-right\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.filterKey),\n      expression: \"filterKey\"\n    }],\n    staticClass: \"input has-icons-right\",\n    attrs: {\n      \"name\": \"query\"\n    },\n    domProps: {\n      \"value\": (_vm.filterKey)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.filterKey = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon is-small is-right\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"search\",\n      \"title\": \"Search\"\n    }\n  })], 1)])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"nav-right\",\n    staticStyle: {\n      \"overflow\": \"visible\"\n    }\n  }, [_c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artworkFilter),\n      expression: \"!artworkFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.artworkFilter),\n      callback: function($$v) {\n        _vm.artworkFilter = $$v\n      },\n      expression: \"artworkFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artworkFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"picture-o\",\n      \"title\": \"Filter by Artwork\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Artworks\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.artworks), function(artwork) {\n    return _c('b-dropdown-option', {\n      key: artwork.uri,\n      attrs: {\n        \"value\": artwork.name,\n        \"selected\": _vm.artworkFilter === artwork.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(artwork.name)))])\n  })], 2), _vm._v(\" \"), (_vm.artworkFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artworkFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.artworkFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e(), _vm._v(\" \"), _c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artistFilter),\n      expression: \"!artistFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.artistFilter),\n      callback: function($$v) {\n        _vm.artistFilter = $$v\n      },\n      expression: \"artistFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artistFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"user\",\n      \"title\": \"Filter by Artist\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Artist\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.artists), function(artist) {\n    return _c('b-dropdown-option', {\n      key: artist.uri,\n      attrs: {\n        \"value\": artist.name,\n        \"selected\": _vm.artistFilter === artist.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(artist.name)))])\n  })], 2), _vm._v(\" \"), (_vm.artistFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artistFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.artistFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e(), _vm._v(\" \"), _c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.collectionFilter),\n      expression: \"!collectionFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.collectionFilter),\n      callback: function($$v) {\n        _vm.collectionFilter = $$v\n      },\n      expression: \"collectionFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.collectionFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"institution\",\n      \"title\": \"Filter by Collection\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Collection\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.collections), function(collection) {\n    return _c('b-dropdown-option', {\n      key: collection.uri,\n      attrs: {\n        \"value\": collection.name,\n        \"selected\": _vm.collectionFilter === collection.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(collection.name)))])\n  })], 2), _vm._v(\" \"), (_vm.collectionFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.collectionFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.collectionFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e()], 1)]), _vm._v(\" \"), _c('b-table', {\n    staticClass: \"artwork_table\",\n    attrs: {\n      \"data\": _vm.filteredData,\n      \"bordered\": true,\n      \"striped\": true,\n      \"mobile-cards\": true,\n      \"paginated\": true,\n      \"per-page\": 8,\n      \"pagination-simple\": true\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(tb) {\n        return [_c('b-table-column', {\n          attrs: {\n            \"field\": \"thumbnail\",\n            \"label\": \"\",\n            \"width\": \"40\",\n            \"height\": \"130\"\n          }\n        }, [_c('a', {\n          staticClass: \"img_link\",\n          on: {\n            \"click\": function($event) {\n              _vm.$emit('onImageClick', tb.row)\n            }\n          }\n        }, [_c('img', {\n          directives: [{\n            name: \"lazy\",\n            rawName: \"v-lazy\",\n            value: (tb.row['thumbnail']),\n            expression: \"tb.row['thumbnail']\"\n          }]\n        })])]), _vm._v(\" \"), _c('b-table-column', {\n          attrs: {\n            \"field\": \"artwork\",\n            \"label\": \"Artwork\",\n            \"sortable\": \"\"\n          }\n        }, [_vm._v(\"\\n            \" + _vm._s(tb.row['artwork_title']) + \"\\n            \")]), _vm._v(\" \"), _c('b-table-column', {\n          attrs: {\n            \"field\": \"artist\",\n            \"label\": \"Artist\",\n            \"sortable\": \"\"\n          }\n        }, [_vm._v(\"\\n            \" + _vm._s(tb.row['artist_name']) + \"\\n            \")]), _vm._v(\" \"), _c('b-table-column', {\n          staticClass: \"artwork_info\",\n          attrs: {\n            \"field\": \"collection\",\n            \"label\": \"Collection\",\n            \"sortable\": \"\"\n          }\n        }, [_vm._v(\"\\n            \" + _vm._s(tb.row['collection']) + \"\\n            \")]), _vm._v(\" \"), _c('b-table-column', {\n          staticClass: \"location\",\n          attrs: {\n            \"field\": \"page\",\n            \"label\": \"Location\",\n            \"sortable\": \"\",\n            \"width\": \"10\"\n          }\n        }, [(parseInt(tb.row.page)) ? _c('span', [_vm._v(\"pg. \" + _vm._s(tb.row.page))]) : _vm._e(), _vm._v(\" \"), (!parseInt(tb.row.page)) ? _c('span', [_vm._v(_vm._s(tb.row.page))]) : _vm._e()]), _vm._v(\" \"), _c('b-table-column', {\n          attrs: {\n            \"label\": \"View\",\n            \"sortable\": \"\",\n            \"width\": \"30\"\n          }\n        }, [(tb.row.artwork_uri) ? _c('a', {\n          staticClass: \"button is-small\",\n          attrs: {\n            \"href\": tb.row['artwork_uri'],\n            \"target\": \"_blank\"\n          }\n        }, [_c('span', [_vm._v(\"View in Collection\")]), _vm._v(\" \"), _c('b-icon', {\n          staticClass: \"is-small\",\n          attrs: {\n            \"icon\": \"open_in_new\"\n          }\n        })], 1) : _vm._e(), _vm._v(\" \"), _c('a', {\n          staticClass: \"button is-small view_in_book\",\n          on: {\n            \"click\": function($event) {\n              _vm.$emit('onPageClick', tb.row.page)\n            }\n          }\n        }, [_c('span', [_vm._v(\"View in Book\")]), _vm._v(\" \"), _c('b-icon', {\n          staticClass: \"is-small\",\n          attrs: {\n            \"icon\": \"keyboard_arrow_right\"\n          }\n        })], 1)])]\n      }\n    }])\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 123 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(124)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(125),\n  /* template */\n  __webpack_require__(126),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 124 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 125 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_lazyload__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_lazyload___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_vue_lazyload__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vue_awesome_icons_institution__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue_awesome_icons_user__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vue_awesome_icons_picture_o__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_vue_awesome_components_Icon__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_vue_awesome_components_Icon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_vue_awesome_components_Icon__);\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_2_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_lazyload___default.a);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'grid',\n  components: {\n    'icon': __WEBPACK_IMPORTED_MODULE_6_vue_awesome_components_Icon___default.a\n  },\n  props: {\n    'data': {\n      type: Array\n    },\n    'filter': {\n      type: Object,\n      default: undefined\n    }\n  },\n  data: function data() {\n    var sortOrders = {};\n    this.columns = ['thumbnail', 'page', 'artwork_title', 'artist', 'collection'];\n    this.columns.forEach(function (key) {\n      sortOrders[key] = 1;\n    });\n    return {\n      sortKey: '',\n      sortOrders: sortOrders,\n      filterKey: '',\n\n      gridColumns: 4,\n      imagesByArtwork: {},\n      imagesByArtist: {},\n      imagesByCollection: {},\n      artworks: [],\n      artists: [],\n      collections: [],\n      artistFilter: '',\n      artworkFilter: '',\n      collectionFilter: ''\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    window.addEventListener('resize', this.handleResize.bind(this), false);\n    this.$nextTick(function () {\n      return _this.handleResize();\n    });\n\n    if (this.filter) {\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default.a(this.filter).forEach(function (key) {\n        var value = _this.filter[key];\n\n        if (key === 'artwork_title') {\n          _this.artworkFilter = value;\n        }\n\n        if (key === 'artist_name') {\n          _this.artistFilter = value;\n        }\n\n        if (key === 'collection') {\n          _this.collectionFilter = value;\n        }\n      });\n    }\n  },\n  beforeDestory: function beforeDestory() {\n    window.removeEventListener('resize', this.handleResize);\n  },\n\n  filters: {\n    capitalize: function capitalize(str) {\n      return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    titlecase: function titlecase(_str) {\n      var str;\n      str = _str.replace(/_/g, ' ');\n      str = str.replace(/([^\\W_]+[^\\s-]*) */g, function (txt) {\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n      });\n\n      return str;\n    },\n    truncate: function truncate(text) {\n      var stop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 60;\n      var clamp = arguments[2];\n\n      return text.slice(0, stop) + (stop < text.length ? clamp || '...' : '');\n    }\n  },\n  computed: {\n    filteredData: function filteredData() {\n      var sortKey = this.sortKey;\n      var filterKey = this.filterKey && this.filterKey.toLowerCase();\n      var artworkFilter = this.artworkFilter && this.artworkFilter.toLowerCase();\n      var artistFilter = this.artistFilter && this.artistFilter.toLowerCase();\n      var collectionFilter = this.collectionFilter && this.collectionFilter.toLowerCase();\n      var order = this.sortOrders[sortKey] || 1;\n      var data = this.data;\n\n      if (artworkFilter && data) {\n        data = data.filter(function (row) {\n          if (row.artwork_title) {\n            return String(row.artwork_title).toLowerCase().indexOf(artworkFilter) > -1;\n          }\n        });\n      }\n\n      if (artistFilter && data) {\n        data = data.filter(function (row) {\n          if (row.artist_name) {\n            return String(row.artist_name).toLowerCase().indexOf(artistFilter) > -1;\n          }\n        });\n      }\n\n      if (collectionFilter && data) {\n        data = data.filter(function (row) {\n          if (row.collection) {\n            return String(row.collection).toLowerCase().indexOf(collectionFilter) > -1;\n          }\n        });\n      }\n\n      if (filterKey && data) {\n        data = data.filter(function (row) {\n          return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default.a(row).some(function (key) {\n            return String(row[key]).toLowerCase().indexOf(filterKey) > -1;\n          });\n        });\n      }\n      if (sortKey) {\n        data = data.slice().sort(function (a, b) {\n          a = a[sortKey];\n          b = b[sortKey];\n          return (a === b ? 0 : a > b ? 1 : -1) * order;\n        });\n      }\n      return data;\n    },\n    chunkedData: function chunkedData() {\n      var cols = this.gridColumns || 4;\n      var chunked = [];\n\n      for (var c = 0; c < cols; c++) {\n        chunked[c] = [];\n      }\n\n      for (var i = 0; i < this.filteredData.length; i++) {\n        chunked[i % cols].push(this.filteredData[i]);\n      }\n\n      return chunked;\n    }\n  },\n  watch: {\n    data: function data() {\n      var _this2 = this;\n\n      this.data.forEach(function (image) {\n        if (image.artist_name) {\n          var artistUri = encodeURI(image.artist_name);\n          if (!_this2.imagesByArtist[artistUri]) {\n            _this2.imagesByArtist[artistUri] = [];\n            _this2.artists.push({\n              uri: artistUri,\n              name: image.artist_name\n            });\n          }\n          _this2.imagesByArtist[artistUri].push(image);\n        }\n\n        if (image.artwork_title) {\n          var artworkUri = encodeURI(image.artwork_title);\n          if (!_this2.imagesByArtwork[artworkUri]) {\n            _this2.imagesByArtwork[artworkUri] = [];\n            _this2.artworks.push({\n              uri: artworkUri,\n              name: image.artwork_title\n            });\n          }\n          _this2.imagesByArtwork[artworkUri].push(image);\n        }\n\n        if (image.collection) {\n          var collectionUri = encodeURI(image.collection);\n          if (!_this2.imagesByCollection[collectionUri]) {\n            _this2.imagesByCollection[collectionUri] = [];\n            _this2.collections.push({\n              uri: collectionUri,\n              name: image.collection\n            });\n          }\n          _this2.imagesByCollection[collectionUri].push(image);\n        }\n      });\n    },\n    filter: function filter() {\n      var _this3 = this;\n\n      if (this.filter) {\n        __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default.a(this.filter).forEach(function (key) {\n          var value = _this3.filter[key];\n\n          if (key === 'artwork_title') {\n            _this3.artworkFilter = value;\n          }\n\n          if (key === 'artist_name') {\n            _this3.artistFilter = value;\n          }\n\n          if (key === 'collection') {\n            _this3.collectionFilter = value;\n          }\n        });\n      }\n    }\n  },\n  methods: {\n    sortBy: function sortBy(key) {\n      this.sortKey = key;\n      this.sortOrders[key] = this.sortOrders[key] * -1;\n    },\n    triggerLoad: function triggerLoad() {\n      __WEBPACK_IMPORTED_MODULE_2_vue__[\"a\" /* default */].nextTick(this.$Lazyload.lazyLoadHandler);\n    },\n    handleResize: function handleResize() {\n      var width = window.innerWidth;\n\n      this.gridColumns = Math.floor((width - 200) / 200);\n    }\n  }\n});\n\n/***/ }),\n/* 126 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('nav', {\n    staticClass: \"nav section_nav\"\n  }, [_c('div', {\n    staticClass: \"nav-center\",\n    staticStyle: {\n      \"overflow\": \"visible\"\n    }\n  }, [_c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artworkFilter),\n      expression: \"!artworkFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.artworkFilter),\n      callback: function($$v) {\n        _vm.artworkFilter = $$v\n      },\n      expression: \"artworkFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artworkFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"picture-o\",\n      \"title\": \"Filter by Artwork\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Artworks\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.artworks), function(artwork) {\n    return _c('b-dropdown-option', {\n      key: artwork.uri,\n      attrs: {\n        \"value\": artwork.name,\n        \"selected\": _vm.artworkFilter === artwork.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(artwork.name)))])\n  })], 2), _vm._v(\" \"), (_vm.artworkFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artworkFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.artworkFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e(), _vm._v(\" \"), _c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artistFilter),\n      expression: \"!artistFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.artistFilter),\n      callback: function($$v) {\n        _vm.artistFilter = $$v\n      },\n      expression: \"artistFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artistFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"user\",\n      \"title\": \"Filter by Artist\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Artist\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.artists), function(artist) {\n    return _c('b-dropdown-option', {\n      key: artist.uri,\n      attrs: {\n        \"value\": artist.name,\n        \"selected\": _vm.artistFilter === artist.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(artist.name)))])\n  })], 2), _vm._v(\" \"), (_vm.artistFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artistFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.artistFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e(), _vm._v(\" \"), _c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.collectionFilter),\n      expression: \"!collectionFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.collectionFilter),\n      callback: function($$v) {\n        _vm.collectionFilter = $$v\n      },\n      expression: \"collectionFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.collectionFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"institution\",\n      \"title\": \"Filter by Collection\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Collection\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.collections), function(collection) {\n    return _c('b-dropdown-option', {\n      key: collection.uri,\n      attrs: {\n        \"value\": collection.name,\n        \"selected\": _vm.collectionFilter === collection.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(collection.name)))])\n  })], 2), _vm._v(\" \"), (_vm.collectionFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.collectionFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.collectionFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e()], 1)]), _vm._v(\" \"), _c('div', {\n    ref: \"container\",\n    staticClass: \"container card_container\"\n  }, [_c('div', {\n    staticClass: \"columns card_columns\"\n  }, _vm._l((_vm.chunkedData), function(images) {\n    return _c('div', {\n      staticClass: \"column\"\n    }, _vm._l((images), function(image) {\n      return _c('div', {\n        staticClass: \"card card_wrapper\"\n      }, [_c('div', {\n        staticClass: \"card-image\"\n      }, [_c('figure', {\n        staticClass: \"image\"\n      }, [_c('a', {\n        staticClass: \"img_link\",\n        on: {\n          \"click\": function($event) {\n            _vm.$emit('onClick', image)\n          }\n        }\n      }, [_c('img', {\n        directives: [{\n          name: \"lazy\",\n          rawName: \"v-lazy\",\n          value: (image.downsampled || image.asset),\n          expression: \"image.downsampled || image.asset\"\n        }],\n        staticClass: \"downsampled\"\n      })])])])])\n    }))\n  }))])])\n},staticRenderFns: []}\n\n/***/ }),\n/* 127 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(128)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(129),\n  /* template */\n  __webpack_require__(139),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-7afe1999\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 128 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 129 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__ = __webpack_require__(130);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(133);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'outline',\n  components: {},\n  props: {\n    'data': {\n      type: Array\n    },\n    'page': {\n      type: Number,\n      default: undefined\n    },\n    'pdf': {\n      type: Object,\n      default: undefined\n    }\n  },\n  data: function data() {\n    return {\n      pageList: [],\n      activeItem: undefined\n    };\n  },\n  mounted: function mounted() {\n    if (this.data) {\n      this.processData();\n    }\n  },\n\n  methods: {\n    processData: function processData() {\n      var _this = this;\n\n      this.pageList = [];\n      this.data.forEach(function (item, i) {\n        var li = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default.a({}, item);\n        _this.pageList.push(li);\n        _this.pdf.getPageIndex(item.dest[0]).then(function (pg) {\n          li.page = pg;\n\n          if (i === _this.data.length - 1) {\n            _this.checkActive();\n          }\n        });\n      });\n    },\n    handleLink: function handleLink(item) {\n      this.$emit('onClick', item.dest);\n    },\n    checkActive: function checkActive() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default.a(this.pageList), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n\n          if (item.page > this.page) {\n            this.$emit('current', this.activeItem.title);\n            break;\n          } else {\n            this.activeItem = item;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  },\n  watch: {\n    data: function data() {\n      this.processData();\n    },\n    page: function page() {\n      this.checkActive();\n    }\n  }\n});\n\n/***/ }),\n/* 130 */,\n/* 131 */,\n/* 132 */,\n/* 133 */,\n/* 134 */,\n/* 135 */,\n/* 136 */,\n/* 137 */,\n/* 138 */,\n/* 139 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('ul', _vm._l((_vm.pageList), function(item) {\n    return _c('li', [_c('a', {\n      staticClass: \"outline_link\",\n      class: {\n        active: item === _vm.activeItem\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.handleLink(item)\n        }\n      }\n    }, [_vm._v(\"\\n      \" + _vm._s(item.title || '') + \"\\n      \"), (item.items.length) ? _c('outline', {\n      attrs: {\n        \"data\": item.items\n      },\n      on: {\n        \"onClick\": _vm.handleLink\n      }\n    }) : _vm._e()], 1)])\n  }))\n},staticRenderFns: []}\n\n/***/ }),\n/* 140 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(141)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(142),\n  /* template */\n  __webpack_require__(143),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 141 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 142 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_whatwg_fetch__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_whatwg_fetch___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_whatwg_fetch__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_awesome_icons_institution__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_awesome_icons_user__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vue_awesome_icons_picture_o__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue_awesome_components_Icon__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue_awesome_components_Icon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_vue_awesome_components_Icon__);\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'Detail',\n  components: {\n    'icon': __WEBPACK_IMPORTED_MODULE_4_vue_awesome_components_Icon___default.a\n  },\n  props: {\n    'image': {},\n    'manifest': {\n      type: Object\n    }\n  },\n  data: function data() {\n    return {\n      images: [],\n      imagesById: {},\n      imagesByArtwork: {},\n      imagesByArtist: {},\n      imagesByCollection: {},\n      currentDetail: undefined,\n      hoverArtwork: false,\n      hoverArtist: false,\n      hoverCollection: false\n    };\n  },\n  created: function created() {\n    if (this.manifest) {\n      this.loaded();\n    }\n    if (this.image) {\n      var imageRef = void 0;\n      if (typeof this.image === 'string') {\n        imageRef = this.image;\n      } else {\n        imageRef = this.imageRef(this.image);\n      }\n      this.currentDetail = this.imagesById[imageRef];\n    } else {\n      this.currentDetail = undefined;\n    }\n  },\n\n  watch: {\n    manifest: function manifest() {\n      this.loaded();\n    },\n    image: function image() {\n      var imageRef = void 0;\n      if (this.image) {\n        if (typeof this.image === 'string') {\n          imageRef = this.image;\n        } else {\n          imageRef = this.imageRef(this.image);\n        }\n        this.currentDetail = this.imagesById[imageRef];\n\n        if (!this.currentDetail) {\n          this.$emit('closed');\n        }\n      } else {\n        this.currentDetail = undefined;\n      }\n    },\n    currentDetail: function currentDetail() {\n      var imageRef = void 0;\n      if (this.currentDetail) {\n        imageRef = this.imageRef(this.currentDetail);\n        this.$emit('displayed', imageRef);\n      } else {\n        this.$emit('closed');\n      }\n    }\n  },\n  methods: {\n    imageRef: function imageRef(image) {\n      return 'img_p' + (image.page - 1) + '_' + image.location;\n    },\n    reset: function reset() {\n      this.images = [];\n      this.imagesById = {};\n      this.imagesByArtwork = {};\n      this.imagesByArtist = {};\n      this.imagesByCollection = {};\n    },\n    loaded: function loaded() {\n      var _this = this;\n\n      if (!this.manifest || !this.manifest.images) {\n        return;\n      }\n      this.images = this.manifest.images;\n\n      this.images.forEach(function (image) {\n        var ref = _this.imageRef(image);\n        _this.imagesById[ref] = image;\n\n        if (image.artwork_title) {\n          var artworkUri = encodeURI(image.artwork_title);\n          if (!_this.imagesByArtwork[artworkUri]) {\n            _this.imagesByArtwork[artworkUri] = [];\n          }\n          _this.imagesByArtwork[artworkUri].push(image);\n        }\n\n        if (image.artist_name) {\n          var artistUri = encodeURI(image.artist_name);\n          if (!_this.imagesByArtist[artistUri]) {\n            _this.imagesByArtist[artistUri] = [];\n          }\n          _this.imagesByArtist[artistUri].push(image);\n        }\n\n        if (image.collection) {\n          var collectionUri = encodeURI(image.collection);\n          if (!_this.imagesByCollection[collectionUri]) {\n            _this.imagesByCollection[collectionUri] = [];\n          }\n          _this.imagesByCollection[collectionUri].push(image);\n        }\n      });\n    },\n    onPageSelected: function onPageSelected(page) {\n      this.$emit('pageSelected', page);\n    },\n    nextDetail: function nextDetail() {\n      var index = this.images.indexOf(this.currentDetail);\n      if (index + 1 < this.images.length) {\n        this.currentDetail = this.images[index + 1];\n      }\n    },\n    prevDetail: function prevDetail() {\n      var index = this.images.indexOf(this.currentDetail);\n      if (index - 1 >= 0) {\n        this.currentDetail = this.images[index - 1];\n      }\n    },\n    onDetailClosed: function onDetailClosed() {\n      this.currentDetail = undefined;\n      this.$emit('closed');\n    },\n    artistLookup: function artistLookup(e) {\n      var _this2 = this;\n\n      var uri = this.currentDetail.artist_uri;\n      if (uri.indexOf('.json') === uri.length - 5) {\n        fetch(uri).then(function (response) {\n          return response.json();\n        }).then(function (artistJson) {\n          _this2.currentDetail.artist_json = artistJson;\n          console.log(artistJson);\n        }).catch(function (err) {\n          return console.error(err);\n        });\n\n        e.preventDefault();\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 143 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.currentDetail) ? _c('div', {\n    staticClass: \"card detail_card\"\n  }, [_c('div', {\n    staticClass: \"card-image\"\n  }, [_c('figure', {\n    staticClass: \"image_detail\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.currentDetail.artwork_uri\n    }\n  }, [(!_vm.currentDetail.copyright) ? _c('img', {\n    attrs: {\n      \"src\": _vm.currentDetail.asset\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.currentDetail.copyright) ? _c('img', {\n    attrs: {\n      \"src\": _vm.currentDetail.downsampled\n    }\n  }) : _vm._e()])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"card-content\"\n  }, [_c('div', {\n    staticClass: \"content\"\n  }, [_c('h1', {\n    staticClass: \"title\",\n    class: {\n      'hover': _vm.hoverArtist\n    }\n  }, [_vm._v(\"\\n        \" + _vm._s(_vm.currentDetail.artwork_title) + \"\\n        \")]), _vm._v(\" \"), _c('h2', {\n    staticClass: \"subtitle\",\n    class: {\n      'hover': _vm.hoverArtwork\n    }\n  }, [_vm._v(\"\\n        \" + _vm._s(_vm.currentDetail.artist_name) + \"\\n        \")]), _vm._v(\" \"), (_vm.currentDetail.collection) ? _c('p', {\n    class: {\n      'hover': _vm.hoverCollection\n    }\n  }, [_vm._v(\"\\n        \" + _vm._s(_vm.currentDetail.collection) + \"\\n        \")]) : _vm._e(), _vm._v(\" \"), _c('p', {\n    staticClass: \"moreby\"\n  }, [_c('span', [_vm._v(\"Images in the book: \")]), _vm._v(\" \"), _c('a', {\n    on: {\n      \"click\": function($event) {\n        _vm.$emit('infoSelected', {\n          'artist_name': _vm.currentDetail.artist_name\n        })\n      }\n    }\n  }, [_c('span', [_vm._v(\"\\n            \" + _vm._s(_vm.imagesByArtwork[encodeURI(_vm.currentDetail.artwork_title)] && _vm.imagesByArtwork[encodeURI(_vm.currentDetail.artwork_title)].length) + \" of this artwork\\n          \")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"picture-o\",\n      \"title\": \"Filter by Artist\"\n    }\n  })], 1)]), _vm._v(\" \"), _c('span', {\n    staticClass: \"spacer\"\n  }, [_vm._v(\"/\")]), _vm._v(\" \"), _c('a', {\n    on: {\n      \"click\": function($event) {\n        _vm.$emit('infoSelected', {\n          'artist_name': _vm.currentDetail.artist_name\n        })\n      }\n    }\n  }, [_c('span', [_vm._v(\"\\n            \" + _vm._s(_vm.imagesByArtist[encodeURI(_vm.currentDetail.artist_name)] && _vm.imagesByArtist[encodeURI(_vm.currentDetail.artist_name)].length) + \" by this artist\\n          \")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"user\",\n      \"title\": \"Filter by Artist\"\n    }\n  })], 1)]), _vm._v(\" \"), _c('span', {\n    staticClass: \"spacer\"\n  }, [_vm._v(\"/\")]), _vm._v(\" \"), _c('a', {\n    on: {\n      \"click\": function($event) {\n        _vm.$emit('infoSelected', {\n          'artist_name': _vm.currentDetail.artist_name\n        })\n      }\n    }\n  }, [_c('span', [_vm._v(\"\\n            \" + _vm._s(_vm.imagesByCollection[encodeURI(_vm.currentDetail.collection)] && _vm.imagesByCollection[encodeURI(_vm.currentDetail.collection)].length) + \" from this collection\\n          \")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"institution\",\n      \"title\": \"Filter by Artist\"\n    }\n  })], 1)])])])]), _vm._v(\" \"), _c('footer', {\n    staticClass: \"card-footer\"\n  }, [(_vm.currentDetail.artwork_uri) ? _c('p', {\n    staticClass: \"card-footer-item\"\n  }, [_c('span', [_vm._v(\"\\n      View in \"), _c('a', {\n    attrs: {\n      \"href\": _vm.currentDetail.artwork_uri,\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Collection\")])])]) : _vm._e(), _vm._v(\" \"), _c('p', {\n    staticClass: \"card-footer-item\"\n  }, [_c('span', [_vm._v(\"\\n      View in \"), _c('a', {\n    on: {\n      \"click\": function($event) {\n        _vm.onPageSelected(_vm.currentDetail.page)\n      }\n    }\n  }, [_vm._v(\"Book\")])])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"detail_arrow\",\n    attrs: {\n      \"id\": \"prevDetail\"\n    },\n    on: {\n      \"click\": this.prevDetail\n    }\n  }, [_vm._v(\"‹\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"detail_arrow\",\n    attrs: {\n      \"id\": \"nextDetail\"\n    },\n    on: {\n      \"click\": this.nextDetail\n    }\n  }, [_vm._v(\"›\")])]) : _vm._e()\n},staticRenderFns: []}\n\n/***/ }),\n/* 144 */,\n/* 145 */,\n/* 146 */,\n/* 147 */,\n/* 148 */,\n/* 149 */,\n/* 150 */,\n/* 151 */,\n/* 152 */,\n/* 153 */,\n/* 154 */,\n/* 155 */,\n/* 156 */,\n/* 157 */,\n/* 158 */,\n/* 159 */,\n/* 160 */,\n/* 161 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 162 */,\n/* 163 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('link', {\n    attrs: {\n      \"rel\": \"stylesheet\",\n      \"href\": \"//fonts.googleapis.com/icon?family=Material+Icons\"\n    }\n  }), _vm._v(\" \"), _c('nav', {\n    staticClass: \"nav fixed\",\n    class: {\n      'open': _vm.navOpen || _vm.outlineOpen || _vm.artworkOpen\n    }\n  }, [_c('div', {\n    staticClass: \"nav-left\"\n  }, [_c('a', {\n    staticClass: \"nav-item\",\n    on: {\n      \"click\": function($event) {\n        _vm.outlineOpen = !_vm.outlineOpen;\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon\"\n  }, [(!_vm.outlineOpen) ? _c('icon', {\n    attrs: {\n      \"name\": \"bars\",\n      \"title\": \"Open Navigation\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.outlineOpen) ? _c('icon', {\n    attrs: {\n      \"name\": \"close\",\n      \"title\": \"Close Navigation\"\n    }\n  }) : _vm._e()], 1)]), _vm._v(\" \"), _c('a', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artworkOpen && !_vm.showSearch),\n      expression: \"!artworkOpen && !showSearch\"\n    }],\n    staticClass: \"nav-item\"\n  }, [_c('span', {\n    staticClass: \"icon\",\n    on: {\n      \"click\": function($event) {\n        _vm.showSearch = !_vm.showSearch\n      }\n    }\n  }, [(!_vm.showSearch) ? _c('icon', {\n    attrs: {\n      \"name\": \"search\",\n      \"title\": \"search\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.showSearch) ? _c('icon', {\n    attrs: {\n      \"name\": \"close\",\n      \"title\": \"search\"\n    }\n  }) : _vm._e()], 1)]), _vm._v(\" \"), (_vm.showSearch && !_vm.artworkOpen) ? _c('div', {\n    staticClass: \"nav-item\"\n  }, [_c('div', {\n    staticClass: \"field has-addons\"\n  }, [_c('p', {\n    staticClass: \"control has-icons-right\",\n    attrs: {\n      \"id\": \"matchCount\"\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.query),\n      expression: \"query\"\n    }],\n    staticClass: \"input has-icons-right\",\n    attrs: {\n      \"name\": \"query\",\n      \"results\": \"5\",\n      \"placeholder\": \"Search\"\n    },\n    domProps: {\n      \"value\": (_vm.query)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.query = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), (_vm.matchCount) ? _c('span', {\n    staticClass: \"icon is-small is-right\"\n  }, [_vm._v(_vm._s(_vm.currentMatchIndex) + \" of \" + _vm._s(_vm.matchCount))]) : _vm._e()]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": _vm.prevMatch\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"chevron-left\",\n      \"title\": \"Prev Match\"\n    }\n  })], 1)])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": _vm.nextMatch\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"chevron-right\",\n      \"title\": \"Next Match\"\n    }\n  })], 1)])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.showSearch = false;\n        _vm.query = ''\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"close\",\n      \"title\": \"Close Search\"\n    }\n  })], 1)])])])]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"nav-center\"\n  }, [(!_vm.artworkOpen) ? _c('div', {\n    staticClass: \"nav-item\"\n  }, [(!_vm.current) ? _c('span', [_vm._v(_vm._s(_vm.title))]) : _vm._e(), _vm._v(\" \"), (_vm.current) ? _c('span', [_vm._v(\"\\n           \" + _vm._s(_vm.shortTitle)), _c('icon', {\n    staticClass: \"navbar-breadcrumb\",\n    attrs: {\n      \"name\": \"caret-right\"\n    }\n  }), _vm._v(_vm._s(_vm.current) + \"\\n        \")], 1) : _vm._e()]) : _vm._e(), _vm._v(\" \"), (_vm.artworkOpen) ? _c('div', {\n    staticClass: \"nav-item\"\n  }, [_vm._v(\"\\n        \" + _vm._s(_vm.shortTitle)), _c('icon', {\n    staticClass: \"navbar-breadcrumb\",\n    attrs: {\n      \"name\": \"caret-right\"\n    }\n  }), _vm._v(\"Artworks\\n      \")], 1) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"nav-right\"\n  }, [_c('a', {\n    staticClass: \"nav-item\",\n    on: {\n      \"click\": function($event) {\n        _vm.artworkOpen = !_vm.artworkOpen;\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon\"\n  }, [(!_vm.artworkOpen) ? _c('icon', {\n    attrs: {\n      \"name\": \"picture-o\",\n      \"title\": \"Artwork\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.artworkOpen) ? _c('icon', {\n    attrs: {\n      \"name\": \"book\",\n      \"title\": \"Book\"\n    }\n  }) : _vm._e()], 1)])])]), _vm._v(\" \"), _c('section', {\n    ref: \"main\",\n    staticClass: \"main\"\n  }, [_c('PDF', {\n    ref: \"pdf\",\n    attrs: {\n      \"id\": \"pdf\",\n      \"src\": this.manifest.pdf,\n      \"page\": _vm.page,\n      \"width\": this.width,\n      \"height\": this.height,\n      \"spreads\": _vm.spreads,\n      \"onImageClicked\": this.onImageClicked,\n      \"onOutlineReady\": this.onOutlineReady,\n      \"query\": _vm.query,\n      \"zoom\": _vm.zoomLevel\n    },\n    on: {\n      \"loaded\": _vm.loaded,\n      \"pageChanged\": this.onPageChanged,\n      \"found\": this.onFound,\n      \"match\": this.onMatch\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"arrow\",\n    attrs: {\n      \"id\": \"prev\"\n    },\n    on: {\n      \"click\": this.prev\n    }\n  }, [_c('span', {\n    staticClass: \"icon\"\n  }, [_c('icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.outlineOpen),\n      expression: \"!outlineOpen\"\n    }],\n    attrs: {\n      \"name\": \"chevron-left\",\n      \"title\": \"Prev\"\n    }\n  })], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"arrow\",\n    attrs: {\n      \"id\": \"next\"\n    },\n    on: {\n      \"click\": this.next\n    }\n  }, [_c('span', {\n    staticClass: \"icon\"\n  }, [_c('icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.outlineOpen),\n      expression: \"!outlineOpen\"\n    }],\n    attrs: {\n      \"name\": \"chevron-right\",\n      \"title\": \"Next\"\n    }\n  })], 1)]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artworkOpen),\n      expression: \"!artworkOpen\"\n    }],\n    staticClass: \"floater\",\n    class: {\n      'open': _vm.navOpen\n    }\n  }, [_c('div', {\n    staticClass: \"field has-addons is-pulled-left\"\n  }, [_c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": _vm.zoomOut\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"search-minus\",\n      \"title\": \"Zoom Out\"\n    }\n  })], 1)])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control zoom_input\"\n  }, [_c('input', {\n    staticClass: \"input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": Math.round(_vm.zoomLevel * 100) + '%'\n    }\n  })]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": _vm.zoomIn\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"search-plus\",\n      \"title\": \"Zoom In\"\n    }\n  })], 1)])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"field has-addons is-pulled-left\"\n  }, [_c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    attrs: {\n      \"disabled\": _vm.spreads ? null : 'disabled'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.setSpreads(false)\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"file-o\",\n      \"title\": \"Single\"\n    }\n  })], 1)])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    attrs: {\n      \"disabled\": _vm.spreads ? 'disabled' : null\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.setSpreads(true)\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"columns\",\n      \"title\": \"Spread\"\n    }\n  })], 1)])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"field has-addons is-pulled-left\"\n  }, [_c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": this.prev\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"chevron-left\",\n      \"title\": \"Prev\"\n    }\n  })], 1)])]), _vm._v(\" \"), _c('p', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.editingPage),\n      expression: \"!editingPage\"\n    }],\n    staticClass: \"control page_input\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.startPageEditing()\n      }\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.displayedPages) + \" / \" + _vm._s(_vm.totalPages) + \"\\n          \")])]), _vm._v(\" \"), _c('p', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.editingPage),\n      expression: \"editingPage\"\n    }],\n    staticClass: \"control page_input\"\n  }, [_c('input', {\n    ref: \"pageEditor\",\n    staticClass: \"input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"keyup\": [function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        (function (v) { return _vm.onPageEdited(v); })($event)\n      }, function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"escape\")) { return null; }\n        _vm.editingPage = false\n      }]\n    }\n  })]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": this.next\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"chevron-right\",\n      \"title\": \"Next\"\n    }\n  })], 1)])])])])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal-background navigation_background\",\n    class: {\n      active: _vm.outlineOpen\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.outlineOpen = false;\n      }\n    }\n  }), _vm._v(\" \"), _c('section', {\n    staticClass: \"navigation\",\n    class: {\n      closed: !_vm.outlineOpen\n    }\n  }, [_c('nav', {\n    staticClass: \"nav\"\n  }, [_c('div', {\n    staticClass: \"nav-left nav_closer\"\n  }, [_c('a', {\n    staticClass: \"nav-item\",\n    on: {\n      \"click\": function($event) {\n        _vm.outlineOpen = !_vm.outlineOpen\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon\"\n  }, [(_vm.outlineOpen) ? _c('icon', {\n    attrs: {\n      \"name\": \"close\",\n      \"title\": \"Close Navigation\"\n    }\n  }) : _vm._e()], 1)])]), _vm._v(\" \"), _vm._m(0)]), _vm._v(\" \"), _c('div', [_c('article', {\n    staticClass: \"media\"\n  }, [_c('figure', {\n    staticClass: \"media-left\"\n  }, [_c('p', {\n    staticClass: \"image is-64x64\"\n  }, [_c('img', {\n    staticClass: \"cover_image\",\n    attrs: {\n      \"src\": _vm.manifest.cover_image_url\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"media-content\"\n  }, [_c('div', {\n    staticClass: \"content\"\n  }, [_c('p', [_c('strong', {\n    staticClass: \"media_title\"\n  }, [_vm._v(_vm._s(_vm.manifest.title))]), _vm._v(\" \"), _c('small', {\n    staticClass: \"media_subtitle\"\n  }, [_vm._v(_vm._s(_vm.manifest.subtitle))]), _vm._v(\" \"), _c('small', {\n    staticClass: \"media_author\"\n  }, [_vm._v(_vm._s(_vm.manifest.author_as_it_appears))])])])])]), _vm._v(\" \"), _c('outline', {\n    attrs: {\n      \"data\": _vm.outline,\n      \"pdf\": _vm.$refs.pdf,\n      \"page\": _vm.displayedPage\n    },\n    on: {\n      \"onClick\": this.goto,\n      \"current\": this.onCurrentTitle\n    }\n  })], 1)]), _vm._v(\" \"), _c('section', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.artworkOpen),\n      expression: \"artworkOpen\"\n    }],\n    staticClass: \"artwork\"\n  }, [_c('div', {\n    staticClass: \"container\"\n  }, [_c('b-tabs', {\n    attrs: {\n      \"position\": \"is-centered\"\n    },\n    on: {\n      \"change\": _vm.onTabChanged\n    },\n    model: {\n      value: (_vm.activeTab),\n      callback: function($$v) {\n        _vm.activeTab = $$v\n      },\n      expression: \"activeTab\"\n    }\n  }, [_c('b-tab-item', {\n    attrs: {\n      \"label\": \"Grid\"\n    }\n  }, [_c('grid', {\n    ref: \"grid\",\n    attrs: {\n      \"id\": \"grid\",\n      \"data\": _vm.images,\n      \"filter\": _vm.tableFilter\n    },\n    on: {\n      \"onClick\": this.onImageSelected\n    }\n  })], 1), _vm._v(\" \"), _c('b-tab-item', {\n    attrs: {\n      \"label\": \"Table\"\n    }\n  }, [_c('tablegrid', {\n    ref: \"table\",\n    attrs: {\n      \"id\": \"table\",\n      \"data\": _vm.images\n    },\n    on: {\n      \"onImageClick\": this.onImageSelected,\n      \"onPageClick\": this.onPageSelected\n    }\n  })], 1)], 1)], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal\",\n    class: {\n      'is-active': _vm.isModalActive\n    }\n  }, [_c('div', {\n    staticClass: \"modal-background\",\n    on: {\n      \"click\": function($event) {\n        _vm.isModalActive = false\n      }\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal-content\"\n  }, [_c('detail', {\n    attrs: {\n      \"image\": _vm.currentDetail,\n      \"manifest\": _vm.manifest\n    },\n    on: {\n      \"infoSelected\": this.onInfoSelected,\n      \"pageSelected\": this.onPageSelected,\n      \"closed\": this.onDetailClosed,\n      \"displayed\": this.onDetailDisplayed\n    }\n  })], 1), _vm._v(\" \"), _c('button', {\n    staticClass: \"modal-close\",\n    on: {\n      \"click\": function($event) {\n        _vm.isModalActive = false\n      }\n    }\n  })])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"nav-right\"\n  }, [_c('div', {\n    staticClass: \"nav-item\"\n  })])\n}]}\n\n/***/ }),\n/* 164 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('Reader', {\n    attrs: {\n      \"manifest-url\": _vm.url,\n      \"page-url\": _vm.page,\n      \"image-url\": _vm.image,\n      \"show-grid\": _vm.tab === 'grid',\n      \"show-table\": _vm.tab === 'table'\n    }\n  })\n},staticRenderFns: []}\n\n/***/ })\n],[49]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.321285d68d129a8b506e.js","function injectStyle (ssrContext) {\n  require(\"!!../../extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6888a9df\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../vue-loader/lib/selector?type=styles&index=0!./Icon.vue\")\n}\nvar Component = require(\"!../../vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../vue-loader/lib/selector?type=script&index=0!./Icon.vue\"),\n  /* template */\n  require(\"!!../../vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6888a9df\\\"}!../../vue-loader/lib/selector?type=template&index=0!./Icon.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-awesome/components/Icon.vue\n// module id = 0\n// module chunks = 2","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-626c8dc1\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-626c8dc1\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 51\n// module chunks = 2","<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\nbody {\n  margin: 0;\n  padding: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?06535e7f","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-626c8dc1\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 55\n// module chunks = 2","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Main from '@/components/Main'\n\nVue.use(Router)\n\nexport default new Router({\n  // mode: 'history',\n  routes: [\n    {\n      path: '/',\n      redirect: '/books/711/editions/884',\n      name: 'Main',\n    },\n    {\n      path: '/books/:book/editions/:edition',\n      name: 'Manifest',\n      component: Main,\n      props: true\n    },\n    {\n      path: '/books/:book/editions/:edition/pages/:page',\n      name: 'PageLink',\n      component: Main,\n      props: true\n    },\n    {\n      path: '/books/:book/editions/:edition/images/:image',\n      name: 'ImageLink',\n      component: Main,\n      props: true\n    },\n    {\n      path: '/books/:book/editions/:edition/artworks/:tab',\n      name: 'ArtworkLink',\n      component: Main,\n      props: true\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Main.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b9bd71c\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Main.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Main.vue\n// module id = 58\n// module chunks = 2","<template>\n  <Reader :manifest-url=\"url\" :page-url=\"page\" :image-url=\"image\" :show-grid=\"tab === 'grid'\" :show-table=\"tab === 'table'\"/>\n</template>\n\n<script>\nimport Reader from '@/components/Reader'\n\nexport default {\n  name: 'main',\n  components: {\n    'Reader': Reader\n  },\n  props: {\n    'origin': {\n      default: 'https://s3.amazonaws.com/pubs-fchasen/books',\n      type: String\n    },\n    'book': {\n      default: '',\n      type: String\n    },\n    'edition': {\n      default: '',\n      type: String\n    },\n    'page': {\n      default: undefined\n    },\n    'image': {\n      default: undefined,\n      type: String\n    },\n    'tab': {\n      default: undefined\n    }\n  },\n  data () {\n    return {\n      url: `${this.origin}/${this.book}/editions/${this.edition}/manifest.json`\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Main.vue?745b7da6","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59fa2e3c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Reader.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59fa2e3c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./Reader.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Reader.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59fa2e3c\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Reader.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Reader.vue\n// module id = 60\n// module chunks = 2"," <template>\n  <div>\n    <link rel=\"stylesheet\" href=\"//fonts.googleapis.com/icon?family=Material+Icons\">\n\n    <nav class=\"nav fixed\" :class=\"{'open': navOpen || outlineOpen || artworkOpen}\">\n      <div class=\"nav-left\">\n\n        <!-- <a class=\"nav-item\" href=\"http://www.getty.edu/\" target=\"_blank\" title=\"The Getty\">\n          <img src=\"../assets/getty_logo.png\" alt=\"Getty Logo\" class=\"logo\">\n        </a> -->\n\n        <a class=\"nav-item\" @click=\"outlineOpen = !outlineOpen;\">\n          <span class=\"icon\">\n            <icon v-if=\"!outlineOpen\" name=\"bars\" title=\"Open Navigation\"></icon>\n            <icon v-if=\"outlineOpen\" name=\"close\" title=\"Close Navigation\"></icon>\n          </span>\n        </a>\n\n        <a class=\"nav-item\" v-show=\"!artworkOpen && !showSearch\">\n          <span class=\"icon\" @click=\"showSearch = !showSearch\">\n            <icon v-if=\"!showSearch\" name=\"search\" title=\"search\"></icon>\n            <icon v-if=\"showSearch\" name=\"close\" title=\"search\"></icon>\n          </span>\n        </a>\n\n        <div class=\"nav-item\" v-if=\"showSearch && !artworkOpen\">\n          <div class=\"field has-addons\">\n            <p class=\"control has-icons-right\" id=\"matchCount\">\n              <input class=\"input has-icons-right\" name=\"query\" v-model=\"query\" results=\"5\" placeholder=\"Search\">\n              <span class=\"icon is-small is-right\" v-if=\"matchCount\">{{currentMatchIndex}} of {{matchCount}}</span>\n              <!-- <span class=\"icon is-small is-right\" v-if=\"!query\">\n                <icon name=\"search\" title=\"Search\"></icon>\n              </span> -->\n            </p>\n\n            <p class=\"control\">\n              <a class=\"button\" @click=\"prevMatch\">\n                <span class=\"icon is-small\">\n                  <icon name=\"chevron-left\" title=\"Prev Match\"></icon>\n                </span>\n              </a>\n            </p>\n\n            <p class=\"control\">\n              <a class=\"button\" @click=\"nextMatch\">\n                <span class=\"icon is-small\">\n                  <icon name=\"chevron-right\" title=\"Next Match\"></icon>\n                </span>\n              </a>\n            </p>\n\n            <p class=\"control\">\n              <a class=\"button\" @click=\"showSearch = false; query = ''\">\n                <span class=\"icon is-small\">\n                  <icon name=\"close\" title=\"Close Search\"></icon>\n                </span>\n              </a>\n            </p>\n          </div>\n\n\n        </div>\n\n\n\n      </div>\n\n      <div class=\"nav-center\">\n\n        <div class=\"nav-item\" v-if=\"!artworkOpen\">\n          <!-- <div id=\"prev\" class=\"nav-item arrow\" @click=\"this.prev\">\n            <span class=\"icon is-small\">\n              <icon name=\"chevron-left\" title=\"Prev\" v-show=\"!outlineOpen\"></icon>\n            </span>\n          </div> -->\n          <span v-if=\"!current\">{{ title }}</span>\n          <span v-if=\"current\">\n             {{ shortTitle }}<icon class=\"navbar-breadcrumb\" name=\"caret-right\"></icon>{{ current }}\n          </span>\n          <!-- <div id=\"next\" class=\"nav-item arrow\" @click=\"this.next\">\n            <span class=\"icon is-small\">\n              <icon name=\"chevron-right\" title=\"Next\" v-show=\"!outlineOpen\"></icon>\n            </span>\n          </div> -->\n        </div>\n\n        <div class=\"nav-item\" v-if=\"artworkOpen\">\n          {{ shortTitle }}<icon class=\"navbar-breadcrumb\" name=\"caret-right\"></icon>Artworks\n        </div>\n\n      </div>\n\n      <div class=\"nav-right\">\n        <a class=\"nav-item\" @click=\"artworkOpen = !artworkOpen;\">\n          <span class=\"icon\">\n            <icon v-if=\"!artworkOpen\" name=\"picture-o\" title=\"Artwork\"></icon>\n            <icon v-if=\"artworkOpen\" name=\"book\" title=\"Book\"></icon>\n          </span>\n        </a>\n      </div>\n\n    </nav>\n\n    <section class=\"main\" ref=\"main\">\n      <PDF id=\"pdf\" ref=\"pdf\"\n          :src=\"this.manifest.pdf\"\n          :page=\"page\"\n          @loaded=\"loaded\"\n          :width=\"this.width\"\n          :height=\"this.height\"\n          :spreads=\"spreads\"\n          :onImageClicked=\"this.onImageClicked\"\n          :onOutlineReady=\"this.onOutlineReady\"\n          @pageChanged=\"this.onPageChanged\"\n          @found=\"this.onFound\"\n          @match=\"this.onMatch\"\n          :query=\"query\"\n          :zoom=\"zoomLevel\"\n        />\n\n      <div id=\"prev\" class=\"arrow\" @click=\"this.prev\">\n        <span class=\"icon\">\n          <icon name=\"chevron-left\" title=\"Prev\" v-show=\"!outlineOpen\"></icon>\n        </span>\n      </div>\n      <div id=\"next\" class=\"arrow\" @click=\"this.next\">\n        <span class=\"icon\">\n          <icon name=\"chevron-right\" title=\"Next\" v-show=\"!outlineOpen\"></icon>\n        </span>\n      </div>\n      <div class=\"floater\" :class=\"{'open': navOpen}\" v-show=\"!artworkOpen\">\n        <div class=\"field has-addons is-pulled-left\">\n          <p class=\"control\">\n            <a class=\"button\" @click=\"zoomOut\">\n              <span class=\"icon is-small\">\n                <icon name=\"search-minus\" title=\"Zoom Out\"></icon>\n              </span>\n            </a>\n          </p>\n          <p class=\"control zoom_input\">\n            <input class=\"input\" type=\"text\" :value=\"Math.round(zoomLevel * 100)+'%'\">\n          </p>\n          <p class=\"control\">\n            <a class=\"button\" @click=\"zoomIn\">\n              <span class=\"icon is-small\">\n                <icon name=\"search-plus\" title=\"Zoom In\"></icon>\n              </span>\n            </a>\n          </p>\n        </div>\n        <div class=\"field has-addons is-pulled-left\">\n          <p class=\"control\">\n            <a class=\"button\" :disabled=\"spreads ? null : 'disabled'\" @click=\"setSpreads(false)\">\n              <span class=\"icon is-small\">\n                <icon name=\"file-o\" title=\"Single\"></icon>\n              </span>\n            </a>\n          </p>\n          <p class=\"control\">\n            <a class=\"button\" :disabled=\"spreads ? 'disabled' : null\" @click=\"setSpreads(true)\">\n              <span class=\"icon is-small\">\n                <icon name=\"columns\" title=\"Spread\"></icon>\n              </span>\n            </a>\n          </p>\n        </div>\n        <div class=\"field has-addons is-pulled-left\">\n          <p class=\"control\">\n            <a class=\"button\" @click=\"this.prev\">\n              <span class=\"icon is-small\">\n                <icon name=\"chevron-left\" title=\"Prev\"></icon>\n              </span>\n            </a>\n          </p>\n\n          <p class=\"control page_input\" v-show=\"!editingPage\">\n            <a class=\"button\" @click=\"startPageEditing()\">\n              {{ displayedPages }} / {{ totalPages }}\n            </a>\n          </p>\n          <p class=\"control page_input\" v-show=\"editingPage\">\n            <input class=\"input\" type=\"text\" @keyup.enter=\"(v) => onPageEdited(v)\" @keyup.escape=\"editingPage = false\" ref=\"pageEditor\">\n          </p>\n          <p class=\"control\">\n            <a class=\"button\" @click=\"this.next\">\n              <span class=\"icon is-small\">\n                <icon name=\"chevron-right\" title=\"Next\"></icon>\n              </span>\n            </a>\n          </p>\n\n        </div>\n        <!-- <div class=\"field has-addons is-pulled-left\" v-show=\"matchCount\">\n          <p class=\"control\">\n            <a class=\"button\" @click=\"prevMatch\" v-if=\"matchCount\">\n              <span class=\"icon is-small\">\n                <icon name=\"chevron-left\" title=\"Prev Match\"></icon>\n              </span>\n            </a>\n          </p>\n          <p class=\"control\" v-if=\"matchCount\">\n            <a class=\"button\" v-if=\"matchCount\">\n              {{currentMatchIndex}} of {{matchCount}}\n            </a>\n          </p>\n          <p class=\"control\" v-if=\"matchCount\">\n            <a class=\"button\" @click=\"nextMatch\" v-if=\"matchCount\">\n              <span class=\"icon is-small\">\n                <icon name=\"chevron-right\" title=\"Next Match\"></icon>\n              </span>\n            </a>\n          </p>\n        </div>  -->\n      </div>\n    </section>\n\n    <div class=\"modal-background navigation_background\" :class=\"{active: outlineOpen}\" @click=\"outlineOpen = false;\"></div>\n\n    <section class=\"navigation\" :class=\"{closed: !outlineOpen}\">\n      <nav class=\"nav\">\n        <div class=\"nav-left nav_closer\">\n          <a class=\"nav-item\" @click=\"outlineOpen = !outlineOpen\">\n            <span class=\"icon\">\n              <icon v-if=\"outlineOpen\" name=\"close\" title=\"Close Navigation\"></icon>\n            </span>\n          </a>\n        </div>\n        <div class=\"nav-right\">\n          <div class=\"nav-item\">\n            <!-- <a id=\"prevMatch\" @click=\"prevMatch\" v-if=\"matchCount\">\n              <span class=\"icon is-small\">\n                <icon name=\"chevron-left\" title=\"Prev Match\"></icon>\n              </span>\n            </a>\n            <p class=\"control\" v-if=\"matchCount\">\n              <span class=\"found\" v-if=\"matchCount\">{{currentMatchIndex}} of {{matchCount}}</span>\n            </p>\n            <a id=\"nextMatch\" @click=\"nextMatch\" v-if=\"matchCount\">\n              <span class=\"icon is-small\">\n                <icon name=\"chevron-right\" title=\"Next Match\"></icon>\n              </span>\n            </a> -->\n\n            <!-- <p class=\"control has-icons-right\">\n              <input class=\"input has-icons-right\" name=\"query\" v-model=\"query\" results=\"5\" placeholder=\"search\" @keyup.enter=\"outlineOpen = false\">\n              <span class=\"icon is-small is-right\">\n                <icon name=\"search\" title=\"Search\"></icon>\n              </span>\n            </p> -->\n          </div>\n\n        </div>\n      </nav>\n\n\n      <div>\n        <article class=\"media\">\n          <figure class=\"media-left\">\n            <p class=\"image is-64x64\">\n              <img class=\"cover_image\" :src=\"manifest.cover_image_url\">\n            </p>\n          </figure>\n          <div class=\"media-content\">\n            <div class=\"content\">\n              <p>\n                <strong class=\"media_title\">{{ manifest.title }}</strong>\n                <small class=\"media_subtitle\">{{ manifest.subtitle }}</small>\n                <small class=\"media_author\">{{ manifest.author_as_it_appears }}</small>\n              </p>\n            </div>\n          </div>\n        </article>\n\n        <outline :data=\"outline\" :pdf=\"$refs.pdf\" :page=\"displayedPage\" @onClick=\"this.goto\" @current=\"this.onCurrentTitle\"/>\n\n      </div>\n    </section>\n\n    <section class=\"artwork\" v-show=\"artworkOpen\">\n      <div class=\"container\">\n        <b-tabs position=\"is-centered\" v-model=\"activeTab\" @change=\"onTabChanged\">\n          <b-tab-item label=\"Grid\">\n            <grid id=\"grid\" ref=\"grid\" :data=\"images\" :filter=\"tableFilter\" @onClick=\"this.onImageSelected\" />\n          </b-tab-item>\n          <b-tab-item label=\"Table\">\n            <tablegrid id=\"table\" ref=\"table\" :data=\"images\" @onImageClick=\"this.onImageSelected\" @onPageClick=\"this.onPageSelected\" />\n          </b-tab-item>\n        </b-tabs>\n      </div>\n    </section>\n\n    <!-- <section id=\"outline\" v-show=\"outlineOpen\">\n      <h2>Outline</h2>\n      <outline :data=\"outline\" :pdf=\"$refs.pdf\" :page=\"displayedPage\" @onClick=\"this.goto\" @current=\"this.onCurrentTitle\"/>\n      <a class=\"detail_close\" @click=\"outlineOpen = false\">Close</a>\n    </section> -->\n\n    <div class=\"modal\" :class=\"{'is-active': isModalActive}\">\n      <div class=\"modal-background\" @click=\"isModalActive = false\"></div>\n      <div class=\"modal-content\">\n        <detail :image=\"currentDetail\" :manifest=\"manifest\" @infoSelected=\"this.onInfoSelected\" @pageSelected=\"this.onPageSelected\" @closed=\"this.onDetailClosed\" @displayed=\"this.onDetailDisplayed\"/>\n      </div>\n      <button class=\"modal-close\" @click=\"isModalActive = false\"></button>\n    </div>\n\n  </div>\n\n</template>\n\n<script>\nimport Vue from 'vue'\nimport PDF from '@/components/PDF'\nimport Table from '@/components/Table'\nimport Grid from '@/components/Grid'\nimport Outline from '@/components/Outline'\nimport Detail from '@/components/Detail'\nimport 'whatwg-fetch'\n\n// Icons\nimport 'vue-awesome/icons/bars'\nimport 'vue-awesome/icons/search'\nimport 'vue-awesome/icons/columns'\nimport 'vue-awesome/icons/file-o'\nimport 'vue-awesome/icons/table'\nimport 'vue-awesome/icons/th'\nimport 'vue-awesome/icons/chevron-right'\nimport 'vue-awesome/icons/chevron-left'\nimport 'vue-awesome/icons/close'\nimport 'vue-awesome/icons/caret-right'\nimport 'vue-awesome/icons/plus'\nimport 'vue-awesome/icons/minus'\nimport 'vue-awesome/icons/hand-paper-o'\nimport 'vue-awesome/icons/i-cursor'\nimport 'vue-awesome/icons/picture-o'\nimport 'vue-awesome/icons/search-plus'\nimport 'vue-awesome/icons/search-minus'\nimport 'vue-awesome/icons/book'\n\nimport Icon from 'vue-awesome/components/Icon'\nimport Buefy from 'buefy';\nimport 'buefy/lib/buefy.css';\n\nimport debounce from 'debounce';\n\nVue.use(Buefy, {\n  // defaultIconPack: 'fa'\n});\n\nexport default {\n  name: 'reader',\n  components: {\n    'PDF': PDF,\n    'grid': Grid,\n    'tablegrid': Table,\n    'icon': Icon,\n    'outline': Outline,\n    'detail': Detail\n  },\n  props: {\n    'manifest-url': {\n      type: String\n    },\n    'page-url': {\n      default: undefined\n    },\n    'image-url': {\n      type: String\n    },\n    'show-grid': {\n      default: undefined\n    },\n    'show-table': {\n      default: undefined\n    }\n  },\n  data () {\n    let bounds = this.getBounds();\n\n    return {\n      manifest: {},\n      images: [],\n      page: 0,\n      displayedPage: 0,\n      spreads: true,\n      manualSpreads: false,\n      // showTable: false,\n      // showGrid: false,\n      currentDetail: undefined,\n      width: bounds.width,\n      height: bounds.height,\n      outline: undefined,\n      outlineOpen: false,\n      query: '',\n      matchCount: undefined,\n      currentMatchIndex: undefined,\n      zoomLevel: 1.0,\n      shownDetail: undefined,\n      displayedDetail: undefined,\n      activeTab: 0,\n      title: '',\n      shortTitle: '',\n      current: '',\n      isModalActive: false,\n      showSearch: false,\n      artworkOpen: false,\n      navOpen: false,\n      totalPages: 1,\n      editingPage: false,\n      navTimeout: undefined,\n      tableFilter: undefined\n    }\n  },\n  created () {\n    if (this.pageUrl) {\n      this.page = parseInt(this.pageUrl);\n    }\n\n    this.fetchManifest();\n\n    this.currentDetail = undefined;\n\n    this.toggleNav();\n\n    this.addListeners();\n\n    this.handleResize();\n\n    this._showTable();\n    this._showGrid();\n\n    /*\n    let spreads = localStorage.getItem('spreads');\n    if (spreads != null) {\n      this.spreads = (spreads === 'true');\n    }\n    */\n  },\n  beforeDestory () {\n    this.removeListeners();\n  },\n  computed: {\n    displayedPages () {\n      if (!this.spreads || this.displayedPage === 0) {\n        return this.displayedPage + 1;\n      } else if (this.displayedPage === this.totalPages - 1) {\n        return this.displayedPage + 1;\n      } else {\n        return `${this.displayedPage}–${this.displayedPage + 1}`;\n      }\n    }\n  },\n  watch: {\n    showTable () {\n      this._showTable();\n    },\n    showGrid () {\n      this._showGrid();\n    },\n    artworkOpen (active) {\n      const { grid } = this.$refs;\n      grid.handleResize();\n      grid.triggerLoad();\n      if (!active) {\n        if (this.displayedPage) {\n          this.$router.push({ name: 'PageLink', params: { page: this.displayedPage } });\n        } else {\n          this.$router.push({ name: 'Manifest' });\n        }\n      } else {\n        this.$router.push({ name: 'ArtworkLink', params: { tab: this.activeTab === 0 ? 'grid' : 'table' } });\n      }\n    },\n    activeTab () {\n      if (this.activeTab === 0) {\n        this.$router.push({ name: 'ArtworkLink', params: { tab: 'grid' } });\n      } else if (this.activeTab === 1) {\n        this.$router.push({ name: 'ArtworkLink', params: { tab: 'table' } });\n      }\n    },\n    pageUrl () {\n      if (this.loaded) {\n        let pg = parseInt(this.pageUrl);\n        if (this.page !== pg && this.displayedPage !== pg) {\n          this.page = pg;\n        }\n      }\n    },\n    imageUrl () {\n      if (this.loaded) {\n        this.currentDetail = this.imageUrl;\n      }\n    },\n    displayedDetail () {\n      if (this.displayedDetail) {\n        this.$router.push({ name: 'ImageLink', params: { image: this.displayedDetail } });\n      } else {\n        // this.$router.push({ name: 'Manifest' });\n      }\n    },\n    displayedPage () {\n      if (this.displayedPage) {\n        this.$router.push({ name: 'PageLink', params: { page: this.displayedPage } });\n      } else {\n        this.$router.push({ name: 'Manifest' });\n      }\n    },\n    spreads () {\n      // localStorage.setItem('spreads', this.spreads);\n    },\n    isModalActive (active) {\n      if (!active) {\n        if (this.artworkOpen) {\n          this.$router.push({ name: 'ArtworkLink', params: { tab: this.activeTab === 0 ? 'grid' : 'table' } });\n        } else if (this.displayedPage) {\n          this.$router.push({ name: 'PageLink', params: { page: this.displayedPage } });\n        } else {\n          this.$router.push({ name: 'Manifest' });\n        }\n      } else {\n        if (this.displayedDetail) {\n          this.$router.push({ name: 'ImageLink', params: { image: this.displayedDetail } });\n        }\n      }\n    }\n  },\n  methods: {\n    fetchManifest () {\n      return fetch(this.manifestUrl)\n        .then((response) => {\n          return response.json()\n        })\n        .then((manifest) => {\n          this.manifest = manifest;\n\n          this.shortTitle = manifest.title;\n          this.title = manifest.title;\n          if (manifest.subtitle) {\n            this.title += ': ' + manifest.subtitle;\n          }\n\n          this.title += ' – ' + manifest.author_as_it_appears;\n\n          if (this.imageUrl) {\n            this.currentDetail = this.imageUrl;\n          }\n        }).catch((err) => console.error(err));\n    },\n    loaded (pdfDocument) {\n      this.loaded = true;\n\n      this.pdfDocument = pdfDocument;\n      // Wait for PDF to load\n      this.images = this.manifest.images;\n\n      this.totalPages = pdfDocument.numPages;\n    },\n    next (e) {\n      const { pdf } = this.$refs;\n      pdf.next();\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    prev (e) {\n      const { pdf } = this.$refs;\n      pdf.prev();\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    keyListener (e) {\n      const { keyCode } = e;\n      if (keyCode === 37) {\n        this.prev();\n      } else if (keyCode === 39) {\n        this.next();\n      }\n    },\n    handleResize () {\n      let bounds = this.getBounds();\n      this.width = bounds.width;\n      this.height = bounds.height;\n\n      if (!this.manualSpreads) {\n        if (this.width < 600 && this.spreads === true) {\n          this.spreads = false;\n        }\n\n        if (this.width >= 600 && this.spreads === false) {\n          this.spreads = true;\n        }\n      }\n    },\n    goto (dest) {\n      const { pdf } = this.$refs;\n      this.outlineOpen = false;\n      return pdf.getPageIndex(dest[0]).then((pg) => {\n        this.page = pg;\n      }).catch((err) => console.error(err));\n    },\n    onImageSelected (image) {\n      // this.page = (image.page - 1);\n      this.currentDetail = image;\n\n      if (this.displayedDetail && !this.isModalActive) {\n        this.isModalActive = true;\n      }\n    },\n    onPageSelected (page) {\n      this.page = (page - 1);\n      this.isModalActive = false;\n      this.artworkOpen = false;\n      this.currentDetail = undefined;\n    },\n    onInfoSelected (filter) {\n      this.toggleGrid();\n      this.tableFilter = filter;\n      this.artworkOpen = true;\n      this.isModalActive = false;\n      this.currentDetail = undefined;\n    },\n    onImageClicked (image) {\n      // this.isModalActive = true;\n      this.currentDetail = image.objId;\n\n      if (this.displayedDetail && !this.isModalActive) {\n        this.isModalActive = true;\n      }\n    },\n    onDetailClosed () {\n      this.currentDetail = undefined;\n      this.displayedDetail = undefined;\n      this.isModalActive = false;\n    },\n    onDetailDisplayed (detail) {\n      this.displayedDetail = detail;\n      this.isModalActive = true;\n    },\n    onFound (count) {\n      this.matchCount = count;\n    },\n    onMatch (index) {\n      this.currentMatchIndex = index + 1;\n    },\n    onCurrentTitle (title) {\n      this.current = title;\n\n      if (title === 'Cover') {\n        this.current = '';\n      }\n    },\n    getBounds () {\n      let width = window.innerWidth;\n      let height = window.innerHeight;\n      // let header = 52;\n      return {\n        width: width,\n        height: height\n      };\n    },\n    setSpreads (spreads) {\n      if (this.spreads !== spreads) {\n        this.spreads = spreads;\n      }\n\n      this.manualSpreads = true;\n    },\n    onOutlineReady (outline) {\n      this.outline = outline;\n    },\n    onPageChanged (pages) {\n      this.displayedPage = pages[pages.length - 1];\n      this.page = -1; // reset\n    },\n    onTabChanged (index) {\n      const { grid, table } = this.$refs;\n\n      if (index === 0) {\n        grid.handleResize();\n        grid.triggerLoad();\n      }\n\n      if (index === 1) {\n        table.triggerLoad();\n      }\n    },\n    toggleTable () {\n      this.activeTab = 1;\n    },\n    toggleGrid () {\n      this.activeTab = 0;\n    },\n    nextMatch () {\n      const { pdf } = this.$refs;\n      pdf.nextMatch();\n    },\n    prevMatch () {\n      const { pdf } = this.$refs;\n      pdf.prevMatch();\n    },\n    zoomIn () {\n      // Handle https://en.wikipedia.org/wiki/IEEE_floating_point\n      this.zoomLevel = Math.round(this.zoomLevel * 10 + 2) / 10;\n    },\n    zoomOut () {\n      if (this.zoomLevel > 0.20) {\n        this.zoomLevel = Math.round(this.zoomLevel * 10 - 2) / 10;\n      }\n    },\n    showNav () {\n      clearTimeout(this.navTimeout);\n      this.navOpen = true;\n    },\n    hideNav () {\n      this.navOpen = false;\n    },\n    toggleNav () {\n      if (this.navOpen) {\n        clearTimeout(this.navTimeout);\n        this.hideNav();\n      } else {\n        this.showNav()\n        this.navTimeout = setTimeout(() => {\n          this.hideNav();\n        }, 2000);\n      }\n    },\n    onMouseMove (e) {\n      let {y} = e;\n      let dist = 100;\n      this.mouseMoved = true;\n\n      if (y < dist || y > window.innerHeight - dist) {\n        if (!this.openNav) {\n          this.openNav = setTimeout(() => {\n            this.showNav();\n            // this.openNav = undefined;\n          }, 300);\n        }\n      } else {\n        if (this.openNav) {\n          clearTimeout(this.openNav);\n          this.openNav = undefined;\n\n          if (this.navOpen) {\n            this.hideNav();\n          }\n        }\n      }\n    },\n    onMouseDown (e) {\n      this.mouseMoved = false;\n    },\n    onTouchMove (e) {\n      this.mouseMoved = true;\n    },\n    onClick (e) {\n      let {y} = e;\n      let dist = 100;\n\n      if (y > dist && y < window.innerHeight - dist) {\n        if (!this.mouseMoved && !this.outlineOpen && !this.outlineOpen && !this.isModalActive) {\n          this.toggleNav();\n        }\n      }\n      this.mouseMoved = false;\n    },\n    addListeners () {\n      this._handleResize = debounce(this.handleResize.bind(this), 200);\n\n      window.addEventListener('keyup', this.keyListener.bind(this), false);\n      window.addEventListener('resize', this._handleResize, false);\n\n      window.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n      window.addEventListener('mousedown', this.onMouseDown.bind(this), false);\n      window.addEventListener('click', this.onClick.bind(this), false);\n      window.addEventListener('touchend', this.onClick.bind(this), false);\n      window.addEventListener('touchstart', this.onMouseDown.bind(this), false);\n      window.addEventListener('touchmove', this.onTouchMove.bind(this), false);\n    },\n    removeListeners () {\n      window.removeEventListener('resize', this.handleResize);\n      window.removeEventListener('keyup', this.keyListener);\n\n      window.removeEventListener('mousemove', this.onMouseMove);\n      window.removeEventListener('mousedown', this.onMouseDown);\n      window.removeEventListener('click', this.onClick);\n      window.removeEventListener('touchend', this.onClick);\n      window.removeEventListener('touchstart', this.onMouseDown);\n      window.removeEventListener('touchmove', this.onTouchStart);\n    },\n    startPageEditing () {\n      this.editingPage = true;\n      this.$refs.pageEditor.focus();\n      this.$refs.pageEditor.value = '';\n    },\n    onPageEdited (v) {\n      let value = parseInt(v.target.value);\n      if (value) {\n        this.page = value - 1;\n      }\n      this.editingPage = false;\n    },\n    _showTable () {\n      const { table } = this.$refs;\n\n      if (this.showTable) {\n        this.artworkOpen = true;\n        this.toggleTable();\n      } else if (!this.showTable && !this.showGrid) {\n        this.artworkOpen = false;\n      }\n\n      table && table.triggerLoad();\n    },\n    _showGrid () {\n      const { grid } = this.$refs;\n\n      if (this.showGrid) {\n        this.artworkOpen = true;\n        this.toggleGrid();\n      } else if (!this.showGrid && !this.showTable) {\n        this.artworkOpen = false;\n      }\n\n      grid && grid.triggerLoad();\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  // Import Bulma's core\n  @import \"~bulma/sass/utilities/_all\";\n  // Set your colors\n  $primary: #1565c0;\n  $primary-invert: findColorInvert($primary);\n  // Setup $colors to use as bulma classes (e.g. 'is-twitter')\n  $colors: (\n      \"white\": ($white, $black),\n      \"black\": ($black, $white),\n      \"light\": ($light, $light-invert),\n      \"dark\": ($dark, $dark-invert),\n      \"primary\": ($primary, $primary-invert),\n      \"info\": ($info, $info-invert),\n      \"success\": ($success, $success-invert),\n      \"warning\": ($warning, $warning-invert),\n      \"danger\": ($danger, $danger-invert)\n  );\n  // Links\n  $link: $primary;\n  $link-invert: $primary-invert;\n  $link-focus-border: $primary;\n  // Import Bulma and Buefy styles\n  @import \"~bulma\";\n  @import \"~buefy/src/scss/buefy\";\n</style>\n\n<style>\n\n.nav.fixed {\n  top: -60px;\n  left: 0;\n  width: 100%;\n  border-bottom: 1px solid rgba(219, 219, 219, 0.85);\n  z-index: 15;\n  background-color: rgba(255, 255, 255, 0.85);\n  position: fixed;\n  transition: top .25s ease-in;\n}\n\n.nav.fixed.open {\n  top: 0;\n  left: 0;\n}\n\n.nav.fixed .icon {\n  /*color: #4a4a4a;*/\n}\n\n.nav.section_nav {\n  background-color: whitesmoke;\n\n}\n\n.artwork {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  margin-bottom: 0;\n  padding: 60px 40px 0 40px;\n  background-color: whitesmoke;\n  overflow: auto;\n}\n\n.navigation {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 400px;\n  height: 100vh;\n  margin-bottom: 0;\n  /*padding: 0 40px 0 40px;*/\n  background-color: white;\n  overflow: hidden;\n  overflow-y: auto;\n  z-index: 40;\n  transition: left .25s ease-in;\n  box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n}\n\n.navigation_background {\n  opacity: 0;\n  transition: opacity .25s ease-in;\n  z-index: -1;\n}\n\n.navigation_background.active {\n  opacity: 1;\n  z-index: 39;\n}\n\n.navigation.closed {\n  left: -400px;\n}\n\n.navigation .nav .nav-right {\n  flex-grow: 2;\n}\n\n.media {\n  /*background: #eee;*/\n  padding: 0 52px 20px 52px;\n}\n\n.media_title {\n  display: block;\n}\n\n.media_subtitle {\n  display: block;\n  line-height: 1em;\n}\n\n.media_author {\n  display: block;\n  margin-top: 1em;\n}\n\n.main {\n  background-color: whitesmoke;\n}\n\n.icon.is-small svg {\n  height: 1em;\n}\n\n.zoom_input {\n  width: 60px;\n}\n\n.page_input {\n  width: auto;\n}\n\n.page_input input {\n  width: 60px;\n}\n.contents {\n  padding: 40px;\n}\n\n.cover_image {\n  max-height: 100px;\n  max-width: 100px;\n}\n\n.arrow {\n  position: absolute;\n  top: 50vh;\n  margin-top: -24px;\n  /*font-size: 64px;*/\n  /*color: #E2E2E2;*/\n  color: rgb(74, 74, 74);\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  background-color: whitesmoke;\n  opacity: .5;\n  padding: 4px;\n}\n\n.arrow .icon {\n  width: 30px;\n}\n\n.arrow:hover {\n  /*color: #777;*/\n}\n\n#prev.arrow:active .icon {\n  justify-content: flex-start;\n}\n\n#next.arrow:active .icon {\n  justify-content: flex-end;\n}\n\n#prev {\n  left: 0px;\n  border-radius: 0 2px 2px 0;\n}\n\n#next {\n  right: 0px;\n  border-radius: 2px 0 0 2px;\n}\n\n#detail {\n  z-index: 50;\n}\n\n#outline, #artwork {\n  position: absolute;\n  top: 60px;\n  left: 20px;\n  width: calc(100vw - 120px);\n  height: calc(100vh - 160px);\n  padding: 40px;\n  background: #333333;\n  box-sizing: content-box;\n  -webkit-box-sizing: content-box;\n  -moz-box-sizing: content-box;\n  /*z-index: 50;*/\n  overflow: auto;\n}\n\n#outline h2 {\n  display: block;\n  color: #fff;\n}\n\n#outline ul {\n  list-style: none;\n}\n\n#outline a.outline_link {\n  color: #eee;\n}\n\n.navbar-breadcrumb {\n  margin: 0 0.7em;\n  height: .7em;\n}\n\n.floater {\n  position: absolute;\n  bottom: -60px;\n  left: 0;\n  position: fixed;\n  transition: bottom .25s ease-in;\n  color: whitesmoke;\n  border-radius: 5px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n}\n\n.floater.open {\n  bottom: 20px;\n}\n\n.floater .field {\n  margin: 0 4px;\n  box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n  margin-bottom: 0.75rem;\n  height: auto;\n}\n\n.modal-content {\n  width: auto !important;\n}\n\n.modal-close {\n  min-width: 48px;\n  min-height: 48px;\n}\n\n#matchCount {\n  align-items: flex-end;\n}\n\n#matchCount span {\n  width: 5.25em;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Reader.vue?07c58abe","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-84dcc46e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./PDF.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PDF.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-84dcc46e\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PDF.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-84dcc46e\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PDF.vue\n// module id = 64\n// module chunks = 2","<template>\n  <div :ref=\"'container'\" class=\"pageContainer\" :class=\"{ loading: isLoading, centered: (!spreads || zoom <= 1) }\" :style=\"{ width: `${width}px`, height: `${height ? height : viewportHeight }px` }\" >\n    <div class=\"pages\" :style=\"{\n      width: `${viewportWidth}px`,\n      height: `${viewportHeight}px`,\n      top: `${viewportTop}px`,\n      left: `${viewportLeft}px`\n      }\">\n      <page\n        v-for=\"page in displayedPages\"\n        :key=\"page.pageIndex\"\n        :ref=\"'page_'+page.pageIndex\"\n        :page=\"page\"\n        :width=\"spreads ? (width / 2) - 40 : width - 40\"\n        :height=\"height - 40\"\n        :scale=\"zoom\"\n        :onViewport=\"handleViewport\"\n        :onImageClicked=\"onImageClicked\"\n        :onSelected=\"onSelected\"\n        @displayed=\"afterDisplayed\"\n        class=\"page\"\n      />\n    </div>\n    <search :pdfDocument=\"pdfDocument\" :query=\"query\" @matched=\"this.onMatched\" @found=\"this.onFound\"/>\n  </div>\n</template>\n\n<script>\nimport Page from '@/components/Page'\nimport Search from '@/components/Search'\n\nconst pdfjsLib = require('pdfjs-dist');\n// require('pdfjs-dist/lib/shared/compatibility.js');\n\npdfjsLib.PDFJS.workerSrc = 'static/libs/pdfjs-dist/build/pdf.worker.js';\n\nexport default {\n  name: 'pdf',\n  components: {\n    'Page': Page,\n    'Search': Search\n  },\n  props: {\n    'src': {\n      type: String\n    },\n    'width': {\n      type: Number,\n      default: undefined\n    },\n    'height': {\n      type: Number,\n      default: undefined\n    },\n    'page': {\n      default: 0,\n      type: Number\n    },\n    'spreads': {\n      default: true,\n      type: Boolean\n    },\n    'onImageClicked': {\n      default: undefined,\n      type: Function\n    },\n    'onOutlineReady': {\n      default: undefined,\n      type: Function\n    },\n    'query': {\n      default: undefined,\n      type: String\n    },\n    'zoom': {\n      default: 1,\n      type: Number\n    }\n  },\n  data () {\n    return {\n      pdfDocument: undefined,\n      numPages: 0,\n      scale: 1,\n      rotate: undefined,\n      isLoading: true,\n      viewportWidth: 0,\n      viewportHeight: 0,\n      viewportLeft: 0,\n      viewportTop: 0,\n      displayedPage: 0,\n      displayedPages: [],\n      displayedPagesNumbers: [],\n      outline: undefined,\n      pageMatchesLength: [],\n      pageMatches: [],\n      matched: [],\n      selectedMatch: {}\n    }\n  },\n  updated () {\n  },\n  mounted () {\n    if (this.src) {\n      this.loadDocument(this.src)\n        .then(() => {\n          this.display(this.page);\n        })\n        .catch((err) => console.error(err));\n    }\n  },\n  watch: {\n    src () {\n      if (this.src) {\n        this.loadDocument(this.src)\n          .then(() => {\n            this.display(this.page);\n          })\n          .catch((err) => console.error(err));\n      }\n    },\n    page (pg) {\n      if (typeof this.page !== 'undefined' && this.page > -1) {\n        this.display(this.page);\n      }\n    },\n    spreads (spreads) {\n      if (typeof this.displayedPage !== 'undefined') {\n        this.display(this.displayedPage);\n      }\n    },\n    displayedPage () {\n      this.$emit('pageChanged', this.displayedPagesNumbers);\n    },\n    query () {\n      if (this.query === '') {\n        // this.findController.executeCommand('find', {query: this.query});\n        this.clearMatches();\n      }\n    },\n    zoom () {\n      let container = this.$refs.container;\n      let bounds = container.getBoundingClientRect();\n      this.scrollLeftDelta = (container.scrollLeft - ((container.scrollWidth - bounds.width) / 2));\n      this.scrollTopDelta = (container.scrollTop - ((container.scrollHeight - bounds.height) / 2));\n    }\n  },\n  methods: {\n    loadDocument (src) {\n      return pdfjsLib.getDocument(src)\n        .then((pdfDocument) => {\n          // Document loaded, retrieving the page.\n          var pagesCount = pdfDocument.numPages;\n          // var noCover = settings.cover === false;\n          this.numPages = pagesCount;\n\n          this.pdfDocument = pdfDocument;\n\n          this.$emit('loaded', pdfDocument);\n\n          this.outline = pdfDocument.getOutline().then((outline) => {\n            return this.processOutline(outline);\n          });\n        })\n        .catch((err) => console.error(err));\n    },\n    display (page = this.page) {\n      this.displayedPages = []; // clear\n\n      if (page < 0) {\n        return;\n      }\n\n      if (page > this.numPages) {\n        page = 0;\n      }\n\n      if (this.spreads) {\n        if (page % 2 !== 0 || page === 0) {\n          this.displayedPage = page;\n        } else {\n          this.displayedPage = page - 1;\n        }\n\n        if (this.displayedPage > 0) {\n          this.loadPage(this.displayedPage) // left\n          if (this.displayedPage !== this.numPages - 1) {\n            this.loadPage(this.displayedPage + 1) // right\n            this.displayedPagesNumbers = [this.displayedPage, this.displayedPage + 1];\n          } else {\n            this.displayedPagesNumbers = [this.displayedPage];\n          }\n        } else {\n          this.loadPage(this.displayedPage) // cover\n          this.displayedPagesNumbers = [this.displayedPage];\n        }\n      } else {\n        this.displayedPage = page;\n        this.loadPage(this.displayedPage);\n\n        this.displayedPagesNumbers = [this.displayedPage];\n      }\n    },\n    next () {\n      if (this.displayedPage === 0) {\n        this.displayedPage += 1;\n      } else {\n        this.displayedPage += this.spreads ? 2 : 1;\n      }\n      if (this.displayedPage < this.numPages) {\n        this.display(this.displayedPage);\n      } else {\n        this.displayedPage = this.numPages - (this.spreads ? 2 : 1);\n      }\n    },\n    prev () {\n      if (this.displayedPage > 0) {\n        if (this.displayedPage === 1) {\n          this.displayedPage -= 1;\n        } else {\n          this.displayedPage -= this.spreads ? 2 : 1;\n        }\n        this.display(this.displayedPage);\n      }\n    },\n    loadPage (pageIndex) {\n      const { pdfDocument } = this;\n\n      if (!pdfDocument) {\n        throw new Error('Unexpected call to getPage() before the document has been loaded.');\n      }\n\n      let pageNumber = pageIndex + 1;\n\n      if (!pageIndex || pageNumber < 1) {\n        pageNumber = 1;\n      } else if (pageNumber >= pdfDocument.numPages) {\n        pageNumber = pdfDocument.numPages;\n      }\n\n      return pdfDocument.getPage(pageNumber)\n        .then((page) => this.onPageLoad(page))\n        .catch((page) => this.onPageError(page));\n    },\n    onPageLoad (page) {\n      if (!this.displayedPagesNumbers.includes(page.pageIndex)) {\n        return;\n      }\n\n      this.displayedPages.push(page);\n\n      this.$nextTick(() => {\n        let pg = this.$refs[`page_${page.pageIndex}`][0];\n        pg.updatedSelectedMatch(this.selectedMatch);\n        pg.updateTextLayerMatches(this.query, this.pageMatches, this.pageMatchesLength);\n      });\n    },\n    afterDisplayed () {\n      let container = this.$refs.container;\n      let bounds = container.getBoundingClientRect();\n      container.scrollLeft = (container.scrollWidth - bounds.width) / 2 + this.scrollLeftDelta;\n      container.scrollTop = (container.scrollHeight - bounds.height) / 2 + this.scrollTopDelta;\n    },\n    onPageError (page) {\n      console.error(page);\n    },\n    handleViewport (viewport) {\n      this.viewportWidth = (this.spreads && this.displayedPage > 0 && this.displayedPage < this.numPages - 1) ? viewport.width * 2 : viewport.width;\n      this.viewportHeight = viewport.height;\n\n      let left = (this.width - this.viewportWidth) / 2;\n      let top = (this.height - this.viewportHeight) / 2;\n\n      this.viewportLeft = left > 0 ? left : 0;\n      this.viewportTop = top > 0 ? top : 0;\n    },\n    processOutline (outline) {\n      this.onOutlineReady && this.onOutlineReady(outline);\n      return outline;\n    },\n    getPageIndex (dest) {\n      return this.pdfDocument.getPageIndex(dest);\n    },\n    onMatched (matched, pageMatches, pageMatchesLength, count) {\n      // per page\n    },\n    onFound (query, matched, pageMatches, pageMatchesLength, count) {\n      this.pageMatches = pageMatches;\n      this.pageMatchesLength = pageMatchesLength;\n      this.matched = matched;\n      this.$emit('found', count);\n      if (this.matched && this.matched.length) {\n        this.currentMatchIndex = 0;\n        this.selectedMatch = this.matched[this.currentMatchIndex];\n        this.$emit('match', this.currentMatchIndex);\n\n        if (!this.displayedPagesNumbers.includes(this.selectedMatch.pageIdx)) {\n          this.display(this.selectedMatch.pageIdx);\n        } else {\n          let pg = this.$refs[`page_${this.selectedMatch.pageIdx}`][0];\n          pg.updatedSelectedMatch(this.selectedMatch);\n          pg.updateTextLayerMatches(this.query, this.pageMatches, this.pageMatchesLength);\n        }\n      }\n    },\n    onSelected (selected) {\n      let container = this.$refs.container;\n      let bounds = container.getBoundingClientRect();\n      container.scrollLeft = bounds.left + selected.left;\n      container.scrollTop = bounds.top + selected.top;\n    },\n    clearMatches () {\n      this.displayedPagesNumbers.forEach((pageIndex) => {\n        let pg = this.$refs[`page_${pageIndex}`][0];\n        pg.updateTextLayerMatches('', [], null);\n      });\n    },\n    nextMatch () {\n      if (!this.matched || this.matched.length === 0) {\n        return;\n      }\n\n      if (this.currentMatchIndex < this.matched.length - 1) {\n        this.currentMatchIndex += 1;\n      } else {\n        this.currentMatchIndex = 0;\n      }\n\n      this.selectedMatch = this.matched[this.currentMatchIndex];\n      this.$emit('match', this.currentMatchIndex);\n\n      if (!this.displayedPagesNumbers.includes(this.selectedMatch.pageIdx)) {\n        this.display(this.selectedMatch.pageIdx);\n      } else {\n        let pg = this.$refs[`page_${this.selectedMatch.pageIdx}`][0];\n        pg.updatedSelectedMatch(this.selectedMatch);\n      }\n    },\n    prevMatch () {\n      if (!this.matched || this.matched.length === 0) {\n        return;\n      }\n\n      if (this.currentMatchIndex > 0) {\n        this.currentMatchIndex -= 1;\n      } else {\n        this.currentMatchIndex = this.matched.length - 1;\n      }\n\n      this.selectedMatch = this.matched[this.currentMatchIndex];\n      this.$emit('match', this.currentMatchIndex);\n\n      if (!this.displayedPagesNumbers.includes(this.selectedMatch.pageIdx)) {\n        this.display(this.selectedMatch.pageIdx);\n      } else {\n        let pg = this.$refs[`page_${this.selectedMatch.pageIdx}`][0];\n        pg.updatedSelectedMatch(this.selectedMatch);\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.loading {\n  /*background: #eee url('../assets/loading-icon.gif') center no-repeat;*/\n}\n\n.pageContainer {\n  overflow: scroll;\n  position: relative;\n}\n\n\n.pages {\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n\n  box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n}\n\n.page {\n  flex: none;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// PDF.vue?0c2bea8a","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2ded1648\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Page.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2ded1648\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Page.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Page.vue\n// module id = 67\n// module chunks = 2","<template>\n  <div class=\"pageWrapper\" :class=\"{ loading: isLoading }\" :style=\"{ width: `${viewportWidth}px`, height: `${viewportHeight}px` }\">\n    <canvas ref=\"canvas\" :width=\"`${viewportWidth}px`\" :height=\"`${viewportHeight}px`\"/>\n    <textlayer :page=\"page\" :viewport=\"viewport\" :scale=\"scale\" @selected=\"onSelected\" ref=\"textLayer\"></textlayer>\n    <imagelayer :images=\"images\" :viewport=\"viewport\" :scale=\"scale\" :onImageClicked=\"onImageClicked\"></imagelayer>\n    <div ref=\"annotationLayer\"></div>\n  </div>\n</template>\n\n<script>\nimport TextLayer from '@/components/TextLayer'\nimport ImageLayer from '@/components/ImageLayer'\n\nconst pdfjsLib = require('pdfjs-dist');\npdfjsLib.PDFJS.workerSrc = '/static/libs/pdfjs-dist/build/pdf.worker.js';\n\nexport default {\n  name: 'page',\n  components: {\n    'textlayer': TextLayer,\n    'imagelayer': ImageLayer\n  },\n  props: {\n    'scale': {\n      default: 1,\n      type: Number\n    },\n    'rotate': {\n      default: undefined,\n      type: Number\n    },\n    'width': {\n      type: Number\n    },\n    'height': {\n      type: Number\n    },\n    'page': {\n      default: undefined,\n      type: Object\n    },\n    'onViewport': {\n      default: undefined,\n      type: Function\n    },\n    'onImageClicked': {\n      default: undefined,\n      type: Function\n    },\n    'onSelected': {\n      default: undefined,\n      type: Function\n    }\n    // 'pageMatchesLength': {\n    //   default: undefined,\n    //   type: Object\n    // },\n    // 'pageMatches': {\n    //   default: undefined,\n    //   type: Object\n    // },\n    // 'selectedMatch': {\n    //   default: undefined,\n    //   type: Object\n    // },\n    // 'query': {\n    //   default: undefined,\n    //   type: String\n    // }\n  },\n  data () {\n    return {\n      pdf: undefined,\n      isLoading: true,\n      viewportWidth: 0,\n      viewportHeight: 0,\n      viewportScale: 1,\n      viewport: undefined,\n      textContent: undefined,\n      images: [],\n      pageIndex: undefined\n    }\n  },\n  updated () {\n  },\n  mounted () {\n    if (this.page) {\n      this.displayPage(this.page);\n    }\n\n    // if (this.pageMatches && this.pageMatchesLength) {\n    //   // For some reason changes to the array isn't picked up, so sent as an object.\n    //   const {pageMatches} = this.pageMatches;\n    //   const {pageMatchesLength} = this.pageMatchesLength;\n    //\n    //   if (this.pageIndex in pageMatches) {\n    //     this.$refs.textLayer.updateTextLayerMatches(this.query, pageMatchesLength ? pageMatchesLength[this.pageIndex] : null, pageMatches[this.pageIndex]);\n    //   } else {\n    //     this.$refs.textLayer.clearTextLayerMatches();\n    //   }\n    // }\n    //\n    // if (this.pageIndex === this.selectedMatch.pageIdx) {\n    //   this.$refs.textLayer.selectedMatch(this.selectedMatch.pageIdx, this.selectedMatch.matchIdx);\n    // }\n  },\n  watch: {\n    page () {\n      if (this.page) {\n        this.displayPage(this.page);\n      }\n    },\n    scale () {\n      if (this.displaying) {\n        return;\n      }\n      if (typeof this.scale !== 'undefined') {\n        this.displayPage(this.page);\n      }\n    },\n    width () {\n      if (this.displaying) {\n        return;\n      }\n      if (typeof this.scale !== 'undefined') {\n        this.displayPage(this.page);\n      }\n    },\n    height () {\n      if (this.displaying) {\n        return;\n      }\n      if (typeof this.scale !== 'undefined') {\n        this.displayPage(this.page);\n      }\n    },\n    pageMatches () {\n      // if (this.pageMatches && this.pageMatchesLength) {\n      //   // For some reason changes to the array isn't picked up, so sent as an object.\n      //   const {pageMatches} = this.pageMatches;\n      //   const {pageMatchesLength} = this.pageMatchesLength;\n      //\n      //   if (this.pageIndex in pageMatches) {\n      //     this.$refs.textLayer.updateTextLayerMatches(this.query, pageMatchesLength ? pageMatchesLength[this.pageIndex] : null, pageMatches[this.pageIndex]);\n      //   } else {\n      //     this.$refs.textLayer.clearTextLayerMatches();\n      //   }\n      // }\n    }\n    // selectedMatch () {\n    //   if (this.pageIndex === this.selectedMatch.pageIdx) {\n    //     this.$refs.textLayer.selectedMatch(this.selectedMatch.pageIdx, this.selectedMatch.matchIdx);\n    //   }\n    // }\n  },\n  methods: {\n    getPageScale (page = this.page) {\n      const { scale, width, height } = this;\n\n      // Be default, we'll render page at 100% * scale width.\n      let pageScale = 1;\n\n      // If width is defined, calculate the scale of the page so it could be of desired width.\n      if (width < height) {\n        pageScale = width / page.getViewport(scale).width;\n      } else {\n        pageScale = height / page.getViewport(scale).height;\n      }\n\n      // console.log('pageScale', pageScale, width, height);\n\n      return scale * pageScale;\n    },\n    displayPage (page) {\n      // const scale = this.getPageScale(page);\n      const { canvas } = this.$refs;\n      const canvasContext = canvas.getContext('2d');\n      const { scale } = this;\n      const scaled = scale !== 1 ? scale : this.getPageScale(page);\n      const viewport = page.getViewport(scaled);\n      let images = this.images;\n      let imageCount = 0;\n      const imageLayer = {\n        beginLayout () { },\n        endLayout () { },\n        appendImage (i) {\n          i.page = page.pageIndex;\n          i.index = imageCount;\n          images.push(i);\n          imageCount++;\n        }\n      };\n\n      this.pageIndex = page.pageIndex;\n      this.viewport = viewport;\n      this.viewportScale = scale;\n      this.viewportHeight = viewport.height;\n      this.viewportWidth = viewport.width;\n\n      this.onViewport && this.onViewport(viewport);\n\n      this.displaying = true;\n      page.render({ canvasContext, viewport, imageLayer })\n        .then(() => {\n          this.$emit('displayed', this);\n          this.displaying = false;\n        })\n        .catch((err) => console.error(err));\n    },\n    onPageError (page) {\n      console.error(page);\n    },\n    updateTextLayerMatches (query, pageMatches, pageMatchesLength) {\n      this.query = query;\n      this.pageMatchesLength = pageMatchesLength;\n      this.pageMatches = pageMatches;\n\n      if (pageMatches && pageMatches.length > this.pageIndex) {\n        this.$refs.textLayer.updateTextLayerMatches(query, pageMatches[this.pageIndex], pageMatchesLength ? pageMatchesLength[this.pageIndex] : null);\n      } else {\n        this.$refs.textLayer.clearTextLayerMatches();\n      }\n    },\n    updatedSelectedMatch (selectedMatch) {\n      this.selectedMatch = selectedMatch;\n      if (this.pageIndex === selectedMatch.pageIdx) {\n        this.$refs.textLayer.selectedMatch(selectedMatch.pageIdx, selectedMatch.matchIdx);\n      }\n    }\n  }\n}\n</script>\n\n<style >\n.pageWrapper.loading {\n  /*background: #fff url('../assets/loading-icon.gif') center no-repeat;*/\n}\ncanvas {\n  background-color: #fff;\n}\n\n.pageWrapper {\n  direction: ltr;\n  position: relative;\n  overflow: visible;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Page.vue?701aacf5","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-448030bb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TextLayer.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-448030bb\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./TextLayer.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TextLayer.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-448030bb\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TextLayer.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-448030bb\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TextLayer.vue\n// module id = 70\n// module chunks = 2","<template>\n  <div ref=\"textLayer\" :style=\"{ width: `${viewport ? viewport.width : 0}px`, height: `${viewport ? viewport.height : 0}px` }\" class=\"textLayer\"></div>\n</template>\n\n\n<script>\nconst pdfjsLib = require('pdfjs-dist');\n// pdfjsLib.PDFJS.workerSrc = '/static/libs/pdfjs-dist/build/pdf.worker.js';\n\nexport default {\n  name: 'textlayer',\n  props: {\n    'page': {\n      default: undefined\n    },\n    'viewport': {\n      default: undefined\n    },\n    'renderTimeout': {\n      default: 300,\n      type: Number\n    }\n  },\n  data () {\n    return {\n      matches: [],\n      textDivs: [],\n      selected: {\n        pageIdx: -1,\n        matchIdx: -1\n      },\n      query: ''\n    }\n  },\n  updated () {\n\n  },\n  mounted () {\n    if (this.page) {\n      this.getTextContent(this.page)\n        .then((textContent) => this.onContent(textContent))\n        .catch((err) => console.error(err));\n    }\n  },\n  destroyed () {\n\n  },\n  watch: {\n    page () {\n      if (this.page) {\n        this.getTextContent(this.page)\n          .then((textContent) => this.onContent(textContent))\n          .catch((err) => console.error(err));\n      }\n    },\n    viewport () {\n      if (this.textContent) {\n        this.onContent(this.textContent);\n      }\n    }\n  },\n  methods: {\n    getTextContent (page) {\n      return page.getTextContent({ normalizeWhitespace: true });\n    },\n    onContent (textContent) {\n      const { textLayer } = this.$refs;\n\n      this.clearTextLayer();\n\n      this.textContent = textContent;\n\n      this.textDivs = [];\n      let textLayerFrag = document.createDocumentFragment();\n\n      if (this.textLayerRenderTask) {\n        this.textLayerRenderTask.cancel();\n        this.textLayerRenderTask = null;\n      }\n\n      this.textLayerRenderTask = pdfjsLib.renderTextLayer({\n        textContent: textContent,\n        container: textLayerFrag,\n        viewport: this.viewport,\n        textDivs: this.textDivs,\n        timeout: this.renderTimeout\n      });\n\n      this.textLayerRenderTask.promise.then(() => {\n        textLayer.appendChild(textLayerFrag);\n\n        if (this.pageMatches) {\n          this.matches = this.convertMatches(this.pageMatches, this.pageMatchesLength);\n          this.renderMatches(this.matches);\n        }\n      }).catch((err) => console.warn(err));\n    },\n    onPageError (page) {\n      console.error(page);\n    },\n    clearTextLayer () {\n      const { textLayer } = this.$refs;\n      while (textLayer.firstChild) {\n        textLayer.removeChild(textLayer.firstChild);\n      }\n    },\n    updateTextLayerMatches(query, pageMatches, pageMatchesLength) {\n      this.pageMatches = pageMatches;\n      this.pageMatchesLength = pageMatchesLength;\n      this.query = query;\n      if (this.textContent) {\n        this.clearMatches();\n        this.matches = this.convertMatches(this.pageMatches, this.pageMatchesLength);\n        this.renderMatches(this.matches);\n      }\n    },\n    clearTextLayerMatches() {\n      this.pageMatches = [];\n      this.pageMatchesLength = [];\n      this.query = '';\n      this.clearMatches();\n      this.selected = {pageIdx: -1, matchIdx: -1};\n      this._sentSelected = false;\n    },\n    selectedMatch(pageIdx, matchIdx) {\n      this._sentSelected = false;\n      this.clearMatches();\n      this.selected = {pageIdx, matchIdx};\n      this.renderMatches(this.matches);\n    },\n    renderMatches(matches) {\n      // Early exit if there is nothing to render.\n      if (matches.length === 0) {\n        return;\n      }\n\n      var bidiTexts = this.textContent.items;\n      var textDivs = this.textDivs;\n      var prevEnd = null;\n      var pageIdx = this.page.pageIndex;\n      var isSelectedPage = this.selected.pageIdx === pageIdx;\n      var selectedMatchIdx = this.selected.matchIdx || -1;\n      var highlightAll = true;\n      var infinity = {\n        divIdx: -1,\n        offset: undefined,\n      };\n\n      function beginText(begin, className) {\n        var divIdx = begin.divIdx;\n        textDivs[divIdx].textContent = '';\n        appendTextToDiv(divIdx, 0, begin.offset, className);\n      }\n\n      function appendTextToDiv(divIdx, fromOffset, toOffset, className) {\n        var div = textDivs[divIdx];\n        var content = bidiTexts[divIdx].str.substring(fromOffset, toOffset);\n        var node = document.createTextNode(content);\n        if (className) {\n          var span = document.createElement('span');\n          span.className = className;\n          span.appendChild(node);\n          div.appendChild(span);\n          return;\n        }\n        div.appendChild(node);\n      }\n\n      var i0 = selectedMatchIdx;\n      var i1 = i0 + 1;\n      if (highlightAll) {\n        i0 = 0;\n        i1 = matches.length;\n      } else if (!isSelectedPage) {\n        // Not highlighting all and this isn't the selected page, so do nothing.\n        return;\n      }\n\n      for (var i = i0; i < i1; i++) {\n        var match = matches[i];\n        var begin = match.begin;\n        var end = match.end;\n        var isSelected = (isSelectedPage && match.matchIdx === selectedMatchIdx);\n        var highlightSuffix = (isSelected ? ' selected' : '');\n\n        if (isSelected && !this._sentSelected) {\n          this.$emit('selected', textDivs[begin.divIdx].getBoundingClientRect());\n          this._sentSelected = true;\n        }\n\n        // Match inside new div.\n        if (!prevEnd || begin.divIdx !== prevEnd.divIdx) {\n          // If there was a previous div, then add the text at the end.\n          if (prevEnd !== null) {\n            appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n          }\n          // Clear the divs and set the content until the starting point.\n          beginText(begin);\n        } else {\n          appendTextToDiv(prevEnd.divIdx, prevEnd.offset, begin.offset);\n        }\n\n        if (begin.divIdx === end.divIdx) {\n          appendTextToDiv(begin.divIdx, begin.offset, end.offset, 'highlight' + highlightSuffix);\n        } else {\n          appendTextToDiv(begin.divIdx, begin.offset, infinity.offset, 'highlight begin' + highlightSuffix);\n          for (var n0 = begin.divIdx + 1, n1 = end.divIdx; n0 < n1; n0++) {\n            textDivs[n0].className = 'highlight middle' + highlightSuffix;\n          }\n          beginText(end, 'highlight end' + highlightSuffix);\n        }\n        prevEnd = end;\n      }\n\n      if (prevEnd) {\n        appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n      }\n    },\n    convertMatches (matches, matchesLength) {\n      var i = 0;\n      var iIndex = 0;\n      var bidiTexts = this.textContent.items;\n      var end = bidiTexts.length - 1;\n      var queryLen = this.query ? this.query.length : 0;\n      var ret = [];\n      if (!matches) {\n        return ret;\n      }\n      for (var m = 0, len = matches.length; m < len; m++) {\n        // Calculate the start position.\n        var matchIdx = matches[m];\n\n        // Loop over the divIdxs.\n        while (i !== end && matchIdx >= (iIndex + bidiTexts[i].str.length)) {\n          iIndex += bidiTexts[i].str.length;\n          i++;\n        }\n\n        if (i === bidiTexts.length) {\n          console.error('Could not find a matching mapping');\n        }\n\n        var match = {\n          matchIdx: matchIdx,\n          begin: {\n            divIdx: i,\n            offset: matchIdx - iIndex\n          },\n        };\n\n        // Calculate the end position.\n        if (matchesLength) { // multiterm search\n          matchIdx += matchesLength[m];\n        } else { // phrase search\n          matchIdx += queryLen;\n        }\n\n        // Somewhat the same array as above, but use > instead of >= to get\n        // the end position right.\n        while (i !== end && matchIdx > (iIndex + bidiTexts[i].str.length)) {\n          iIndex += bidiTexts[i].str.length;\n          i++;\n        }\n\n        match.end = {\n          divIdx: i,\n          offset: matchIdx - iIndex,\n        };\n        ret.push(match);\n      }\n\n      return ret;\n    },\n    clearMatches () {\n      if (!this.textContent) {\n        return;\n      }\n      // Clear all matches.\n      var matches = this.matches;\n      var textDivs = this.textDivs;\n      var bidiTexts = this.textContent.items;\n      var clearedUntilDivIdx = -1;\n\n      // Clear all current matches.\n      for (var i = 0, len = matches.length; i < len; i++) {\n        var match = matches[i];\n        var begin = Math.max(clearedUntilDivIdx, match.begin.divIdx);\n        for (var n = begin, end = match.end.divIdx; n <= end; n++) {\n          var div = textDivs[n];\n          div.textContent = bidiTexts[n].str;\n          div.className = '';\n        }\n        clearedUntilDivIdx = match.end.divIdx + 1;\n      }\n    }\n\n  }\n}\n</script>\n\n<style scoped>\n.textLayer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  opacity: 0.2;\n  line-height: 1.0;\n}\n</style>\n\n<style>\n.textLayer > div {\n    color: transparent;\n    position: absolute;\n    white-space: pre;\n    cursor: text;\n    -webkit-transform-origin: 0% 0%;\n    -moz-transform-origin: 0% 0%;\n    -o-transform-origin: 0% 0%;\n    -ms-transform-origin: 0% 0%;\n    transform-origin: 0% 0%;\n}\n\n.textLayer .highlight {\n    margin: -1px;\n    padding: 1px;\n    background-color: rgb(180, 0, 170);\n    border-radius: 4px;\n}\n\n.textLayer .highlight.selected {\n    background-color: rgb(0, 100, 0);\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// TextLayer.vue?520a83d4","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"textLayer\",\n    staticClass: \"textLayer\",\n    style: ({\n      width: ((_vm.viewport ? _vm.viewport.width : 0) + \"px\"),\n      height: ((_vm.viewport ? _vm.viewport.height : 0) + \"px\")\n    })\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-448030bb\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/TextLayer.vue\n// module id = 74\n// module chunks = 2","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-633d2fa2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ImageLayer.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ImageLayer.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-633d2fa2\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ImageLayer.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-633d2fa2\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ImageLayer.vue\n// module id = 75\n// module chunks = 2","<template>\n  <div ref=\"imageLayer\"\n        :style=\"{ width: `${viewport ? viewport.width : 0}px`, height: `${viewport ? viewport.height : 0}px` }\"\n        class=\"imageLayer\">\n    <div v-for=\"image in images\" class=\"imageLayerItem\"\n         :ref=\"image.objId\"\n         :id=\"image.objId\"\n         :style=\"{ width: `${image.width}px`, height: `${image.height}px`, top: `${image.top-image.height}px`, left: `${image.left}px`}\"\n         @click=\"handleClick(image)\">\n\n    </div>\n  </div>\n</template>\n\n\n<script>\n// const pdfjsLib = require('pdfjs-dist');\n// pdfjsLib.PDFJS.workerSrc = '/static/libs/pdfjs-dist/build/pdf.worker.js';\n\nexport default {\n  name: 'imagelayer',\n  props: {\n    'images': {\n      default: [],\n      type: Array\n    },\n    'viewport': {\n      default: undefined,\n      type: Object\n    },\n    'onImageClicked': {\n      default: undefined,\n      type: Function\n    }\n  },\n  data () {\n    return {\n\n    }\n  },\n  updated () {\n  },\n  mounted () {\n    if (this.images) {\n      // console.log('images', this.images);\n    }\n  },\n  watch: {\n    images () {\n      if (this.images) {\n        // console.log('images', this.images);\n      }\n    }\n  },\n  methods: {\n    handleClick (image) {\n      if (this.onImageClicked) {\n        this.onImageClicked(image);\n      }\n      this.$emit('imageClicked', image);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.imageLayer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  pointer-events: none;\n}\n.imageLayerItem {\n  position: absolute;\n  pointer-events: all;\n  cursor: pointer;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ImageLayer.vue?2ab7e818","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"imageLayer\",\n    staticClass: \"imageLayer\",\n    style: ({\n      width: ((_vm.viewport ? _vm.viewport.width : 0) + \"px\"),\n      height: ((_vm.viewport ? _vm.viewport.height : 0) + \"px\")\n    })\n  }, _vm._l((_vm.images), function(image) {\n    return _c('div', {\n      ref: image.objId,\n      refInFor: true,\n      staticClass: \"imageLayerItem\",\n      style: ({\n        width: ((image.width) + \"px\"),\n        height: ((image.height) + \"px\"),\n        top: ((image.top-image.height) + \"px\"),\n        left: ((image.left) + \"px\")\n      }),\n      attrs: {\n        \"id\": image.objId\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.handleClick(image)\n        }\n      }\n    })\n  }))\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-633d2fa2\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ImageLayer.vue\n// module id = 78\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"pageWrapper\",\n    class: {\n      loading: _vm.isLoading\n    },\n    style: ({\n      width: (_vm.viewportWidth + \"px\"),\n      height: (_vm.viewportHeight + \"px\")\n    })\n  }, [_c('canvas', {\n    ref: \"canvas\",\n    attrs: {\n      \"width\": (_vm.viewportWidth + \"px\"),\n      \"height\": (_vm.viewportHeight + \"px\")\n    }\n  }), _vm._v(\" \"), _c('textlayer', {\n    ref: \"textLayer\",\n    attrs: {\n      \"page\": _vm.page,\n      \"viewport\": _vm.viewport,\n      \"scale\": _vm.scale\n    },\n    on: {\n      \"selected\": _vm.onSelected\n    }\n  }), _vm._v(\" \"), _c('imagelayer', {\n    attrs: {\n      \"images\": _vm.images,\n      \"viewport\": _vm.viewport,\n      \"scale\": _vm.scale,\n      \"onImageClicked\": _vm.onImageClicked\n    }\n  }), _vm._v(\" \"), _c('div', {\n    ref: \"annotationLayer\"\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2ded1648\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Page.vue\n// module id = 79\n// module chunks = 2","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Search.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2ee440a1\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Search.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Search.vue\n// module id = 80\n// module chunks = 2","<template>\n</template>\n\n<script>\nimport { createPromiseCapability } from 'pdfjs-dist';\n\nconst FIND_TIMEOUT = 250; // ms\n\nconst CHARACTERS_TO_NORMALIZE = {\n  '\\u2018': '\\'', // Left single quotation mark\n  '\\u2019': '\\'', // Right single quotation mark\n  '\\u201A': '\\'', // Single low-9 quotation mark\n  '\\u201B': '\\'', // Single high-reversed-9 quotation mark\n  '\\u201C': '\"', // Left double quotation mark\n  '\\u201D': '\"', // Right double quotation mark\n  '\\u201E': '\"', // Double low-9 quotation mark\n  '\\u201F': '\"', // Double high-reversed-9 quotation mark\n  '\\u00BC': '1/4', // Vulgar fraction one quarter\n  '\\u00BD': '1/2', // Vulgar fraction one half\n  '\\u00BE': '3/4', // Vulgar fraction three quarters\n};\n\n// Compile the regular expression for text normalization once.\nconst replace = Object.keys(CHARACTERS_TO_NORMALIZE).join('');\nconst normalizationRegex = new RegExp('[' + replace + ']', 'g');\n\nexport default {\n  name: 'search',\n  props: {\n    'waitTimeout': {\n      default: 30,\n      type: Number\n    },\n    'pdfDocument': {\n      default: undefined\n    },\n    'query': {\n      default: '',\n      type: String\n    },\n    'phraseSearch': {\n      default: true,\n      type: Boolean\n    },\n    'minQueryLength': {\n      default: 3,\n      type: Number\n    }\n  },\n  data () {\n    return {\n      matches: [],\n      textDivs: [],\n      pageContents: [],\n      pageMatches: [],\n      pageMatchesLength: null,\n      matchCount: 0,\n      pagesCount: 0,\n      pendingFindMatches: {},\n      active: false,\n      pagesToSearch: null,\n      extractTextPromises: [],\n      matched: []\n    }\n  },\n  updated () {\n\n  },\n  mounted () {\n    if (this.pdfDocument) {\n      this.extractText();\n    }\n  },\n  watch: {\n    pdfDocument () {\n      if (this.pdfDocument) {\n        this.extractText();\n      }\n    },\n    query () {\n      if (this.query === '') {\n        this.reset();\n      }\n\n      clearTimeout(this.findTimeout);\n      this.findTimeout = setTimeout(() => {\n        if (this.query.length > this.minQueryLength) {\n          this.find(this.query);\n        }\n      }, FIND_TIMEOUT);\n    }\n  },\n  methods: {\n    reset () {\n      this.matched = [];\n      this.pageMatches = [];\n      this.pageMatchesLength = null;\n      this.matchCount = 0;\n\n      this.$emit('matched', this.matched, this.pageMatchesLength, this.matchCount);\n      this.$emit('found', this.pageMatches, this.pageMatchesLength, this.matchCount);\n    },\n\n    find(query) {\n      let numPages = this.pagesCount;\n\n      if (this.prevQuery && this.prevQuery === query) {\n        return; // unchanged\n      }\n      this.prevQuery = query;\n\n      // Reset\n      this.matched = [];\n      this.pageMatches = [];\n      this.pageMatchesLength = null;\n      this.matchCount = 0;\n      this.selected = {\n        pageIdx: -1,\n        matchIdx: -1\n      };\n\n      for (let i = 0; i < numPages; i++) {\n        // Wipe out any previously highlighted matches.\n        // this.updatePage(i);\n\n        // Start finding the matches as soon as the text is extracted.\n        if (!(i in this.pendingFindMatches)) {\n          this.pendingFindMatches[i] = true;\n          this.extractTextPromises[i].then((pageIdx) => {\n            delete this.pendingFindMatches[pageIdx];\n            this.calcFindMatch(pageIdx);\n          });\n        }\n      }\n    },\n\n    normalize(text) {\n      return text.replace(normalizationRegex, function (ch) {\n        return CHARACTERS_TO_NORMALIZE[ch];\n      });\n    },\n\n    /**\n     * Helper for multi-term search that fills the `matchesWithLength` array\n     * and handles cases where one search term includes another search term (for\n     * example, \"tamed tame\" or \"this is\"). It looks for intersecting terms in\n     * the `matches` and keeps elements with a longer match length.\n     */\n    _prepareMatches (matchesWithLength, matches, matchesLength) {\n      function isSubTerm(matchesWithLength, currentIndex) {\n        let currentElem = matchesWithLength[currentIndex];\n        let nextElem = matchesWithLength[currentIndex + 1];\n\n        // Check for cases like \"TAMEd TAME\".\n        if (currentIndex < matchesWithLength.length - 1 &&\n            currentElem.match === nextElem.match) {\n          currentElem.skipped = true;\n          return true;\n        }\n\n        // Check for cases like \"thIS IS\".\n        for (let i = currentIndex - 1; i >= 0; i--) {\n          let prevElem = matchesWithLength[i];\n          if (prevElem.skipped) {\n            continue;\n          }\n          if (prevElem.match + prevElem.matchLength < currentElem.match) {\n            break;\n          }\n          if (prevElem.match + prevElem.matchLength >=\n              currentElem.match + currentElem.matchLength) {\n            currentElem.skipped = true;\n            return true;\n          }\n        }\n        return false;\n      }\n\n      // Sort the array of `{ match: <match>, matchLength: <matchLength> }`\n      // objects on increasing index first and on the length otherwise.\n      matchesWithLength.sort(function(a, b) {\n        return a.match === b.match ? a.matchLength - b.matchLength : a.match - b.match;\n      });\n      for (let i = 0, len = matchesWithLength.length; i < len; i++) {\n        if (isSubTerm(matchesWithLength, i)) {\n          continue;\n        }\n        matches.push(matchesWithLength[i].match);\n        matchesLength.push(matchesWithLength[i].matchLength);\n      }\n    },\n\n    calcFindPhraseMatch (query, pageIndex, pageContent) {\n      let matches = [];\n      let queryLen = query.length;\n      let matchIdx = -queryLen;\n      while (true) {\n        matchIdx = pageContent.indexOf(query, matchIdx + queryLen);\n        if (matchIdx === -1) {\n          break;\n        }\n        matches.push(matchIdx);\n      }\n      this.pageMatches[pageIndex] = matches;\n    },\n\n    calcFindWordMatch (query, pageIndex, pageContent) {\n      let matchesWithLength = [];\n      // Divide the query into pieces and search for text in each piece.\n      let queryArray = query.match(/\\S+/g);\n      for (let i = 0, len = queryArray.length; i < len; i++) {\n        let subquery = queryArray[i];\n        let subqueryLen = subquery.length;\n        let matchIdx = -subqueryLen;\n        while (true) {\n          matchIdx = pageContent.indexOf(subquery, matchIdx + subqueryLen);\n          if (matchIdx === -1) {\n            break;\n          }\n          // Other searches do not, so we store the length.\n          matchesWithLength.push({\n            match: matchIdx,\n            matchLength: subqueryLen,\n            skipped: false,\n          });\n        }\n      }\n\n      // Prepare arrays for storing the matches.\n      if (!this.pageMatchesLength) {\n        this.pageMatchesLength = [];\n      }\n      this.pageMatchesLength[pageIndex] = [];\n      this.pageMatches[pageIndex] = [];\n\n      // Sort `matchesWithLength`, remove intersecting terms and put the result\n      // into the two arrays.\n      this._prepareMatches(matchesWithLength, this.pageMatches[pageIndex],\n        this.pageMatchesLength[pageIndex]);\n    },\n\n    calcFindMatch (pageIndex) {\n      let pageContent = this.normalize(this.pageContents[pageIndex]);\n      let query = this.normalize(this.query);\n      let caseSensitive = this.caseSensitive;\n      let phraseSearch = this.phraseSearch;\n      let queryLen = query.length;\n\n      if (queryLen === 0) {\n        // Do nothing: the matches should be wiped out already.\n        return;\n      }\n\n      if (!caseSensitive) {\n        pageContent = pageContent.toLowerCase();\n        query = query.toLowerCase();\n      }\n\n      if (phraseSearch) {\n        this.calcFindPhraseMatch(query, pageIndex, pageContent);\n      } else {\n        this.calcFindWordMatch(query, pageIndex, pageContent);\n      }\n\n      // this.updatePage(pageIndex);\n      // this.updateMatches();\n\n      // Update the match count.\n      if (pageIndex in this.pageMatches && this.pageMatches[pageIndex].length > 0) {\n        this.matchCount += this.pageMatches[pageIndex].length;\n\n        this.pageMatches[pageIndex].forEach((match) => {\n          this.matched.push({\n            matchIdx: match,\n            pageIdx: pageIndex\n          });\n          this.$emit('matched', this.query, this.matched, this.pageMatches[pageIndex], this.pageMatchesLength ? this.pageMatchesLength[pageIndex] : null, this.matchCount);\n        });\n      }\n\n      if (this.pageMatches.length === this.pagesCount) {\n        this.$emit('found', this.query, this.matched, this.pageMatches, this.pageMatchesLength, this.matchCount);\n      }\n    },\n\n    getPageTextContent (pageIndex) {\n      return this.pdfDocument.getPage(pageIndex + 1).then(function (page) {\n        return page.getTextContent({\n          normalizeWhitespace: true,\n        });\n      }).catch((err) => console.error(err));\n    },\n\n    extractText () {\n      if (this.startedTextExtraction) {\n        return;\n      }\n      this.startedTextExtraction = true;\n      this.pageContents.length = 0;\n      this.pagesCount = this.pdfDocument.numPages - 1;\n\n      let promise = Promise.resolve();\n      for (let i = 0, ii = this.pagesCount; i < ii; i++) {\n        let extractTextCapability = createPromiseCapability();\n        this.extractTextPromises[i] = extractTextCapability.promise;\n\n        promise = promise.then(() => {\n          return this.getPageTextContent(i).then((textContent) => {\n            let textItems = textContent.items;\n            let strBuf = [];\n\n            for (let j = 0, jj = textItems.length; j < jj; j++) {\n              strBuf.push(textItems[j].str);\n            }\n            // Store the pageContent as a string.\n            this.pageContents[i] = strBuf.join('');\n            extractTextCapability.resolve(i);\n          });\n        });\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Search.vue?3b883a08","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c(\"div\")\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2ee440a1\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Search.vue\n// module id = 113\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: 'container',\n    staticClass: \"pageContainer\",\n    class: {\n      loading: _vm.isLoading, centered: (!_vm.spreads || _vm.zoom <= 1)\n    },\n    style: ({\n      width: (_vm.width + \"px\"),\n      height: ((_vm.height ? _vm.height : _vm.viewportHeight) + \"px\")\n    })\n  }, [_c('div', {\n    staticClass: \"pages\",\n    style: ({\n      width: (_vm.viewportWidth + \"px\"),\n      height: (_vm.viewportHeight + \"px\"),\n      top: (_vm.viewportTop + \"px\"),\n      left: (_vm.viewportLeft + \"px\")\n    })\n  }, _vm._l((_vm.displayedPages), function(page) {\n    return _c('page', {\n      key: page.pageIndex,\n      ref: 'page_' + page.pageIndex,\n      refInFor: true,\n      staticClass: \"page\",\n      attrs: {\n        \"page\": page,\n        \"width\": _vm.spreads ? (_vm.width / 2) - 40 : _vm.width - 40,\n        \"height\": _vm.height - 40,\n        \"scale\": _vm.zoom,\n        \"onViewport\": _vm.handleViewport,\n        \"onImageClicked\": _vm.onImageClicked,\n        \"onSelected\": _vm.onSelected\n      },\n      on: {\n        \"displayed\": _vm.afterDisplayed\n      }\n    })\n  })), _vm._v(\" \"), _c('search', {\n    attrs: {\n      \"pdfDocument\": _vm.pdfDocument,\n      \"query\": _vm.query\n    },\n    on: {\n      \"matched\": this.onMatched,\n      \"found\": this.onFound\n    }\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-84dcc46e\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/PDF.vue\n// module id = 114\n// module chunks = 2","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-31beea36\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Table.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-31beea36\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./Table.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Table.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-31beea36\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Table.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-31beea36\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Table.vue\n// module id = 115\n// module chunks = 2","<template>\n  <div>\n    <nav class=\"nav section_nav\">\n      <div class=\"nav-left\">\n        <div class=\"nav-item first-nav-item\">\n          <p class=\"control has-icons-right\">\n            <input class=\"input has-icons-right\" name=\"query\" v-model=\"filterKey\">\n            <span class=\"icon is-small is-right\">\n              <icon name=\"search\" title=\"Search\"></icon>\n            </span>\n          </p>\n        </div>\n      </div>\n\n      <div class=\"nav-right\" style=\"overflow: visible\">\n        <!-- <b-dropdown>\n          <button class=\"button\" slot=\"trigger\">\n              <span>Artworks</span>\n              <b-icon icon=\"arrow_drop_down\"></b-icon>\n          </button>\n\n          <b-dropdown-option v-for=\"artwork in artworks\" key=\"option_${artwork.uri}\">{{artwork.name}}</b-dropdown-option>\n        </b-dropdown> -->\n\n        <b-dropdown position=\"is-bottom-left\" v-model=\"artworkFilter\" v-show=\"!artworkFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"artworkFilter = undefined;\">\n              <span class=\"icon is-small\">\n                <icon name=\"picture-o\" title=\"Filter by Artwork\"></icon>\n              </span>\n              <span>Artworks</span>\n              <b-icon icon=\"arrow_drop_down\"></b-icon>\n          </button>\n\n          <b-dropdown-option v-for=\"artwork in artworks\" :key=\"artwork.uri\" :value=\"artwork.name\" :selected=\"artworkFilter === artwork.name\">{{artwork.name | truncate }}</b-dropdown-option>\n        </b-dropdown>\n        <span class=\"dropdown\" v-if=\"artworkFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"artworkFilter = undefined;\">\n              <span>{{artworkFilter}}</span>\n              <b-icon icon=\"close\" class=\"is-small\"></b-icon>\n          </button>\n        </span>\n\n        <b-dropdown position=\"is-bottom-left\" v-model=\"artistFilter\" v-show=\"!artistFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"artistFilter = undefined;\">\n              <span class=\"icon is-small\">\n                <icon name=\"user\" title=\"Filter by Artist\"></icon>\n              </span>\n              <span>Artist</span>\n              <b-icon icon=\"arrow_drop_down\"></b-icon>\n          </button>\n\n          <b-dropdown-option v-for=\"artist in artists\" :key=\"artist.uri\" :value=\"artist.name\" :selected=\"artistFilter === artist.name\">{{artist.name | truncate }}</b-dropdown-option>\n        </b-dropdown>\n        <span class=\"dropdown\" v-if=\"artistFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"artistFilter = undefined;\">\n              <span>{{artistFilter}}</span>\n              <b-icon icon=\"close\" class=\"is-small\"></b-icon>\n          </button>\n        </span>\n\n        <b-dropdown position=\"is-bottom-left\" v-model=\"collectionFilter\" v-show=\"!collectionFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"collectionFilter = undefined;\">\n            <span class=\"icon is-small\">\n              <icon name=\"institution\" title=\"Filter by Collection\"></icon>\n            </span>\n              <span>Collection</span>\n              <b-icon icon=\"arrow_drop_down\"></b-icon>\n          </button>\n\n          <b-dropdown-option v-for=\"collection in collections\" :key=\"collection.uri\" :value=\"collection.name\" :selected=\"collectionFilter === collection.name\">{{collection.name | truncate }}</b-dropdown-option>\n        </b-dropdown>\n        <span class=\"dropdown\" v-if=\"collectionFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"collectionFilter = undefined;\">\n              <span>{{collectionFilter}}</span>\n              <b-icon icon=\"close\" class=\"is-small\"></b-icon>\n          </button>\n        </span>\n\n\n      </div>\n    </nav>\n\n    <b-table\n      :data=\"filteredData\"\n      :bordered=\"true\"\n      :striped=\"true\"\n      :mobile-cards=\"true\"\n      :paginated=\"true\"\n      :per-page=\"8\"\n      :pagination-simple=\"true\"\n      class=\"artwork_table\"\n      >\n        <template scope=\"tb\">\n            <b-table-column field=\"thumbnail\" label=\"\" width=\"40\" height=\"130\">\n              <a class=\"img_link\" @click=\"$emit('onImageClick', tb.row)\">\n                <img v-lazy=\"tb.row['thumbnail']\" />\n              </a>\n            </b-table-column>\n\n            <b-table-column field=\"artwork\" label=\"Artwork\" sortable>\n              {{ tb.row['artwork_title'] }}\n              <!-- <a @click=\"artworkFilter = tb.row.artwork_title\" v-show=\"artworkFilter != tb.row.artwork_title\">\n                {{ tb.row['artwork_title'] }}\n              </a>\n              <span v-show=\"artworkFilter === tb.row.artwork_title\">\n                {{ tb.row['artwork_title'] }}\n              </span> -->\n              <!-- <a :href=\"tb.row['artwork_uri']\" target=\"_blank\" class=\"external_link\">\n                {{ tb.row['artwork_title'] }}\n                <b-icon icon=\"open_in_new\" class=\"is-small\"></b-icon>\n              </a>\n\n              <a @click=\"artworkFilter = tb.row.artwork_title\" class=\"button is-small is-pulled-right filterer\">\n                <b-icon\n                    icon=\"filter\"\n                    size=\"is-small\">\n                </b-icon>\n                <span>\n                {{ imagesByArtwork[encodeURI(tb.row.artwork_title)] && imagesByArtwork[encodeURI(tb.row.artwork_title)].length }}\n                </span>\n              </a> -->\n            </b-table-column>\n\n            <b-table-column field=\"artist\" label=\"Artist\" sortable>\n              {{ tb.row['artist_name'] }}\n              <!-- <a :href=\"tb.row['artist_uri']\" target=\"_blank\" class=\"external_link\">\n                {{ tb.row['artist_name'] }}\n                <b-icon icon=\"open_in_new\" class=\"is-small\"></b-icon>\n              </a> -->\n              <!-- <a @click=\"artistFilter = tb.row.artist_name\" v-show=\"artistFilter != tb.row.artist_name\">\n                {{ tb.row['artist_name'] }}\n              </a>\n              <span v-show=\"artistFilter === tb.row.artist_name\">\n                {{ tb.row['artist_name'] }}\n              </span> -->\n              <!-- <a class=\"button is-small is-pulled-right\" :href=\"tb.row['artist_uri']\" target=\"_blank\"  v-if=\"tb.row.artist_uri\">\n                <span>ULAN</span>\n                <b-icon icon=\"open_in_new\" class=\"is-small\"></b-icon>\n              </a> -->\n\n              <!-- <a @click=\"artistFilter = tb.row.artist_name\" class=\"button is-small is-pulled-right filterer\">\n                <b-icon\n                    icon=\"filter\"\n                    size=\"is-small\">\n                </b-icon>\n                <span>\n                {{ imagesByArtist[encodeURI(tb.row.artist_name)] && imagesByArtist[encodeURI(tb.row.artist_name)].length }}\n                </span>\n              </a> -->\n            </b-table-column>\n\n            <b-table-column field=\"collection\" label=\"Collection\" class=\"artwork_info\" sortable>\n              {{ tb.row['collection'] }}\n              <!-- <a :href=\"tb.row['collection_uri']\" target=\"_blank\" class=\"external_link\">\n                {{ tb.row['collection'] }}\n                <b-icon icon=\"open_in_new\" class=\"is-small\"></b-icon>\n              </a> -->\n              <!-- <a @click=\"collectionFilter = tb.row.collection\" v-show=\"collectionFilter != tb.row.collection\">\n                {{ tb.row['collection'] }}\n              </a>\n              <span v-show=\"collectionFilter === tb.row.collection\">\n                {{ tb.row['collection'] }}\n              </span> -->\n              <!-- <a class=\"button is-small\" :href=\"tb.row['collection_uri']\" target=\"_blank\"  v-if=\"tb.row.collection_uri\">\n                <b-icon icon=\"open_in_new\" class=\"is-small\"></b-icon>\n              </a> -->\n\n              <!-- <a @click=\"collectionFilter = tb.row.collection\" class=\"button is-small is-pulled-right filterer\">\n                <b-icon\n                    icon=\"filter\"\n                    size=\"is-small\">\n                </b-icon>\n                <span>\n                {{ imagesByCollection[encodeURI(tb.row.collection)] && imagesByCollection[encodeURI(tb.row.collection)].length }}\n                </span>\n              </a> -->\n\n            </b-table-column>\n\n            <b-table-column field=\"page\" label=\"Location\" sortable width=\"10\" class=\"location\">\n              <!-- <a @click=\"$emit('onPageClick', tb.row.page)\">\n                <span v-if=\"parseInt(tb.row.page)\">pg. {{ tb.row.page }}</span>\n                <span v-if=\"!parseInt(tb.row.page)\">{{ tb.row.page }}</span>\n              </a> -->\n              <span v-if=\"parseInt(tb.row.page)\">pg. {{ tb.row.page }}</span>\n              <span v-if=\"!parseInt(tb.row.page)\">{{ tb.row.page }}</span>\n            </b-table-column>\n\n            <b-table-column label=\"View\" sortable width=\"30\">\n              <a class=\"button is-small\" :href=\"tb.row['artwork_uri']\" target=\"_blank\"  v-if=\"tb.row.artwork_uri\">\n                <span>View in Collection</span>\n                <b-icon icon=\"open_in_new\" class=\"is-small\"></b-icon>\n              </a>\n              <a class=\"button is-small view_in_book\" @click=\"$emit('onPageClick', tb.row.page)\">\n                <span>View in Book</span>\n                <b-icon icon=\"keyboard_arrow_right\" class=\"is-small\"></b-icon>\n              </a>\n            </b-table-column>\n\n            <!-- <b-table-column field=\"viewin\" label=\"View\">\n              <a class=\"button\" :href=\"tb.row['collection_uri']\" target=\"_blank\">\n                In Collection\n              </a>\n            </b-table-column> -->\n        </template>\n    </b-table>\n  </div>\n</template>\n\n<script>\nimport VueLazyload from 'vue-lazyload'\nimport Vue from 'vue'\nimport 'vue-awesome/icons/search'\nimport 'vue-awesome/icons/institution'\nimport 'vue-awesome/icons/user'\nimport 'vue-awesome/icons/picture-o'\n\nimport Icon from 'vue-awesome/components/Icon'\n\nVue.use(VueLazyload, {\n  preLoad: 1.3,\n  // error: 'dist/error.png',\n  // loading: 'dist/loading.gif',\n  attempt: 1\n})\n\nexport default {\n  name: 'table',\n  components: {\n    'icon': Icon\n  },\n  props: {\n    'data': {\n      type: Array\n    },\n    'filter': {\n      type: Object,\n      default: undefined\n    }\n  },\n  created () {\n    if (this.filter) {\n      Object.keys(this.filter).forEach((key) => {\n        let value = this.filter[key];\n\n        if (key === 'artwork_title') {\n          this.artworkFilter = value;\n        }\n\n        if (key === 'artist_name') {\n          this.artistFilter = value;\n        }\n\n        if (key === 'collection') {\n          this.collectionFilter = value;\n        }\n      });\n    }\n  },\n  data () {\n    var sortOrders = {}\n    this.columns = ['thumbnail', 'page', 'artwork_title', 'artist', 'collection'];\n    this.columns.forEach(function (key) {\n      sortOrders[key] = 1;\n    })\n    return {\n      sortKey: '',\n      sortOrders: sortOrders,\n      filterKey: '',\n      // searchQuery: '',\n      gridColumns: [],\n      imagesByArtwork: {},\n      imagesByArtist: {},\n      imagesByCollection: {},\n      artworks: [],\n      artists: [],\n      collections: [],\n      artistFilter: '',\n      artworkFilter: '',\n      collectionFilter: ''\n    }\n  },\n  computed: {\n    filteredData: function () {\n      var sortKey = this.sortKey;\n      var filterKey = this.filterKey && this.filterKey.toLowerCase();\n      var artworkFilter = this.artworkFilter && this.artworkFilter.toLowerCase();\n      var artistFilter = this.artistFilter && this.artistFilter.toLowerCase();\n      var collectionFilter = this.collectionFilter && this.collectionFilter.toLowerCase();\n      var order = this.sortOrders[sortKey] || 1;\n      var data = this.data;\n\n      if (artworkFilter && data) {\n        data = data.filter(function (row) {\n          if (row.artwork_title) {\n            return String(row.artwork_title).toLowerCase().indexOf(artworkFilter) > -1;\n          }\n        });\n      }\n\n      if (artistFilter && data) {\n        data = data.filter(function (row) {\n          if (row.artist_name) {\n            return String(row.artist_name).toLowerCase().indexOf(artistFilter) > -1;\n          }\n        });\n      }\n\n      if (collectionFilter && data) {\n        data = data.filter(function (row) {\n          if (row.collection) {\n            return String(row.collection).toLowerCase().indexOf(collectionFilter) > -1;\n          }\n        });\n      }\n\n      if (filterKey && data) {\n        data = data.filter(function (row) {\n          return Object.keys(row).some(function (key) {\n            return String(row[key]).toLowerCase().indexOf(filterKey) > -1;\n          })\n        })\n      }\n      if (sortKey) {\n        data = data.slice().sort(function (a, b) {\n          a = a[sortKey];\n          b = b[sortKey];\n          return (a === b ? 0 : a > b ? 1 : -1) * order;\n        })\n      }\n      return data;\n    }\n  },\n  filters: {\n    capitalize: function (str) {\n      return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    titlecase: function (_str) {\n      var str;\n      str = _str.replace(/_/g, ' ');\n      str = str.replace(/([^\\W_]+[^\\s-]*) */g, (txt) => {\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n      });\n\n      return str;\n    },\n    truncate: function (text, stop = 60, clamp) {\n      return text.slice(0, stop) + (stop < text.length ? clamp || '...' : '');\n    }\n  },\n  watch: {\n    data () {\n      this.data.forEach((image) => {\n        if (image.artist_name) {\n          let artistUri = encodeURI(image.artist_name);\n          if (!this.imagesByArtist[artistUri]) {\n            this.imagesByArtist[artistUri] = [];\n            this.artists.push({\n              uri: artistUri,\n              name: image.artist_name\n            });\n          }\n          this.imagesByArtist[artistUri].push(image);\n        }\n\n        if (image.artwork_title) {\n          let artworkUri = encodeURI(image.artwork_title);\n          if (!this.imagesByArtwork[artworkUri]) {\n            this.imagesByArtwork[artworkUri] = [];\n            this.artworks.push({\n              uri: artworkUri,\n              name: image.artwork_title\n            });\n          }\n          this.imagesByArtwork[artworkUri].push(image);\n        }\n\n        if (image.collection) {\n          let collectionUri = encodeURI(image.collection);\n          if (!this.imagesByCollection[collectionUri]) {\n            this.imagesByCollection[collectionUri] = [];\n            this.collections.push({\n              uri: collectionUri,\n              name: image.collection\n            });\n          }\n          this.imagesByCollection[collectionUri].push(image);\n        }\n      });\n    },\n    filter () {\n      if (this.filter) {\n        Object.keys(this.filter).forEach((key) => {\n          let value = this.filter[key];\n\n          if (key === 'artwork_title') {\n            this.artworkFilter = value;\n          }\n\n          if (key === 'artist_name') {\n            this.artistFilter = value;\n          }\n\n          if (key === 'collection') {\n            this.collectionFilter = value;\n          }\n        });\n      }\n    }\n  },\n  methods: {\n    reset () {\n      this.data = [];\n      this.imagesByArtwork = {};\n      this.imagesByArtist = {};\n      this.imagesByCollection = {};\n      this.artworks = {};\n      this.artists = {};\n      this.collections = {};\n    },\n    sortBy: function (key) {\n      this.sortKey = key\n      this.sortOrders[key] = this.sortOrders[key] * -1\n    },\n    triggerLoad: function () {\n      Vue.nextTick(this.$Lazyload.lazyLoadHandler);\n    }\n  },\n  updated () {\n\n  }\n}\n</script>\n\n<style scoped>\n\ntable {\n  /*border: 2px solid #cecece;\n  border-radius: 3px;\n  background-color: #fff;\n  width: 80vw;\n  margin: 24px auto;*/\n}\n\nth {\n  background-color: #cecece;\n  color: #000;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\ntd {\n  background-color: #f9f9f9;\n  min-width: 140px;\n}\n\nth, td {\n  /*min-width: 220px;*/\n  /*padding: 10px 40px;*/\n  /*border: 2px solid #cecece;*/\n}\n\nth.active {\n  color: #fff;\n}\n\nth.active .arrow {\n  opacity: 1;\n}\n\n.arrow {\n  display: inline-block;\n  vertical-align: middle;\n  width: 0;\n  height: 0;\n  margin-left: 5px;\n  opacity: 0.66;\n}\n\n.arrow.asc {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid #fff;\n}\n\n.arrow.dsc {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid #fff;\n}\n\n.img_link {\n  cursor: pointer;\n  width: 100px;\n  text-align: center;\n}\n\n.img_link:hover {\n  opacity: 0.8;\n}\n\n.img_link:active {\n  opacity: 0.5;\n}\n\n.img_link img {\n  max-width: 100px;\n  max-height: 100px;\n}\n\n#search {\n  text-align: center;\n}\n\n.artwork_table .table td, .artwork_table .table th {\n  vertical-align: middle;\n}\n\n.artwork_table .table td.location {\n  text-align: center;\n}\n\n.view_in_book {\n  width: 131px;\n  margin-top: 0.2rem;\n}\n\n.filterer {\n  visibility: hidden;\n}\n\n.table td:hover .filterer {\n  visibility: visible;\n}\n\n.first-nav-item {\n  padding-left: 0;\n}\n\n</style>\n\n<style>\n  .artwork .b-tabs .tab-content {\n    overflow: visible !important;\n  }\n\n  .external_link .icon {\n    visibility: hidden;\n  }\n\n  .external_link:hover .icon {\n    visibility: visible;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Table.vue?4ffcb9ab","<template>\n  <svg version=\"1.1\" :class=\"clazz\" :role=\"label ? 'img' : 'presentation'\" :aria-label=\"label\" :x=\"x\" :y=\"y\" :width=\"width\" :height=\"height\" :viewBox=\"box\" :style=\"style\">\n    <slot>\n      <template v-if=\"icon && icon.paths\">\n        <path v-for=\"path in icon.paths\" v-bind=\"path\"/>\n      </template>\n      <template v-if=\"icon && icon.polygons\">\n        <polygon v-for=\"polygon in icon.polygons\" v-bind=\"polygon\"/>\n      </template>\b\n      <template v-if=\"icon && icon.raw\"><g v-html=\"icon.raw\"></g></template>\n    </slot>\n  </svg>\n</template>\n\n<style>\n.fa-icon {\n  display: inline-block;\n  fill: currentColor;\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-spin {\n  animation: fa-spin 1s 0s infinite linear;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>\n\n<script>\nimport Vue from 'vue'\n\nlet icons = {}\n\nexport default {\n  name: 'icon',\n  props: {\n    name: {\n      type: String,\n      validator (val) {\n        if (val) {\n          if (!(val in icons)) {\n            Vue.util.warn(`Invalid prop: prop \"icon\" is referring to an unregistered icon \"${val}\".` +\n              `\\nPlesase make sure you have imported this icon before using it.`, this)\n            return false\n          }\n          return true\n        }\n        return null\n      }\n    },\n    scale: [Number, String],\n    spin: Boolean,\n    inverse: Boolean,\n    flip: {\n      validator (val) {\n        return val === 'horizontal' || val === 'vertical'\n      }\n    },\n    label: String\n  },\n  data () {\n    return {\n      x: false,\n      y: false,\n      childrenWidth: 0,\n      childrenHeight: 0,\n      outerScale: 1\n    }\n  },\n  computed: {\n    normalizedScale () {\n      let scale = this.scale\n      scale = typeof scale === 'undefined' ? 1 : Number(scale)\n      if (isNaN(scale) || scale <= 0) {\n        Vue.util.warn(`Invalid prop: prop \"scale\" should be a number over 0.`, this)\n        return this.outerScale\n      }\n      return scale * this.outerScale\n    },\n    clazz () {\n      return {\n        'fa-icon': true,\n        'fa-spin': this.spin,\n        'fa-flip-horizontal': this.flip === 'horizontal',\n        'fa-flip-vertical': this.flip === 'vertical',\n        'fa-inverse': this.inverse\n      }\n    },\n    icon () {\n      if (this.name) {\n        return icons[this.name]\n      }\n      return null\n    },\n    box () {\n      if (this.icon) {\n        return `0 0 ${this.icon.width} ${this.icon.height}`\n      }\n      return `0 0 ${this.width} ${this.height}`\n    },\n    ratio () {\n      if (!this.icon) {\n        return 1\n      }\n      let { width, height } = this.icon\n      return Math.max(width, height) / 16\n    },\n    width () {\n      return this.childrenWidth || this.icon && this.icon.width / this.ratio * this.normalizedScale || 0\n    },\n    height () {\n      return this.childrenHeight || this.icon && this.icon.height / this.ratio * this.normalizedScale || 0\n    },\n    style () {\n      if (this.normalizedScale === 1) {\n        return false\n      }\n      return {\n        fontSize: this.normalizedScale + 'em'\n      }\n    }\n  },\n  mounted () {\n    if (this.icon) {\n      return\n    }\n    this.$children.forEach(child => {\n      child.outerScale = this.normalizedScale\n    })\n    let width = 0\n    let height = 0\n    this.$children.forEach(child => {\n      width = Math.max(width, child.width)\n      height = Math.max(height, child.height)\n    })\n    this.childrenWidth = width\n    this.childrenHeight = height\n    this.$children.forEach(child => {\n      child.x = (width - child.width) / 2\n      child.y = (height - child.height) / 2\n    })\n  },\n  register (data) {\n    for (let name in data) {\n      let icon = data[name]\n\n      if (!icon.paths) {\n        icon.paths = []\n      }\n      if (icon.d) {\n        icon.paths.push({ d: icon.d })\n      }\n\n      if (!icon.polygons) {\n        icon.polygons = []\n      }\n      if (icon.points) {\n        icon.polygons.push({ points: icon.points })\n      }\n\n      icons[name] = icon\n    }\n  },\n  icons\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// Icon.vue?8a3472bc","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('svg', {\n    class: _vm.clazz,\n    style: (_vm.style),\n    attrs: {\n      \"version\": \"1.1\",\n      \"role\": _vm.label ? 'img' : 'presentation',\n      \"aria-label\": _vm.label,\n      \"x\": _vm.x,\n      \"y\": _vm.y,\n      \"width\": _vm.width,\n      \"height\": _vm.height,\n      \"viewBox\": _vm.box\n    }\n  }, [_vm._t(\"default\", [(_vm.icon && _vm.icon.paths) ? _vm._l((_vm.icon.paths), function(path) {\n    return _c('path', _vm._b({}, 'path', path))\n  }) : _vm._e(), _vm._v(\" \"), (_vm.icon && _vm.icon.polygons) ? _vm._l((_vm.icon.polygons), function(polygon) {\n    return _c('polygon', _vm._b({}, 'polygon', polygon))\n  }) : _vm._e(), _vm._v(\"\\b\\n    \"), (_vm.icon && _vm.icon.raw) ? [_c('g', {\n    domProps: {\n      \"innerHTML\": _vm._s(_vm.icon.raw)\n    }\n  })] : _vm._e()])], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6888a9df\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./node_modules/vue-awesome/components/Icon.vue\n// module id = 121\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('nav', {\n    staticClass: \"nav section_nav\"\n  }, [_c('div', {\n    staticClass: \"nav-left\"\n  }, [_c('div', {\n    staticClass: \"nav-item first-nav-item\"\n  }, [_c('p', {\n    staticClass: \"control has-icons-right\"\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.filterKey),\n      expression: \"filterKey\"\n    }],\n    staticClass: \"input has-icons-right\",\n    attrs: {\n      \"name\": \"query\"\n    },\n    domProps: {\n      \"value\": (_vm.filterKey)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.filterKey = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon is-small is-right\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"search\",\n      \"title\": \"Search\"\n    }\n  })], 1)])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"nav-right\",\n    staticStyle: {\n      \"overflow\": \"visible\"\n    }\n  }, [_c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artworkFilter),\n      expression: \"!artworkFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.artworkFilter),\n      callback: function($$v) {\n        _vm.artworkFilter = $$v\n      },\n      expression: \"artworkFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artworkFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"picture-o\",\n      \"title\": \"Filter by Artwork\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Artworks\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.artworks), function(artwork) {\n    return _c('b-dropdown-option', {\n      key: artwork.uri,\n      attrs: {\n        \"value\": artwork.name,\n        \"selected\": _vm.artworkFilter === artwork.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(artwork.name)))])\n  })], 2), _vm._v(\" \"), (_vm.artworkFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artworkFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.artworkFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e(), _vm._v(\" \"), _c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artistFilter),\n      expression: \"!artistFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.artistFilter),\n      callback: function($$v) {\n        _vm.artistFilter = $$v\n      },\n      expression: \"artistFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artistFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"user\",\n      \"title\": \"Filter by Artist\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Artist\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.artists), function(artist) {\n    return _c('b-dropdown-option', {\n      key: artist.uri,\n      attrs: {\n        \"value\": artist.name,\n        \"selected\": _vm.artistFilter === artist.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(artist.name)))])\n  })], 2), _vm._v(\" \"), (_vm.artistFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artistFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.artistFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e(), _vm._v(\" \"), _c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.collectionFilter),\n      expression: \"!collectionFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.collectionFilter),\n      callback: function($$v) {\n        _vm.collectionFilter = $$v\n      },\n      expression: \"collectionFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.collectionFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"institution\",\n      \"title\": \"Filter by Collection\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Collection\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.collections), function(collection) {\n    return _c('b-dropdown-option', {\n      key: collection.uri,\n      attrs: {\n        \"value\": collection.name,\n        \"selected\": _vm.collectionFilter === collection.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(collection.name)))])\n  })], 2), _vm._v(\" \"), (_vm.collectionFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.collectionFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.collectionFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e()], 1)]), _vm._v(\" \"), _c('b-table', {\n    staticClass: \"artwork_table\",\n    attrs: {\n      \"data\": _vm.filteredData,\n      \"bordered\": true,\n      \"striped\": true,\n      \"mobile-cards\": true,\n      \"paginated\": true,\n      \"per-page\": 8,\n      \"pagination-simple\": true\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(tb) {\n        return [_c('b-table-column', {\n          attrs: {\n            \"field\": \"thumbnail\",\n            \"label\": \"\",\n            \"width\": \"40\",\n            \"height\": \"130\"\n          }\n        }, [_c('a', {\n          staticClass: \"img_link\",\n          on: {\n            \"click\": function($event) {\n              _vm.$emit('onImageClick', tb.row)\n            }\n          }\n        }, [_c('img', {\n          directives: [{\n            name: \"lazy\",\n            rawName: \"v-lazy\",\n            value: (tb.row['thumbnail']),\n            expression: \"tb.row['thumbnail']\"\n          }]\n        })])]), _vm._v(\" \"), _c('b-table-column', {\n          attrs: {\n            \"field\": \"artwork\",\n            \"label\": \"Artwork\",\n            \"sortable\": \"\"\n          }\n        }, [_vm._v(\"\\n            \" + _vm._s(tb.row['artwork_title']) + \"\\n            \")]), _vm._v(\" \"), _c('b-table-column', {\n          attrs: {\n            \"field\": \"artist\",\n            \"label\": \"Artist\",\n            \"sortable\": \"\"\n          }\n        }, [_vm._v(\"\\n            \" + _vm._s(tb.row['artist_name']) + \"\\n            \")]), _vm._v(\" \"), _c('b-table-column', {\n          staticClass: \"artwork_info\",\n          attrs: {\n            \"field\": \"collection\",\n            \"label\": \"Collection\",\n            \"sortable\": \"\"\n          }\n        }, [_vm._v(\"\\n            \" + _vm._s(tb.row['collection']) + \"\\n            \")]), _vm._v(\" \"), _c('b-table-column', {\n          staticClass: \"location\",\n          attrs: {\n            \"field\": \"page\",\n            \"label\": \"Location\",\n            \"sortable\": \"\",\n            \"width\": \"10\"\n          }\n        }, [(parseInt(tb.row.page)) ? _c('span', [_vm._v(\"pg. \" + _vm._s(tb.row.page))]) : _vm._e(), _vm._v(\" \"), (!parseInt(tb.row.page)) ? _c('span', [_vm._v(_vm._s(tb.row.page))]) : _vm._e()]), _vm._v(\" \"), _c('b-table-column', {\n          attrs: {\n            \"label\": \"View\",\n            \"sortable\": \"\",\n            \"width\": \"30\"\n          }\n        }, [(tb.row.artwork_uri) ? _c('a', {\n          staticClass: \"button is-small\",\n          attrs: {\n            \"href\": tb.row['artwork_uri'],\n            \"target\": \"_blank\"\n          }\n        }, [_c('span', [_vm._v(\"View in Collection\")]), _vm._v(\" \"), _c('b-icon', {\n          staticClass: \"is-small\",\n          attrs: {\n            \"icon\": \"open_in_new\"\n          }\n        })], 1) : _vm._e(), _vm._v(\" \"), _c('a', {\n          staticClass: \"button is-small view_in_book\",\n          on: {\n            \"click\": function($event) {\n              _vm.$emit('onPageClick', tb.row.page)\n            }\n          }\n        }, [_c('span', [_vm._v(\"View in Book\")]), _vm._v(\" \"), _c('b-icon', {\n          staticClass: \"is-small\",\n          attrs: {\n            \"icon\": \"keyboard_arrow_right\"\n          }\n        })], 1)])]\n      }\n    }])\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-31beea36\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Table.vue\n// module id = 122\n// module chunks = 2","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0da80b7f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Grid.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Grid.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0da80b7f\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Grid.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Grid.vue\n// module id = 123\n// module chunks = 2","<template>\n  <div>\n    <nav class=\"nav section_nav\">\n      <div class=\"nav-center\" style=\"overflow: visible\">\n\n        <b-dropdown position=\"is-bottom-left\" v-model=\"artworkFilter\" v-show=\"!artworkFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"artworkFilter = undefined;\">\n            <span class=\"icon is-small\">\n              <icon name=\"picture-o\" title=\"Filter by Artwork\"></icon>\n            </span>\n            <span>Artworks</span>\n            <b-icon icon=\"arrow_drop_down\"></b-icon>\n          </button>\n\n          <b-dropdown-option v-for=\"artwork in artworks\" :key=\"artwork.uri\" :value=\"artwork.name\" :selected=\"artworkFilter === artwork.name\">{{artwork.name | truncate }}</b-dropdown-option>\n        </b-dropdown>\n        <span class=\"dropdown\" v-if=\"artworkFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"artworkFilter = undefined;\">\n            <span>{{artworkFilter}}</span>\n            <b-icon icon=\"close\" class=\"is-small\"></b-icon>\n          </button>\n        </span>\n\n        <b-dropdown position=\"is-bottom-left\" v-model=\"artistFilter\" v-show=\"!artistFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"artistFilter = undefined;\">\n            <span class=\"icon is-small\">\n              <icon name=\"user\" title=\"Filter by Artist\"></icon>\n            </span>\n            <span>Artist</span>\n            <b-icon icon=\"arrow_drop_down\"></b-icon>\n          </button>\n\n          <b-dropdown-option v-for=\"artist in artists\" :key=\"artist.uri\" :value=\"artist.name\" :selected=\"artistFilter === artist.name\">{{artist.name | truncate}}</b-dropdown-option>\n        </b-dropdown>\n        <span class=\"dropdown\" v-if=\"artistFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"artistFilter = undefined;\">\n              <span>{{artistFilter}}</span>\n              <b-icon icon=\"close\" class=\"is-small\"></b-icon>\n          </button>\n        </span>\n\n        <b-dropdown position=\"is-bottom-left\" v-model=\"collectionFilter\" v-show=\"!collectionFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"collectionFilter = undefined;\">\n            <span class=\"icon is-small\">\n              <icon name=\"institution\" title=\"Filter by Collection\"></icon>\n            </span>\n            <span>Collection</span>\n            <b-icon icon=\"arrow_drop_down\"></b-icon>\n          </button>\n\n          <b-dropdown-option v-for=\"collection in collections\" :key=\"collection.uri\" :value=\"collection.name\" :selected=\"collectionFilter === collection.name\">{{collection.name | truncate}}</b-dropdown-option>\n        </b-dropdown>\n        <span class=\"dropdown\" v-if=\"collectionFilter\">\n          <button class=\"button\" slot=\"trigger\" @click=\"collectionFilter = undefined;\">\n              <span>{{collectionFilter}}</span>\n              <b-icon icon=\"close\" class=\"is-small\"></b-icon>\n          </button>\n        </span>\n\n        <!-- <div class=\"nav-item\">\n          <p class=\"control has-icons-right\">\n            <input class=\"input has-icons-right\" name=\"query\" v-model=\"filterKey\">\n            <span class=\"icon is-small is-right\">\n              <icon name=\"search\" title=\"Search\"></icon>\n            </span>\n          </p>\n        </div> -->\n      </div>\n    </nav>\n\n    <div ref=\"container\" class=\"container card_container\">\n      <div class=\"columns card_columns\">\n        <div class=\"column\" v-for=\"images in chunkedData\">\n          <div class=\"card card_wrapper\" v-for=\"image in images\">\n            <div class=\"card-image\">\n              <figure class=\"image\">\n                <a class=\"img_link\" @click=\"$emit('onClick', image)\">\n                  <img class=\"downsampled\" v-lazy=\"image.downsampled || image.asset\" />\n                </a>\n              </figure>\n            </div>\n            <!-- <div class=\"card-footer\">\n              <div class=\"card-footer-item\">\n                <span>{{ image.artwork_title }}</span>\n              </div>\n            </div> -->\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport VueLazyload from 'vue-lazyload'\nimport Vue from 'vue'\n\nimport 'vue-awesome/icons/institution'\nimport 'vue-awesome/icons/user'\nimport 'vue-awesome/icons/picture-o'\n\nimport Icon from 'vue-awesome/components/Icon'\n\nVue.use(VueLazyload);\n\nexport default {\n  name: 'grid',\n  components: {\n    'icon': Icon\n  },\n  props: {\n    'data': {\n      type: Array\n    },\n    'filter': {\n      type: Object,\n      default: undefined\n    }\n  },\n  data () {\n    var sortOrders = {}\n    this.columns = ['thumbnail', 'page', 'artwork_title', 'artist', 'collection'];\n    this.columns.forEach(function (key) {\n      sortOrders[key] = 1;\n    })\n    return {\n      sortKey: '',\n      sortOrders: sortOrders,\n      filterKey: '',\n      // searchQuery: '',\n      gridColumns: 4,\n      imagesByArtwork: {},\n      imagesByArtist: {},\n      imagesByCollection: {},\n      artworks: [],\n      artists: [],\n      collections: [],\n      artistFilter: '',\n      artworkFilter: '',\n      collectionFilter: ''\n    }\n  },\n  created () {\n    window.addEventListener('resize', this.handleResize.bind(this), false);\n    this.$nextTick(() => this.handleResize());\n\n    if (this.filter) {\n      Object.keys(this.filter).forEach((key) => {\n        let value = this.filter[key];\n\n        if (key === 'artwork_title') {\n          this.artworkFilter = value;\n        }\n\n        if (key === 'artist_name') {\n          this.artistFilter = value;\n        }\n\n        if (key === 'collection') {\n          this.collectionFilter = value;\n        }\n      });\n    }\n  },\n  beforeDestory () {\n    window.removeEventListener('resize', this.handleResize);\n  },\n  filters: {\n    capitalize: function (str) {\n      return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    titlecase: function (_str) {\n      var str;\n      str = _str.replace(/_/g, ' ');\n      str = str.replace(/([^\\W_]+[^\\s-]*) */g, (txt) => {\n        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n      });\n\n      return str;\n    },\n    truncate: function (text, stop = 60, clamp) {\n      return text.slice(0, stop) + (stop < text.length ? clamp || '...' : '');\n    }\n  },\n  computed: {\n    filteredData: function () {\n      var sortKey = this.sortKey;\n      var filterKey = this.filterKey && this.filterKey.toLowerCase();\n      var artworkFilter = this.artworkFilter && this.artworkFilter.toLowerCase();\n      var artistFilter = this.artistFilter && this.artistFilter.toLowerCase();\n      var collectionFilter = this.collectionFilter && this.collectionFilter.toLowerCase();\n      var order = this.sortOrders[sortKey] || 1;\n      var data = this.data;\n\n      if (artworkFilter && data) {\n        data = data.filter(function (row) {\n          if (row.artwork_title) {\n            return String(row.artwork_title).toLowerCase().indexOf(artworkFilter) > -1;\n          }\n        });\n      }\n\n      if (artistFilter && data) {\n        data = data.filter(function (row) {\n          if (row.artist_name) {\n            return String(row.artist_name).toLowerCase().indexOf(artistFilter) > -1;\n          }\n        });\n      }\n\n      if (collectionFilter && data) {\n        data = data.filter(function (row) {\n          if (row.collection) {\n            return String(row.collection).toLowerCase().indexOf(collectionFilter) > -1;\n          }\n        });\n      }\n\n      if (filterKey && data) {\n        data = data.filter(function (row) {\n          return Object.keys(row).some(function (key) {\n            return String(row[key]).toLowerCase().indexOf(filterKey) > -1;\n          })\n        })\n      }\n      if (sortKey) {\n        data = data.slice().sort(function (a, b) {\n          a = a[sortKey];\n          b = b[sortKey];\n          return (a === b ? 0 : a > b ? 1 : -1) * order;\n        })\n      }\n      return data;\n    },\n    chunkedData() {\n      let cols = this.gridColumns || 4;\n      let chunked = [];\n\n      for (let c = 0; c < cols; c++) {\n        chunked[c] = [];\n      }\n\n      for (let i = 0; i < this.filteredData.length; i++) {\n        chunked[i % cols].push(this.filteredData[i]);\n      }\n\n      return chunked;\n    }\n  },\n  watch: {\n    data () {\n      this.data.forEach((image) => {\n        if (image.artist_name) {\n          let artistUri = encodeURI(image.artist_name);\n          if (!this.imagesByArtist[artistUri]) {\n            this.imagesByArtist[artistUri] = [];\n            this.artists.push({\n              uri: artistUri,\n              name: image.artist_name\n            });\n          }\n          this.imagesByArtist[artistUri].push(image);\n        }\n\n        if (image.artwork_title) {\n          let artworkUri = encodeURI(image.artwork_title);\n          if (!this.imagesByArtwork[artworkUri]) {\n            this.imagesByArtwork[artworkUri] = [];\n            this.artworks.push({\n              uri: artworkUri,\n              name: image.artwork_title\n            });\n          }\n          this.imagesByArtwork[artworkUri].push(image);\n        }\n\n        if (image.collection) {\n          let collectionUri = encodeURI(image.collection);\n          if (!this.imagesByCollection[collectionUri]) {\n            this.imagesByCollection[collectionUri] = [];\n            this.collections.push({\n              uri: collectionUri,\n              name: image.collection\n            });\n          }\n          this.imagesByCollection[collectionUri].push(image);\n        }\n      });\n    },\n    filter () {\n      if (this.filter) {\n        Object.keys(this.filter).forEach((key) => {\n          let value = this.filter[key];\n\n          if (key === 'artwork_title') {\n            this.artworkFilter = value;\n          }\n\n          if (key === 'artist_name') {\n            this.artistFilter = value;\n          }\n\n          if (key === 'collection') {\n            this.collectionFilter = value;\n          }\n        });\n      }\n    }\n  },\n  methods: {\n    sortBy: function (key) {\n      this.sortKey = key\n      this.sortOrders[key] = this.sortOrders[key] * -1\n    },\n    triggerLoad: function () {\n      Vue.nextTick(this.$Lazyload.lazyLoadHandler)\n    },\n    handleResize () {\n      let width = window.innerWidth;\n\n      this.gridColumns = Math.floor((width - 200) / 200);\n    }\n  }\n}\n</script>\n\n<style>\n.img_link {\n  cursor: pointer;\n}\n\n.img_link:hover {\n  opacity: 0.8;\n}\n\n.img_link:active {\n  opacity: 0.5;\n}\n\n.card_container .image .img_link img {\n  object-fit: cover;\n  max-width: none;\n  width: 100%;\n  height: 100%;\n}\n\n.card_container .card-image figure {\n  width: 200px;\n  max-height: 400px;\n  overflow: hidden;\n  display: block;\n}\n\n.card_container .card {\n  width: 200px;\n  flex-grow: 0;\n  margin-bottom: 24px;\n}\n\n.card_container .card .card-footer {\n  /*display: none;*/\n}\n\n.card_container .card:hover .card-footer {\n  display: block;\n}\n\n.card_container {\n  /*display: flex;\n  flex-direction: row;\n  justify-content: center;*/\n  padding-top: 24px;\n}\n\n.card_columns {\n  justify-content: center;\n}\n\n\n.card_columns .column {\n  flex-grow: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Grid.vue?278137a7","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('nav', {\n    staticClass: \"nav section_nav\"\n  }, [_c('div', {\n    staticClass: \"nav-center\",\n    staticStyle: {\n      \"overflow\": \"visible\"\n    }\n  }, [_c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artworkFilter),\n      expression: \"!artworkFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.artworkFilter),\n      callback: function($$v) {\n        _vm.artworkFilter = $$v\n      },\n      expression: \"artworkFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artworkFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"picture-o\",\n      \"title\": \"Filter by Artwork\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Artworks\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.artworks), function(artwork) {\n    return _c('b-dropdown-option', {\n      key: artwork.uri,\n      attrs: {\n        \"value\": artwork.name,\n        \"selected\": _vm.artworkFilter === artwork.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(artwork.name)))])\n  })], 2), _vm._v(\" \"), (_vm.artworkFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artworkFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.artworkFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e(), _vm._v(\" \"), _c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artistFilter),\n      expression: \"!artistFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.artistFilter),\n      callback: function($$v) {\n        _vm.artistFilter = $$v\n      },\n      expression: \"artistFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artistFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"user\",\n      \"title\": \"Filter by Artist\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Artist\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.artists), function(artist) {\n    return _c('b-dropdown-option', {\n      key: artist.uri,\n      attrs: {\n        \"value\": artist.name,\n        \"selected\": _vm.artistFilter === artist.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(artist.name)))])\n  })], 2), _vm._v(\" \"), (_vm.artistFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.artistFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.artistFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e(), _vm._v(\" \"), _c('b-dropdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.collectionFilter),\n      expression: \"!collectionFilter\"\n    }],\n    attrs: {\n      \"position\": \"is-bottom-left\"\n    },\n    model: {\n      value: (_vm.collectionFilter),\n      callback: function($$v) {\n        _vm.collectionFilter = $$v\n      },\n      expression: \"collectionFilter\"\n    }\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.collectionFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"institution\",\n      \"title\": \"Filter by Collection\"\n    }\n  })], 1), _vm._v(\" \"), _c('span', [_vm._v(\"Collection\")]), _vm._v(\" \"), _c('b-icon', {\n    attrs: {\n      \"icon\": \"arrow_drop_down\"\n    }\n  })], 1), _vm._v(\" \"), _vm._l((_vm.collections), function(collection) {\n    return _c('b-dropdown-option', {\n      key: collection.uri,\n      attrs: {\n        \"value\": collection.name,\n        \"selected\": _vm.collectionFilter === collection.name\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncate\")(collection.name)))])\n  })], 2), _vm._v(\" \"), (_vm.collectionFilter) ? _c('span', {\n    staticClass: \"dropdown\"\n  }, [_c('button', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.collectionFilter = undefined;\n      }\n    },\n    slot: \"trigger\"\n  }, [_c('span', [_vm._v(_vm._s(_vm.collectionFilter))]), _vm._v(\" \"), _c('b-icon', {\n    staticClass: \"is-small\",\n    attrs: {\n      \"icon\": \"close\"\n    }\n  })], 1)]) : _vm._e()], 1)]), _vm._v(\" \"), _c('div', {\n    ref: \"container\",\n    staticClass: \"container card_container\"\n  }, [_c('div', {\n    staticClass: \"columns card_columns\"\n  }, _vm._l((_vm.chunkedData), function(images) {\n    return _c('div', {\n      staticClass: \"column\"\n    }, _vm._l((images), function(image) {\n      return _c('div', {\n        staticClass: \"card card_wrapper\"\n      }, [_c('div', {\n        staticClass: \"card-image\"\n      }, [_c('figure', {\n        staticClass: \"image\"\n      }, [_c('a', {\n        staticClass: \"img_link\",\n        on: {\n          \"click\": function($event) {\n            _vm.$emit('onClick', image)\n          }\n        }\n      }, [_c('img', {\n        directives: [{\n          name: \"lazy\",\n          rawName: \"v-lazy\",\n          value: (image.downsampled || image.asset),\n          expression: \"image.downsampled || image.asset\"\n        }],\n        staticClass: \"downsampled\"\n      })])])])])\n    }))\n  }))])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0da80b7f\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Grid.vue\n// module id = 126\n// module chunks = 2","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7afe1999\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Outline.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Outline.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7afe1999\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Outline.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-7afe1999\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Outline.vue\n// module id = 127\n// module chunks = 2","<template>\n  <ul>\n    <li v-for=\"item in pageList\">\n      <a class=\"outline_link\" :class=\"{ active: item === activeItem }\" @click=\"handleLink(item)\">\n        {{ item.title || '' }}\n        <outline v-if=\"item.items.length\" :data=\"item.items\" @onClick=\"handleLink\"/>\n      </a>\n    </li>\n  </ul>\n</template>\n\n<script>\nexport default {\n  name: 'outline',\n  components: {},\n  props: {\n    'data': {\n      type: Array\n    },\n    'page': {\n      type: Number,\n      default: undefined\n    },\n    'pdf': {\n      type: Object,\n      default: undefined\n    }\n  },\n  data () {\n    return {\n      pageList: [],\n      activeItem: undefined\n    };\n  },\n  mounted () {\n    if (this.data) {\n      this.processData();\n    }\n  },\n  methods: {\n    processData () {\n      this.pageList = [];\n      this.data.forEach((item, i) => {\n        let li = Object.assign({}, item);\n        this.pageList.push(li);\n        this.pdf.getPageIndex(item.dest[0]).then((pg) => {\n          li.page = pg;\n\n          if (i === this.data.length - 1) {\n            this.checkActive();\n          }\n        });\n      });\n    },\n    handleLink (item) {\n      this.$emit('onClick', item.dest);\n    },\n    checkActive () {\n      for (let item of this.pageList) {\n        if (item.page > this.page) {\n          this.$emit('current', this.activeItem.title);\n          break;\n        } else {\n          this.activeItem = item;\n        }\n      }\n    }\n  },\n  watch: {\n    data () {\n      this.processData();\n    },\n    page () {\n      this.checkActive();\n    }\n  }\n}\n</script>\n\n<style scoped>\n\nul {\n  /*border-top: 1px solid #ccc;*/\n  padding: 0 20px 20px 52px;\n}\n\nli {\n  margin: 0 0 8px 0;\n}\n\nli a {\n  cursor: pointer;\n  color: #4c4c4c;\n}\n\nli a:active, li a.active {\n  color: #000;\n  text-decoration: underline;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Outline.vue?7b81d1d5","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('ul', _vm._l((_vm.pageList), function(item) {\n    return _c('li', [_c('a', {\n      staticClass: \"outline_link\",\n      class: {\n        active: item === _vm.activeItem\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.handleLink(item)\n        }\n      }\n    }, [_vm._v(\"\\n      \" + _vm._s(item.title || '') + \"\\n      \"), (item.items.length) ? _c('outline', {\n      attrs: {\n        \"data\": item.items\n      },\n      on: {\n        \"onClick\": _vm.handleLink\n      }\n    }) : _vm._e()], 1)])\n  }))\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7afe1999\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Outline.vue\n// module id = 139\n// module chunks = 2","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1b7876ca\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Detail.vue\")\n}\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Detail.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1b7876ca\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Detail.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Detail.vue\n// module id = 140\n// module chunks = 2","<template>\n  <div class=\"card detail_card\" v-if=\"currentDetail\">\n    <div class=\"card-image\">\n      <figure class=\"image_detail\">\n        <a :href=\"currentDetail.artwork_uri\">\n          <img :src=\"currentDetail.asset\" v-if=\"!currentDetail.copyright\" />\n          <img :src=\"currentDetail.downsampled\" v-if=\"currentDetail.copyright\" />\n        </a>\n      </figure>\n    </div>\n    <div class=\"card-content\">\n      <div class=\"content\">\n        <h1 class=\"title\" :class=\"{'hover': hoverArtist}\">\n          {{currentDetail.artwork_title}}\n          <!-- <a @click=\"$emit('infoSelected', {'artwork_title': currentDetail.artwork_title})\" class=\"button is-small\" v-if=\"imagesByArtwork[encodeURI(currentDetail.artwork_title)] && imagesByArtwork[encodeURI(currentDetail.artwork_title)].length > 1\">\n            <span class=\"icon is-small\">\n              <icon name=\"picture-o\" title=\"Filter by Artist\"></icon>\n            </span>\n            <span>\n            {{ imagesByArtwork[encodeURI(currentDetail.artwork_title)] && imagesByArtwork[encodeURI(currentDetail.artwork_title)].length }}\n            </span>\n          </a> -->\n        </h1>\n        <h2 class=\"subtitle\" :class=\"{'hover': hoverArtwork}\">\n          <!-- <a :href=\"currentDetail.artist_uri\" @click=\"artistLookup\">{{currentDetail.artist_name}}</a> -->\n          <!-- <a @click=\"$emit('infoSelected', {'artist_name': currentDetail.artist_name})\">{{currentDetail.artist_name}}</a> -->\n          {{currentDetail.artist_name}}\n          <!-- <a @click=\"$emit('infoSelected', {'artist_name': currentDetail.artist_name})\" class=\"button is-small\" v-if=\"imagesByArtist[encodeURI(currentDetail.artist_name)] && imagesByArtist[encodeURI(currentDetail.artist_name)].length > 1\">\n            <span class=\"icon is-small\">\n              <icon name=\"user\" title=\"Filter by Artist\"></icon>\n            </span>\n            <span>\n              {{ imagesByArtist[encodeURI(currentDetail.artist_name)] && imagesByArtist[encodeURI(currentDetail.artist_name)].length }}\n            </span>\n          </a> -->\n        </h2>\n        <p v-if=\"currentDetail.collection\" :class=\"{'hover': hoverCollection}\">\n          <!-- <a :href=\"currentDetail.collection_uri\">{{currentDetail.collection}}</a> -->\n          <!-- <a @click=\"$emit('infoSelected', {'collection': currentDetail.collection})\">{{currentDetail.collection}}</a> -->\n          {{currentDetail.collection}}\n          <!-- <a @click=\"$emit('infoSelected', {'collection': currentDetail.collection})\" class=\"button is-small\" v-if=\"imagesByCollection[encodeURI(currentDetail.collection)] && imagesByCollection[encodeURI(currentDetail.collection)].length > 1\">\n            <span class=\"icon is-small\">\n              <icon name=\"institution\" title=\"Filter by Artist\"></icon>\n            </span>\n            <span>\n              {{ imagesByCollection[encodeURI(currentDetail.collection)] && imagesByCollection[encodeURI(currentDetail.collection)].length }}\n            </span>\n          </a> -->\n        </p>\n        <p class=\"moreby\">\n          <span>Images in the book:&nbsp;</span>\n          <a @click=\"$emit('infoSelected', {'artist_name': currentDetail.artist_name})\">\n            <span>\n              {{ imagesByArtwork[encodeURI(currentDetail.artwork_title)] && imagesByArtwork[encodeURI(currentDetail.artwork_title)].length }} of this artwork\n            </span>\n            <span class=\"icon is-small\">\n              <icon name=\"picture-o\" title=\"Filter by Artist\"></icon>\n            </span>\n          </a>\n          <span class=\"spacer\">/</span>\n          <a @click=\"$emit('infoSelected', {'artist_name': currentDetail.artist_name})\">\n            <span>\n              {{ imagesByArtist[encodeURI(currentDetail.artist_name)] && imagesByArtist[encodeURI(currentDetail.artist_name)].length }} by this artist\n            </span>\n            <span class=\"icon is-small\">\n              <icon name=\"user\" title=\"Filter by Artist\"></icon>\n            </span>\n          </a>\n          <span class=\"spacer\">/</span>\n          <a @click=\"$emit('infoSelected', {'artist_name': currentDetail.artist_name})\">\n            <span>\n              {{ imagesByCollection[encodeURI(currentDetail.collection)] && imagesByCollection[encodeURI(currentDetail.collection)].length }} from this collection\n            </span>\n            <span class=\"icon is-small\">\n              <icon name=\"institution\" title=\"Filter by Artist\"></icon>\n            </span>\n          </a>\n        </p>\n      </div>\n\n    </div>\n    <footer class=\"card-footer\">\n    <p class=\"card-footer-item\" v-if=\"currentDetail.artwork_uri\">\n      <span>\n        View in <a :href=\"currentDetail.artwork_uri\" target=\"_blank\">Collection</a>\n      </span>\n    </p>\n    <p class=\"card-footer-item\">\n      <span>\n        View in <a @click=\"onPageSelected(currentDetail.page)\">Book</a>\n      </span>\n    </p>\n  </footer>\n\n  <div id=\"prevDetail\" class=\"detail_arrow\" @click=\"this.prevDetail\">‹</div>\n  <div id=\"nextDetail\" class=\"detail_arrow\" @click=\"this.nextDetail\">›</div>\n  </div>\n\n  <!-- <section class=\"box\" v-if=\"currentDetail\">\n    <div class=\"image_detail\">\n      <img :src=\"currentDetail.asset\" v-if=\"!currentDetail.copyright\" />\n      <img :src=\"currentDetail.downsampled\" v-if=\"currentDetail.copyright\" />\n      <p><a :href=\"currentDetail.collection_uri\">{{currentDetail.collection}}</a></p>\n    </div>\n    <div class=\"image_info\" v-if=\"currentDetail.artwork_title\">\n      <h1>{{currentDetail.artwork_title}}</h1>\n\n      <h4><a :href=\"currentDetail.artwork_uri\">{{currentDetail.artwork_uri}}</a></h4>\n      <aside v-if=\"this.imagesByArtwork[encodeURI(currentDetail.artwork_title)].length > 1\">\n        <h5>Also in this book</h5>\n        <ul class=\"related_images\">\n          <li v-for=\"relatedImage in this.imagesByArtwork[encodeURI(currentDetail.artwork_title)]\" v-if=\"currentDetail != relatedImage\">\n            <a class=\"related_img_link\" @click=\"currentDetail = relatedImage\">\n              <img :src=\"relatedImage.thumbnail\" />\n              <span>{{ relatedImage.page_label || relatedImage.page }}</span>\n            </a>\n          </li>\n        </ul>\n      </aside>\n\n      <h2>\n        <a :href=\"currentDetail.artist_uri\" @click=\"artistLookup\">{{currentDetail.artist_name}}</a>\n      </h2>\n      <aside v-if=\"this.imagesByArtist[encodeURI(currentDetail.artist_name)].length > 1\">\n        <h5>Also in this book</h5>\n        <ul class=\"related_images\">\n          <li v-for=\"relatedImage in this.imagesByArtist[encodeURI(currentDetail.artist_name)]\"\n              v-if=\"currentDetail != relatedImage && (imagesByArtwork[encodeURI(currentDetail.artwork_title)] && imagesByArtwork[encodeURI(currentDetail.artwork_title)].indexOf(relatedImage) === -1)\">\n            <a class=\"related_img_link\" @click=\"currentDetail = relatedImage\">\n              <img :src=\"relatedImage.thumbnail\" />\n              <span>{{ relatedImage.page_label || relatedImage.page }}</span>\n            </a>\n          </li>\n        </ul>\n      </aside>\n\n    </div>\n    <a class=\"detail_view\" @click=\"onPageSelected(currentDetail.page);\">View in Book</a>\n    <div id=\"prevDetail\" class=\"detail_arrow\" @click=\"this.prevDetail\">‹</div>\n    <div id=\"nextDetail\" class=\"detail_arrow\" @click=\"this.nextDetail\">›</div>\n    <a class=\"detail_close\" @click=\"onDetailClosed\">Close</a>\n  </section> -->\n</template>\n\n<script>\nimport 'whatwg-fetch'\nimport 'vue-awesome/icons/institution'\nimport 'vue-awesome/icons/user'\nimport 'vue-awesome/icons/picture-o'\n\nimport Icon from 'vue-awesome/components/Icon'\n\nexport default {\n  name: 'Detail',\n  components: {\n    'icon': Icon\n  },\n  props: {\n    'image': {\n    },\n    'manifest': {\n      type: Object\n    }\n  },\n  data () {\n    return {\n      images: [],\n      imagesById: {},\n      imagesByArtwork: {},\n      imagesByArtist: {},\n      imagesByCollection: {},\n      currentDetail: undefined,\n      hoverArtwork: false,\n      hoverArtist: false,\n      hoverCollection: false\n    }\n  },\n  created () {\n    if (this.manifest) {\n      this.loaded();\n    }\n    if (this.image) {\n      let imageRef;\n      if (typeof this.image === 'string') {\n        imageRef = this.image;\n      } else {\n        imageRef = this.imageRef(this.image);\n      }\n      this.currentDetail = this.imagesById[imageRef];\n    } else {\n      this.currentDetail = undefined;\n    }\n  },\n  watch: {\n    manifest () {\n      this.loaded();\n    },\n    image () {\n      let imageRef;\n      if (this.image) {\n        if (typeof this.image === 'string') {\n          imageRef = this.image;\n        } else {\n          imageRef = this.imageRef(this.image);\n        }\n        this.currentDetail = this.imagesById[imageRef];\n\n        if (!this.currentDetail) {\n          this.$emit('closed');\n        }\n      } else {\n        this.currentDetail = undefined;\n      }\n    },\n    currentDetail () {\n      let imageRef;\n      if (this.currentDetail) {\n        imageRef = this.imageRef(this.currentDetail);\n        this.$emit('displayed', imageRef);\n      } else {\n        this.$emit('closed');\n      }\n    }\n  },\n  methods: {\n    imageRef (image) {\n      return `img_p${image.page - 1}_${image.location}`;\n    },\n    reset () {\n      this.images = [];\n      this.imagesById = {};\n      this.imagesByArtwork = {};\n      this.imagesByArtist = {};\n      this.imagesByCollection = {};\n    },\n    loaded () {\n      if (!this.manifest || !this.manifest.images) {\n        return;\n      }\n      this.images = this.manifest.images;\n\n      this.images.forEach((image) => {\n        let ref = this.imageRef(image);\n        this.imagesById[ref] = image;\n\n        if (image.artwork_title) {\n          let artworkUri = encodeURI(image.artwork_title);\n          if (!this.imagesByArtwork[artworkUri]) {\n            this.imagesByArtwork[artworkUri] = [];\n          }\n          this.imagesByArtwork[artworkUri].push(image);\n        }\n\n        if (image.artist_name) {\n          let artistUri = encodeURI(image.artist_name);\n          if (!this.imagesByArtist[artistUri]) {\n            this.imagesByArtist[artistUri] = [];\n          }\n          this.imagesByArtist[artistUri].push(image);\n        }\n\n        if (image.collection) {\n          let collectionUri = encodeURI(image.collection);\n          if (!this.imagesByCollection[collectionUri]) {\n            this.imagesByCollection[collectionUri] = [];\n          }\n          this.imagesByCollection[collectionUri].push(image);\n        }\n      });\n    },\n    onPageSelected (page) {\n      this.$emit('pageSelected', page);\n      // this.currentDetail = undefined;\n    },\n    nextDetail () {\n      const index = this.images.indexOf(this.currentDetail);\n      if (index + 1 < this.images.length) {\n        this.currentDetail = this.images[index + 1];\n      }\n    },\n    prevDetail () {\n      const index = this.images.indexOf(this.currentDetail);\n      if (index - 1 >= 0) {\n        this.currentDetail = this.images[index - 1];\n      }\n    },\n    onDetailClosed () {\n      this.currentDetail = undefined;\n      this.$emit('closed');\n    },\n    artistLookup (e) {\n      let uri = this.currentDetail.artist_uri;\n      if (uri.indexOf('.json') === uri.length - 5) {\n        fetch(uri)\n          .then((response) => {\n            return response.json()\n          })\n          .then((artistJson) => {\n            this.currentDetail.artist_json = artistJson;\n            console.log(artistJson);\n          })\n          .catch((err) => console.error(err));\n\n        e.preventDefault();\n      }\n    }\n  }\n}\n</script>\n\n<style>\n\n.detail_card.card {\n  box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n  max-width: 50vw;\n}\n\n.detail_card .content {\n  /*max-width: 40vw;*/\n}\n\n/*.related_images {\n  list-style: none;\n  padding: 0;\n}\n\n.related_images li {\n  display: inline-block;\n  margin-right: 12px;\n}\n\n.related_images img {\n  display: block;\n}\n\n.related_images span {\n  display: block;\n  text-align: center;\n}\n\n.related_images li a {\n  cursor: pointer;\n}*/\n\n.detail_arrow {\n  position: fixed;\n  top: 50%;\n  margin-top: -32px;\n  font-size: 64px;\n  color: #E2E2E2;\n  font-family: arial, sans-serif;\n  font-weight: bold;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n}\n\n#prevDetail {\n  left: 20%;\n}\n\n#nextDetail {\n  right: 20%;\n}\n\n.image_detail {\n  background-color: #1d1d1d;\n}\n\n.image_detail a {\n  overflow: hidden;\n  display: block;\n}\n\n.image_detail img {\n  max-width: 100%;\n  max-height: calc(100vh - 360px);\n  display: block;\n  margin: 0 auto;\n}\n\n.detail_card .card-content {\n  position: relative;\n}\n\n.detail_card .card-content .content .button {\n  vertical-align: middle;\n  position: absolute;\n  right: 1.5rem;\n  font-style: normal !important;\n}\n\n.detail_card .card-content .content h1.hover,\n.detail_card .card-content .content h2.hover,\n.detail_card .card-content .content p.hover {\n  text-decoration: underline;\n}\n\n.detail_card .card-content .content .subtitle {\n  font-style: italic;\n}\n\n.spacer {\n  padding: 0 .25rem;\n}\n\n.moreby {\n  color: #777777;\n  text-align: center;\n  font-size: 0.75rem;\n}\n/*.image_info {\n  color: #eee;\n  margin-left: 40px;\n  min-width: 40vw;\n}\n\n.image_info h1 {\n  font-size: 34px;\n  font-weight: bold;\n}\n\n.image_info h2 {\n  font-size: 24px;\n}\n\n.image_info h3 {\n  font-size: 24px;\n}\n\n.image_info h4 {\n  margin: 0 0 40px 0;\n}\n\n.detail_close {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 10px 10px 0 0;\n  cursor: pointer;\n}\n\n.detail_view {\n  position: absolute;\n  top: 0;\n  right: 50px;\n  padding: 10px 10px 0 0;\n  cursor: pointer;\n}\n\n\na {\n  color: #42b983;\n}*/\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Detail.vue?5ae1ff14","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.currentDetail) ? _c('div', {\n    staticClass: \"card detail_card\"\n  }, [_c('div', {\n    staticClass: \"card-image\"\n  }, [_c('figure', {\n    staticClass: \"image_detail\"\n  }, [_c('a', {\n    attrs: {\n      \"href\": _vm.currentDetail.artwork_uri\n    }\n  }, [(!_vm.currentDetail.copyright) ? _c('img', {\n    attrs: {\n      \"src\": _vm.currentDetail.asset\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.currentDetail.copyright) ? _c('img', {\n    attrs: {\n      \"src\": _vm.currentDetail.downsampled\n    }\n  }) : _vm._e()])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"card-content\"\n  }, [_c('div', {\n    staticClass: \"content\"\n  }, [_c('h1', {\n    staticClass: \"title\",\n    class: {\n      'hover': _vm.hoverArtist\n    }\n  }, [_vm._v(\"\\n        \" + _vm._s(_vm.currentDetail.artwork_title) + \"\\n        \")]), _vm._v(\" \"), _c('h2', {\n    staticClass: \"subtitle\",\n    class: {\n      'hover': _vm.hoverArtwork\n    }\n  }, [_vm._v(\"\\n        \" + _vm._s(_vm.currentDetail.artist_name) + \"\\n        \")]), _vm._v(\" \"), (_vm.currentDetail.collection) ? _c('p', {\n    class: {\n      'hover': _vm.hoverCollection\n    }\n  }, [_vm._v(\"\\n        \" + _vm._s(_vm.currentDetail.collection) + \"\\n        \")]) : _vm._e(), _vm._v(\" \"), _c('p', {\n    staticClass: \"moreby\"\n  }, [_c('span', [_vm._v(\"Images in the book: \")]), _vm._v(\" \"), _c('a', {\n    on: {\n      \"click\": function($event) {\n        _vm.$emit('infoSelected', {\n          'artist_name': _vm.currentDetail.artist_name\n        })\n      }\n    }\n  }, [_c('span', [_vm._v(\"\\n            \" + _vm._s(_vm.imagesByArtwork[encodeURI(_vm.currentDetail.artwork_title)] && _vm.imagesByArtwork[encodeURI(_vm.currentDetail.artwork_title)].length) + \" of this artwork\\n          \")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"picture-o\",\n      \"title\": \"Filter by Artist\"\n    }\n  })], 1)]), _vm._v(\" \"), _c('span', {\n    staticClass: \"spacer\"\n  }, [_vm._v(\"/\")]), _vm._v(\" \"), _c('a', {\n    on: {\n      \"click\": function($event) {\n        _vm.$emit('infoSelected', {\n          'artist_name': _vm.currentDetail.artist_name\n        })\n      }\n    }\n  }, [_c('span', [_vm._v(\"\\n            \" + _vm._s(_vm.imagesByArtist[encodeURI(_vm.currentDetail.artist_name)] && _vm.imagesByArtist[encodeURI(_vm.currentDetail.artist_name)].length) + \" by this artist\\n          \")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"user\",\n      \"title\": \"Filter by Artist\"\n    }\n  })], 1)]), _vm._v(\" \"), _c('span', {\n    staticClass: \"spacer\"\n  }, [_vm._v(\"/\")]), _vm._v(\" \"), _c('a', {\n    on: {\n      \"click\": function($event) {\n        _vm.$emit('infoSelected', {\n          'artist_name': _vm.currentDetail.artist_name\n        })\n      }\n    }\n  }, [_c('span', [_vm._v(\"\\n            \" + _vm._s(_vm.imagesByCollection[encodeURI(_vm.currentDetail.collection)] && _vm.imagesByCollection[encodeURI(_vm.currentDetail.collection)].length) + \" from this collection\\n          \")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"institution\",\n      \"title\": \"Filter by Artist\"\n    }\n  })], 1)])])])]), _vm._v(\" \"), _c('footer', {\n    staticClass: \"card-footer\"\n  }, [(_vm.currentDetail.artwork_uri) ? _c('p', {\n    staticClass: \"card-footer-item\"\n  }, [_c('span', [_vm._v(\"\\n      View in \"), _c('a', {\n    attrs: {\n      \"href\": _vm.currentDetail.artwork_uri,\n      \"target\": \"_blank\"\n    }\n  }, [_vm._v(\"Collection\")])])]) : _vm._e(), _vm._v(\" \"), _c('p', {\n    staticClass: \"card-footer-item\"\n  }, [_c('span', [_vm._v(\"\\n      View in \"), _c('a', {\n    on: {\n      \"click\": function($event) {\n        _vm.onPageSelected(_vm.currentDetail.page)\n      }\n    }\n  }, [_vm._v(\"Book\")])])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"detail_arrow\",\n    attrs: {\n      \"id\": \"prevDetail\"\n    },\n    on: {\n      \"click\": this.prevDetail\n    }\n  }, [_vm._v(\"‹\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"detail_arrow\",\n    attrs: {\n      \"id\": \"nextDetail\"\n    },\n    on: {\n      \"click\": this.nextDetail\n    }\n  }, [_vm._v(\"›\")])]) : _vm._e()\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1b7876ca\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Detail.vue\n// module id = 143\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('link', {\n    attrs: {\n      \"rel\": \"stylesheet\",\n      \"href\": \"//fonts.googleapis.com/icon?family=Material+Icons\"\n    }\n  }), _vm._v(\" \"), _c('nav', {\n    staticClass: \"nav fixed\",\n    class: {\n      'open': _vm.navOpen || _vm.outlineOpen || _vm.artworkOpen\n    }\n  }, [_c('div', {\n    staticClass: \"nav-left\"\n  }, [_c('a', {\n    staticClass: \"nav-item\",\n    on: {\n      \"click\": function($event) {\n        _vm.outlineOpen = !_vm.outlineOpen;\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon\"\n  }, [(!_vm.outlineOpen) ? _c('icon', {\n    attrs: {\n      \"name\": \"bars\",\n      \"title\": \"Open Navigation\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.outlineOpen) ? _c('icon', {\n    attrs: {\n      \"name\": \"close\",\n      \"title\": \"Close Navigation\"\n    }\n  }) : _vm._e()], 1)]), _vm._v(\" \"), _c('a', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artworkOpen && !_vm.showSearch),\n      expression: \"!artworkOpen && !showSearch\"\n    }],\n    staticClass: \"nav-item\"\n  }, [_c('span', {\n    staticClass: \"icon\",\n    on: {\n      \"click\": function($event) {\n        _vm.showSearch = !_vm.showSearch\n      }\n    }\n  }, [(!_vm.showSearch) ? _c('icon', {\n    attrs: {\n      \"name\": \"search\",\n      \"title\": \"search\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.showSearch) ? _c('icon', {\n    attrs: {\n      \"name\": \"close\",\n      \"title\": \"search\"\n    }\n  }) : _vm._e()], 1)]), _vm._v(\" \"), (_vm.showSearch && !_vm.artworkOpen) ? _c('div', {\n    staticClass: \"nav-item\"\n  }, [_c('div', {\n    staticClass: \"field has-addons\"\n  }, [_c('p', {\n    staticClass: \"control has-icons-right\",\n    attrs: {\n      \"id\": \"matchCount\"\n    }\n  }, [_c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.query),\n      expression: \"query\"\n    }],\n    staticClass: \"input has-icons-right\",\n    attrs: {\n      \"name\": \"query\",\n      \"results\": \"5\",\n      \"placeholder\": \"Search\"\n    },\n    domProps: {\n      \"value\": (_vm.query)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.query = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), (_vm.matchCount) ? _c('span', {\n    staticClass: \"icon is-small is-right\"\n  }, [_vm._v(_vm._s(_vm.currentMatchIndex) + \" of \" + _vm._s(_vm.matchCount))]) : _vm._e()]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": _vm.prevMatch\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"chevron-left\",\n      \"title\": \"Prev Match\"\n    }\n  })], 1)])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": _vm.nextMatch\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"chevron-right\",\n      \"title\": \"Next Match\"\n    }\n  })], 1)])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.showSearch = false;\n        _vm.query = ''\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"close\",\n      \"title\": \"Close Search\"\n    }\n  })], 1)])])])]) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"nav-center\"\n  }, [(!_vm.artworkOpen) ? _c('div', {\n    staticClass: \"nav-item\"\n  }, [(!_vm.current) ? _c('span', [_vm._v(_vm._s(_vm.title))]) : _vm._e(), _vm._v(\" \"), (_vm.current) ? _c('span', [_vm._v(\"\\n           \" + _vm._s(_vm.shortTitle)), _c('icon', {\n    staticClass: \"navbar-breadcrumb\",\n    attrs: {\n      \"name\": \"caret-right\"\n    }\n  }), _vm._v(_vm._s(_vm.current) + \"\\n        \")], 1) : _vm._e()]) : _vm._e(), _vm._v(\" \"), (_vm.artworkOpen) ? _c('div', {\n    staticClass: \"nav-item\"\n  }, [_vm._v(\"\\n        \" + _vm._s(_vm.shortTitle)), _c('icon', {\n    staticClass: \"navbar-breadcrumb\",\n    attrs: {\n      \"name\": \"caret-right\"\n    }\n  }), _vm._v(\"Artworks\\n      \")], 1) : _vm._e()]), _vm._v(\" \"), _c('div', {\n    staticClass: \"nav-right\"\n  }, [_c('a', {\n    staticClass: \"nav-item\",\n    on: {\n      \"click\": function($event) {\n        _vm.artworkOpen = !_vm.artworkOpen;\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon\"\n  }, [(!_vm.artworkOpen) ? _c('icon', {\n    attrs: {\n      \"name\": \"picture-o\",\n      \"title\": \"Artwork\"\n    }\n  }) : _vm._e(), _vm._v(\" \"), (_vm.artworkOpen) ? _c('icon', {\n    attrs: {\n      \"name\": \"book\",\n      \"title\": \"Book\"\n    }\n  }) : _vm._e()], 1)])])]), _vm._v(\" \"), _c('section', {\n    ref: \"main\",\n    staticClass: \"main\"\n  }, [_c('PDF', {\n    ref: \"pdf\",\n    attrs: {\n      \"id\": \"pdf\",\n      \"src\": this.manifest.pdf,\n      \"page\": _vm.page,\n      \"width\": this.width,\n      \"height\": this.height,\n      \"spreads\": _vm.spreads,\n      \"onImageClicked\": this.onImageClicked,\n      \"onOutlineReady\": this.onOutlineReady,\n      \"query\": _vm.query,\n      \"zoom\": _vm.zoomLevel\n    },\n    on: {\n      \"loaded\": _vm.loaded,\n      \"pageChanged\": this.onPageChanged,\n      \"found\": this.onFound,\n      \"match\": this.onMatch\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"arrow\",\n    attrs: {\n      \"id\": \"prev\"\n    },\n    on: {\n      \"click\": this.prev\n    }\n  }, [_c('span', {\n    staticClass: \"icon\"\n  }, [_c('icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.outlineOpen),\n      expression: \"!outlineOpen\"\n    }],\n    attrs: {\n      \"name\": \"chevron-left\",\n      \"title\": \"Prev\"\n    }\n  })], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"arrow\",\n    attrs: {\n      \"id\": \"next\"\n    },\n    on: {\n      \"click\": this.next\n    }\n  }, [_c('span', {\n    staticClass: \"icon\"\n  }, [_c('icon', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.outlineOpen),\n      expression: \"!outlineOpen\"\n    }],\n    attrs: {\n      \"name\": \"chevron-right\",\n      \"title\": \"Next\"\n    }\n  })], 1)]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.artworkOpen),\n      expression: \"!artworkOpen\"\n    }],\n    staticClass: \"floater\",\n    class: {\n      'open': _vm.navOpen\n    }\n  }, [_c('div', {\n    staticClass: \"field has-addons is-pulled-left\"\n  }, [_c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": _vm.zoomOut\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"search-minus\",\n      \"title\": \"Zoom Out\"\n    }\n  })], 1)])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control zoom_input\"\n  }, [_c('input', {\n    staticClass: \"input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": Math.round(_vm.zoomLevel * 100) + '%'\n    }\n  })]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": _vm.zoomIn\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"search-plus\",\n      \"title\": \"Zoom In\"\n    }\n  })], 1)])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"field has-addons is-pulled-left\"\n  }, [_c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    attrs: {\n      \"disabled\": _vm.spreads ? null : 'disabled'\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.setSpreads(false)\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"file-o\",\n      \"title\": \"Single\"\n    }\n  })], 1)])]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    attrs: {\n      \"disabled\": _vm.spreads ? 'disabled' : null\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.setSpreads(true)\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"columns\",\n      \"title\": \"Spread\"\n    }\n  })], 1)])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"field has-addons is-pulled-left\"\n  }, [_c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": this.prev\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"chevron-left\",\n      \"title\": \"Prev\"\n    }\n  })], 1)])]), _vm._v(\" \"), _c('p', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.editingPage),\n      expression: \"!editingPage\"\n    }],\n    staticClass: \"control page_input\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": function($event) {\n        _vm.startPageEditing()\n      }\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.displayedPages) + \" / \" + _vm._s(_vm.totalPages) + \"\\n          \")])]), _vm._v(\" \"), _c('p', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.editingPage),\n      expression: \"editingPage\"\n    }],\n    staticClass: \"control page_input\"\n  }, [_c('input', {\n    ref: \"pageEditor\",\n    staticClass: \"input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    on: {\n      \"keyup\": [function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        (function (v) { return _vm.onPageEdited(v); })($event)\n      }, function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"escape\")) { return null; }\n        _vm.editingPage = false\n      }]\n    }\n  })]), _vm._v(\" \"), _c('p', {\n    staticClass: \"control\"\n  }, [_c('a', {\n    staticClass: \"button\",\n    on: {\n      \"click\": this.next\n    }\n  }, [_c('span', {\n    staticClass: \"icon is-small\"\n  }, [_c('icon', {\n    attrs: {\n      \"name\": \"chevron-right\",\n      \"title\": \"Next\"\n    }\n  })], 1)])])])])], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal-background navigation_background\",\n    class: {\n      active: _vm.outlineOpen\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.outlineOpen = false;\n      }\n    }\n  }), _vm._v(\" \"), _c('section', {\n    staticClass: \"navigation\",\n    class: {\n      closed: !_vm.outlineOpen\n    }\n  }, [_c('nav', {\n    staticClass: \"nav\"\n  }, [_c('div', {\n    staticClass: \"nav-left nav_closer\"\n  }, [_c('a', {\n    staticClass: \"nav-item\",\n    on: {\n      \"click\": function($event) {\n        _vm.outlineOpen = !_vm.outlineOpen\n      }\n    }\n  }, [_c('span', {\n    staticClass: \"icon\"\n  }, [(_vm.outlineOpen) ? _c('icon', {\n    attrs: {\n      \"name\": \"close\",\n      \"title\": \"Close Navigation\"\n    }\n  }) : _vm._e()], 1)])]), _vm._v(\" \"), _vm._m(0)]), _vm._v(\" \"), _c('div', [_c('article', {\n    staticClass: \"media\"\n  }, [_c('figure', {\n    staticClass: \"media-left\"\n  }, [_c('p', {\n    staticClass: \"image is-64x64\"\n  }, [_c('img', {\n    staticClass: \"cover_image\",\n    attrs: {\n      \"src\": _vm.manifest.cover_image_url\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"media-content\"\n  }, [_c('div', {\n    staticClass: \"content\"\n  }, [_c('p', [_c('strong', {\n    staticClass: \"media_title\"\n  }, [_vm._v(_vm._s(_vm.manifest.title))]), _vm._v(\" \"), _c('small', {\n    staticClass: \"media_subtitle\"\n  }, [_vm._v(_vm._s(_vm.manifest.subtitle))]), _vm._v(\" \"), _c('small', {\n    staticClass: \"media_author\"\n  }, [_vm._v(_vm._s(_vm.manifest.author_as_it_appears))])])])])]), _vm._v(\" \"), _c('outline', {\n    attrs: {\n      \"data\": _vm.outline,\n      \"pdf\": _vm.$refs.pdf,\n      \"page\": _vm.displayedPage\n    },\n    on: {\n      \"onClick\": this.goto,\n      \"current\": this.onCurrentTitle\n    }\n  })], 1)]), _vm._v(\" \"), _c('section', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.artworkOpen),\n      expression: \"artworkOpen\"\n    }],\n    staticClass: \"artwork\"\n  }, [_c('div', {\n    staticClass: \"container\"\n  }, [_c('b-tabs', {\n    attrs: {\n      \"position\": \"is-centered\"\n    },\n    on: {\n      \"change\": _vm.onTabChanged\n    },\n    model: {\n      value: (_vm.activeTab),\n      callback: function($$v) {\n        _vm.activeTab = $$v\n      },\n      expression: \"activeTab\"\n    }\n  }, [_c('b-tab-item', {\n    attrs: {\n      \"label\": \"Grid\"\n    }\n  }, [_c('grid', {\n    ref: \"grid\",\n    attrs: {\n      \"id\": \"grid\",\n      \"data\": _vm.images,\n      \"filter\": _vm.tableFilter\n    },\n    on: {\n      \"onClick\": this.onImageSelected\n    }\n  })], 1), _vm._v(\" \"), _c('b-tab-item', {\n    attrs: {\n      \"label\": \"Table\"\n    }\n  }, [_c('tablegrid', {\n    ref: \"table\",\n    attrs: {\n      \"id\": \"table\",\n      \"data\": _vm.images\n    },\n    on: {\n      \"onImageClick\": this.onImageSelected,\n      \"onPageClick\": this.onPageSelected\n    }\n  })], 1)], 1)], 1)]), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal\",\n    class: {\n      'is-active': _vm.isModalActive\n    }\n  }, [_c('div', {\n    staticClass: \"modal-background\",\n    on: {\n      \"click\": function($event) {\n        _vm.isModalActive = false\n      }\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"modal-content\"\n  }, [_c('detail', {\n    attrs: {\n      \"image\": _vm.currentDetail,\n      \"manifest\": _vm.manifest\n    },\n    on: {\n      \"infoSelected\": this.onInfoSelected,\n      \"pageSelected\": this.onPageSelected,\n      \"closed\": this.onDetailClosed,\n      \"displayed\": this.onDetailDisplayed\n    }\n  })], 1), _vm._v(\" \"), _c('button', {\n    staticClass: \"modal-close\",\n    on: {\n      \"click\": function($event) {\n        _vm.isModalActive = false\n      }\n    }\n  })])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"nav-right\"\n  }, [_c('div', {\n    staticClass: \"nav-item\"\n  })])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-59fa2e3c\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Reader.vue\n// module id = 163\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('Reader', {\n    attrs: {\n      \"manifest-url\": _vm.url,\n      \"page-url\": _vm.page,\n      \"image-url\": _vm.image,\n      \"show-grid\": _vm.tab === 'grid',\n      \"show-table\": _vm.tab === 'table'\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0b9bd71c\"}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Main.vue\n// module id = 164\n// module chunks = 2"],"sourceRoot":""}