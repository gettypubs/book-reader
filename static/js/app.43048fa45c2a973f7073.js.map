{"version":3,"sources":["webpack:///static/js/app.43048fa45c2a973f7073.js","webpack:///./src/router/index.js","webpack:///./src/App.vue?fc6a","webpack:///./src/main.js","webpack:///App.vue","webpack:///ImageLayer.vue","webpack:///Main.vue","webpack:///PDF.vue","webpack:///Page.vue","webpack:///Reader.vue","webpack:///TextLayer.vue","webpack:///./src/components/ImageLayer.vue?d2df","webpack:///./src/components/Main.vue?9d89","webpack:///./src/components/PDF.vue?2841","webpack:///./src/components/Page.vue?31ac","webpack:///./src/components/Reader.vue?d3aa","webpack:///./src/components/TextLayer.vue?8459","webpack:///./src/components/Main.vue?cfa6","webpack:///./src/components/Page.vue?3bea","webpack:///./src/components/TextLayer.vue?7598","webpack:///./src/components/Reader.vue?36f2","webpack:///./src/App.vue?5b81","webpack:///./src/components/ImageLayer.vue?cb97","webpack:///./src/components/PDF.vue?59e4"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_Main__","__WEBPACK_IMPORTED_MODULE_2__components_Main___default","n","use","routes","path","name","component","a","exports","Component","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","__WEBPACK_IMPORTED_MODULE_2__router__","config","productionTip","el","router","template","components","App","props","images","default","type","Array","viewport","undefined","data","updated","mounted","this","watch","methods","handleClick","image","console","log","objId","__WEBPACK_IMPORTED_MODULE_0__components_Reader__","__WEBPACK_IMPORTED_MODULE_0__components_Reader___default","Reader","url","$route","params","book","edition","__WEBPACK_IMPORTED_MODULE_0__components_Page__","__WEBPACK_IMPORTED_MODULE_0__components_Page___default","pdfjsLib","PDFJS","workerSrc","Page","src","String","width","Number","height","page","spreads","Boolean","pdf","numPages","scale","rotate","isLoading","viewportWidth","viewportHeight","displayedPage","displayedPages","_this","loadDocument","then","display","_this2","pg","_this3","getDocument","pdfDocument","pagesCount","$emit","arguments","length","loadPage","next","prev","pageIndex","_this4","Error","pageNumber","getPage","onPageLoad","catch","onPageError","push","error","handleViewport","__WEBPACK_IMPORTED_MODULE_0__components_TextLayer__","__WEBPACK_IMPORTED_MODULE_0__components_TextLayer___default","__WEBPACK_IMPORTED_MODULE_1__components_ImageLayer__","__WEBPACK_IMPORTED_MODULE_1__components_ImageLayer___default","textlayer","imagelayer","onViewport","Function","viewportScale","textContent","displayPage","getPageScale","pageScale","getViewport","canvas","$refs","canvasContext","getContext","scaled","imageCount","imageLayer","beginLayout","endLayout","appendImage","i","index","render","__WEBPACK_IMPORTED_MODULE_0__components_PDF__","__WEBPACK_IMPORTED_MODULE_0__components_PDF___default","__WEBPACK_IMPORTED_MODULE_1_whatwg_fetch__","PDF","manifest","created","fetchManifest","window","addEventListener","keyListener","bind","beforeDestory","removeEventListener","fetch","manifestUrl","response","json","loaded","e","keyCode","renderTimeout","getTextContent","onContent","normalizeWhitespace","textLayer","textDivs","textLayerFrag","document","createDocumentFragment","textLayerRenderTask","cancel","renderTextLayer","container","timeout","promise","appendChild","_vm","_h","$createElement","_self","_c","attrs","manifest-url","staticRenderFns","staticClass","class","loading","style","ref","_v","id","on","click","_s","title","subtitle","author_as_it_appears","_l","$event","thumbnail","top","left"],"mappings":"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","file":"static/js/app.43048fa45c2a973f7073.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Main__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_Main___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_Main__);\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  routes: [{\n    path: '/',\n    name: 'Main',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Main___default.a\n  }, {\n    path: '/book/:book/edition/:edition',\n    name: 'Manifest',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Main___default.a\n  }, {\n    path: '/book/:book/edition/:edition/image/:image',\n    name: 'ImageLink',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_Main___default.a\n  }]\n}));\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(19)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(7),\n  /* template */\n  __webpack_require__(32),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 5 */,\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(3);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App___default.a }\n});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'app'\n});\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'imagelayer',\n  props: {\n    'images': {\n      default: [],\n      type: Array\n    },\n    'viewport': {\n      default: undefined,\n      type: Object\n    }\n  },\n  data: function data() {\n    return {};\n  },\n  updated: function updated() {},\n  mounted: function mounted() {\n    if (this.images) {}\n  },\n\n  watch: {\n    images: function images() {\n      if (this.images) {}\n    }\n  },\n  methods: {\n    handleClick: function handleClick(image) {\n      console.log('CLICK', image.objId);\n    }\n  }\n});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Reader__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Reader___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_Reader__);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'main',\n  components: {\n    'Reader': __WEBPACK_IMPORTED_MODULE_0__components_Reader___default.a\n  },\n  data: function data() {\n    return {\n      url: 'https://s3.amazonaws.com/pubs-fchasen/books/' + (this.$route.params.book || 371) + '/editions/' + (this.$route.params.edition || 500) + '/manifest.json'\n    };\n  }\n});\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Page__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_Page___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_Page__);\n\n\n\n\nvar pdfjsLib = __webpack_require__(1);\n\npdfjsLib.PDFJS.workerSrc = '/static/libs/pdfjs-dist/build/pdf.worker.js';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'pdf',\n  components: {\n    'Page': __WEBPACK_IMPORTED_MODULE_0__components_Page___default.a\n  },\n  props: {\n    'src': {\n      type: String\n    },\n    'width': {\n      type: Number,\n      default: undefined\n    },\n    'height': {\n      type: Number,\n      default: undefined\n    },\n    'page': {\n      default: 0,\n      type: Number\n    },\n    'spreads': {\n      default: true,\n      type: Boolean\n    }\n  },\n  data: function data() {\n    return {\n      pdf: undefined,\n      numPages: 0,\n      scale: 1,\n      rotate: undefined,\n      isLoading: true,\n      viewportWidth: 0,\n      viewportHeight: 0,\n      displayedPage: 0,\n      displayedPages: []\n    };\n  },\n  updated: function updated() {},\n  mounted: function mounted() {\n    var _this = this;\n\n    if (this.src) {\n      this.loadDocument(this.src).then(function () {\n        return _this.display(_this.page);\n      });\n    }\n  },\n\n  watch: {\n    src: function src() {\n      var _this2 = this;\n\n      if (this.src) {\n        this.loadDocument(this.src).then(function () {\n          return _this2.display(_this2.page);\n        });\n      }\n    },\n    page: function page(pg) {\n      if (this.page) {\n        this.display(this.page);\n      }\n    }\n  },\n  methods: {\n    loadDocument: function loadDocument(src) {\n      var _this3 = this;\n\n      console.log('src', src);\n      return pdfjsLib.getDocument(src).then(function (pdfDocument) {\n        var pagesCount = pdfDocument.numPages;\n\n        _this3.numPages = pagesCount;\n\n        _this3.pdf = pdfDocument;\n\n        _this3.isLoading = false;\n\n        _this3.$emit('loaded');\n      });\n    },\n    display: function display() {\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.page;\n\n      if (this.spreads) {\n        this.displayedPages = [];\n\n        if (page % 2 === 0) {\n          this.displayedPage = page;\n        } else {\n          this.displayedPage = page - 1;\n        }\n\n        this.loadPage(this.displayedPage);\n        this.loadPage(this.displayedPage + 1);\n      } else {\n        this.displayedPage = page;\n        this.loadPage(this.displayedPage);\n      }\n    },\n    next: function next() {\n      this.displayedPage += this.spreads ? 2 : 1;\n      this.display(this.displayedPage);\n    },\n    prev: function prev() {\n      if (this.displayedPage > 1) {\n        this.displayedPage -= this.spreads ? 2 : 1;\n        this.display(this.displayedPage);\n      }\n    },\n    loadPage: function loadPage(pageIndex) {\n      var _this4 = this;\n\n      var pdf = this.pdf;\n\n\n      if (!pdf) {\n        throw new Error('Unexpected call to getPage() before the document has been loaded.');\n      }\n\n      var pageNumber = pageIndex + 1;\n\n      if (!pageIndex || pageNumber < 1) {\n        pageNumber = 1;\n      } else if (pageNumber >= pdf.numPages) {\n        pageNumber = pdf.numPages;\n      }\n\n      return pdf.getPage(pageNumber).then(function (page) {\n        return _this4.onPageLoad(page);\n      }).catch(function (page) {\n        return _this4.onPageError(page);\n      });\n    },\n    onPageLoad: function onPageLoad(page) {\n      this.displayedPages.push(page);\n    },\n    onPageError: function onPageError(page) {\n      console.error(page);\n    },\n    handleViewport: function handleViewport(viewport) {\n      this.viewportWidth = viewport.width;\n      this.viewportHeight = viewport.height;\n    }\n  }\n});\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_TextLayer__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_TextLayer___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_TextLayer__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_ImageLayer__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_ImageLayer___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_ImageLayer__);\n\n\n\n\n\nvar pdfjsLib = __webpack_require__(1);\npdfjsLib.PDFJS.workerSrc = '/static/libs/pdfjs-dist/build/pdf.worker.js';\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'page',\n  components: {\n    'textlayer': __WEBPACK_IMPORTED_MODULE_0__components_TextLayer___default.a,\n    'imagelayer': __WEBPACK_IMPORTED_MODULE_1__components_ImageLayer___default.a\n  },\n  props: {\n    'scale': {\n      default: 1,\n      type: Number\n    },\n    'rotate': {\n      default: undefined,\n      type: Number\n    },\n    'width': {\n      type: Number\n    },\n    'height': {\n      type: Number\n    },\n    'page': {\n      default: undefined,\n      type: Object\n    },\n    'onViewport': {\n      default: undefined,\n      type: Function\n    }\n  },\n  data: function data() {\n    return {\n      pdf: undefined,\n      isLoading: true,\n      viewportWidth: 0,\n      viewportHeight: 0,\n      viewportScale: 1,\n      viewport: undefined,\n      textContent: undefined,\n      images: []\n    };\n  },\n  updated: function updated() {},\n  mounted: function mounted() {\n    if (this.page) {\n      this.displayPage(this.page);\n    }\n  },\n\n  watch: {\n    page: function page() {\n      if (this.page) {\n        this.displayPage(this.page);\n      }\n    }\n  },\n  methods: {\n    getPageScale: function getPageScale() {\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.page;\n      var scale = this.scale,\n          width = this.width;\n\n      var pageScale = 1;\n\n      if (width) {\n        pageScale = width / page.getViewport(scale).width;\n      }\n\n\n      return scale * pageScale;\n    },\n    displayPage: function displayPage(page) {\n      var canvas = this.$refs.canvas;\n\n      var canvasContext = canvas.getContext('2d');\n      var scale = this.scale,\n          rotate = this.rotate;\n\n      var scaled = scale !== 1 ? scale : this.getPageScale(page);\n      var viewport = page.getViewport(scaled, rotate);\n      var images = this.images;\n      var imageCount = 0;\n      var imageLayer = {\n        beginLayout: function beginLayout() {},\n        endLayout: function endLayout() {},\n        appendImage: function appendImage(i) {\n          i.page = page.pageIndex;\n          i.index = imageCount;\n          images.push(i);\n          imageCount++;\n        }\n      };\n\n      this.viewport = viewport;\n      this.viewportScale = scale;\n      this.viewportHeight = viewport.height;\n      this.viewportWidth = viewport.width;\n\n      this.onViewport && this.onViewport(viewport);\n\n      page.render({ canvasContext: canvasContext, viewport: viewport, imageLayer: imageLayer });\n    },\n    onPageError: function onPageError(page) {\n      console.error(page);\n    }\n  }\n});\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_PDF__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_PDF___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_PDF__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_whatwg_fetch__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_whatwg_fetch___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_whatwg_fetch__);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'reader',\n  components: {\n    'PDF': __WEBPACK_IMPORTED_MODULE_0__components_PDF___default.a\n  },\n  props: ['manifest-url'],\n  data: function data() {\n    return {\n      manifest: {},\n      images: [],\n      page: 0\n    };\n  },\n  created: function created() {\n    this.fetchManifest();\n    window.addEventListener('keyup', this.keyListener.bind(this), false);\n  },\n  beforeDestory: function beforeDestory() {\n    window.removeEventListener('keyup', this.keyListener);\n  },\n\n  methods: {\n    fetchManifest: function fetchManifest() {\n      var _this = this;\n\n      return fetch(this.manifestUrl).then(function (response) {\n        return response.json();\n      }).then(function (manifest) {\n        console.log(manifest);\n        _this.manifest = manifest;\n      });\n    },\n    loaded: function loaded() {\n      this.images = this.manifest.images;\n    },\n    next: function next() {\n      var pdf = this.$refs.pdf;\n\n      pdf.next();\n    },\n    prev: function prev() {\n      var pdf = this.$refs.pdf;\n\n      pdf.prev();\n    },\n    keyListener: function keyListener(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === 37) {\n        this.prev();\n      } else if (keyCode === 39) {\n        this.next();\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\nvar pdfjsLib = __webpack_require__(1);\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'textlayer',\n  props: {\n    'page': {\n      default: undefined\n    },\n    'viewport': {\n      default: undefined\n    },\n    'renderTimeout': {\n      default: 300,\n      type: Number\n    }\n  },\n  data: function data() {\n    return {};\n  },\n  updated: function updated() {},\n  mounted: function mounted() {\n    var _this = this;\n\n    if (this.page) {\n      this.getTextContent(this.page).then(function (textContent) {\n        return _this.onContent(textContent);\n      });\n    }\n  },\n\n  watch: {\n    page: function page() {\n      var _this2 = this;\n\n      if (this.page) {\n        this.getTextContent(this.page).then(function (textContent) {\n          return _this2.onContent(textContent);\n        });\n      }\n    }\n  },\n  methods: {\n    getTextContent: function getTextContent(page) {\n      return page.getTextContent({ normalizeWhitespace: true });\n    },\n    onContent: function onContent(textContent) {\n      var textLayer = this.$refs.textLayer;\n\n      this.textDivs = [];\n      var textLayerFrag = document.createDocumentFragment();\n\n      if (this.textLayerRenderTask) {\n        this.textLayerRenderTask.cancel();\n        this.textLayerRenderTask = null;\n      }\n\n      this.textLayerRenderTask = pdfjsLib.renderTextLayer({\n        textContent: textContent,\n        container: textLayerFrag,\n        viewport: this.viewport,\n        textDivs: this.textDivs,\n        timeout: this.renderTimeout\n      });\n\n      this.textLayerRenderTask.promise.then(function () {\n        textLayer.appendChild(textLayerFrag);\n      });\n    },\n    onPageError: function onPageError(page) {\n      console.error(page);\n    }\n  }\n});\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(20)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(8),\n  /* template */\n  __webpack_require__(33),\n  /* scopeId */\n  \"data-v-633d2fa2\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(14)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(9),\n  /* template */\n  __webpack_require__(28),\n  /* scopeId */\n  \"data-v-0b9bd71c\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(21)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(10),\n  /* template */\n  __webpack_require__(34),\n  /* scopeId */\n  \"data-v-84dcc46e\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(15)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(11),\n  /* template */\n  __webpack_require__(29),\n  /* scopeId */\n  \"data-v-2ded1648\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(18)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(12),\n  /* template */\n  __webpack_require__(31),\n  /* scopeId */\n  \"data-v-59fa2e3c\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(17)\n__webpack_require__(16)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(13),\n  /* template */\n  __webpack_require__(30),\n  /* scopeId */\n  \"data-v-448030bb\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('Reader', {\n    attrs: {\n      \"manifest-url\": _vm.url\n    }\n  })\n},staticRenderFns: []}\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"pageWrapper\",\n    class: {\n      loading: _vm.isLoading\n    },\n    style: ({\n      width: (_vm.viewportWidth + \"px\"),\n      height: (_vm.viewportHeight + \"px\")\n    })\n  }, [_c('canvas', {\n    ref: \"canvas\",\n    attrs: {\n      \"width\": (_vm.viewportWidth + \"px\"),\n      \"height\": (_vm.viewportHeight + \"px\")\n    }\n  }), _vm._v(\" \"), _c('textlayer', {\n    attrs: {\n      \"page\": _vm.page,\n      \"viewport\": _vm.viewport\n    }\n  }), _vm._v(\" \"), _c('imagelayer', {\n    attrs: {\n      \"images\": _vm.images,\n      \"viewport\": _vm.viewport\n    }\n  }), _vm._v(\" \"), _c('div', {\n    ref: \"annotationLayer\"\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"textLayer\",\n    staticClass: \"textLayer\",\n    style: ({\n      width: ((_vm.viewport ? _vm.viewport.width : 0) + \"px\"),\n      height: ((_vm.viewport ? _vm.viewport.height : 0) + \"px\")\n    })\n  })\n},staticRenderFns: []}\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"page-wrap\"\n    }\n  }, [_c('PDF', {\n    ref: \"pdf\",\n    attrs: {\n      \"src\": this.manifest.pdf,\n      \"page\": _vm.page,\n      \"width\": 1000\n    },\n    on: {\n      \"loaded\": _vm.loaded\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"arrow\",\n    attrs: {\n      \"id\": \"prev\"\n    },\n    on: {\n      \"click\": this.prev\n    }\n  }, [_vm._v(\"‹\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"arrow\",\n    attrs: {\n      \"id\": \"next\"\n    },\n    on: {\n      \"click\": this.next\n    }\n  }, [_vm._v(\"›\")]), _vm._v(\" \"), _c('header', [_c('h1', [_vm._v(_vm._s(_vm.manifest.title) + \": \")]), _vm._v(\" \"), _c('h2', [_vm._v(_vm._s(_vm.manifest.subtitle) + \", \")]), _vm._v(\" \"), _c('h3', [_vm._v(_vm._s(_vm.manifest.author_as_it_appears))])]), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"images\"\n    }\n  }, [_c('ol', _vm._l((_vm.images), function(image) {\n    return _c('li', [_c('a', {\n      staticClass: \"img_link\",\n      on: {\n        \"click\": function($event) {\n          _vm.page = (image.page - 1)\n        }\n      }\n    }, [_c('img', {\n      attrs: {\n        \"src\": image.thumbnail\n      }\n    })])])\n  }))])], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"imageLayer\",\n    staticClass: \"imageLayer\",\n    style: ({\n      width: ((_vm.viewport ? _vm.viewport.width : 0) + \"px\"),\n      height: ((_vm.viewport ? _vm.viewport.height : 0) + \"px\")\n    })\n  }, _vm._l((_vm.images), function(image) {\n    return _c('div', {\n      staticClass: \"imageLayerItem\",\n      style: ({\n        width: ((image.width) + \"px\"),\n        height: ((image.height) + \"px\"),\n        top: ((image.top-image.height) + \"px\"),\n        left: ((image.left) + \"px\")\n      }),\n      on: {\n        \"click\": function($event) {\n          _vm.handleClick(image)\n        }\n      }\n    })\n  }))\n},staticRenderFns: []}\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"pageContainer\",\n    class: {\n      loading: _vm.isLoading\n    },\n    style: ({\n      width: (_vm.width + \"px\"),\n      height: ((_vm.height ? _vm.height : _vm.viewportHeight) + \"px\")\n    })\n  }, _vm._l((_vm.displayedPages), function(page) {\n    return _c('div', {\n      staticClass: \"page\"\n    }, [_c('page', {\n      attrs: {\n        \"page\": page,\n        \"width\": _vm.spreads ? _vm.width / 2 : _vm.width,\n        \"height\": _vm.height,\n        \"onViewport\": _vm.handleViewport\n      }\n    })], 1)\n  }))\n},staticRenderFns: []}\n\n/***/ })\n],[6]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.43048fa45c2a973f7073.js","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Main from '@/components/Main'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Main',\n      component: Main\n    },\n    {\n      path: '/book/:book/edition/:edition',\n      name: 'Manifest',\n      component: Main\n    },\n    {\n      path: '/book/:book/edition/:edition/image/:image',\n      name: 'ImageLink',\n      component: Main\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","\n/* styles */\nrequire(\"!!../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-626c8dc1\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-626c8dc1\\\"}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 4\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?6c22c58f","<template>\n  <div ref=\"imageLayer\"\n        :style=\"{ width: `${viewport ? viewport.width : 0}px`, height: `${viewport ? viewport.height : 0}px` }\"\n        class=\"imageLayer\">\n    <div v-for=\"image in images\" class=\"imageLayerItem\"\n         :style=\"{ width: `${image.width}px`, height: `${image.height}px`, top: `${image.top-image.height}px`, left: `${image.left}px`}\"\n         @click=\"handleClick(image)\">\n\n    </div>\n  </div>\n</template>\n\n\n<script>\n// const pdfjsLib = require('pdfjs-dist');\n// pdfjsLib.PDFJS.workerSrc = '/static/libs/pdfjs-dist/build/pdf.worker.js';\n\nexport default {\n  name: 'imagelayer',\n  props: {\n    'images': {\n      default: [],\n      type: Array\n    },\n    'viewport': {\n      default: undefined,\n      type: Object\n    }\n  },\n  data () {\n    return {\n\n    }\n  },\n  updated () {\n  },\n  mounted () {\n    if (this.images) {\n      // console.log('images', this.images);\n    }\n  },\n  watch: {\n    images () {\n      if (this.images) {\n        // console.log('images', this.images);\n      }\n    }\n  },\n  methods: {\n    handleClick (image) {\n      console.log('CLICK', image.objId);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.imageLayer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  pointer-events: none;\n}\n.imageLayerItem {\n  position: absolute;\n  pointer-events: all;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ImageLayer.vue?8bc3d012","<template>\n  <Reader :manifest-url=\"url\" />\n</template>\n\n<script>\nimport Reader from '@/components/Reader'\n\nexport default {\n  name: 'main',\n  components: {\n    'Reader': Reader\n  },\n  data () {\n    return {\n      url: `https://s3.amazonaws.com/pubs-fchasen/books/${this.$route.params.book || 371}/editions/${this.$route.params.edition || 500}/manifest.json`\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh1, h2 {\n  font-weight: normal;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\n\na {\n  color: #42b983;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Main.vue?154908a8","<template>\n  <div class=\"pageContainer\" :class=\"{ loading: isLoading }\" :style=\"{ width: `${width}px`, height: `${height ? height : viewportHeight }px` }\" >\n    <div class=\"page\" v-for=\"page in displayedPages\">\n      <page :page=\"page\" :width=\"spreads ? width / 2 : width\" :height=\"height\" :onViewport=\"handleViewport\"/>\n    </div>\n  </div>\n</template>\n\n<!-- <script src=\"libs/pdfjs-dist/build/pdf.js\"></script> -->\n<!-- <script src=\"/static/libs/pdfjs-dist/build/pdf.worker.js\"></script> -->\n<!-- <script src=\"/static/libs/pdfjs-dist/web/pdf_viewer.js\"></script> -->\n<!-- <script src=\"/static/libs/pdfjs-dist/web/compatibility.js\"></script> -->\n<script>\nimport Page from '@/components/Page'\n\nconst pdfjsLib = require('pdfjs-dist');\n// require('pdfjs-dist/lib/shared/compatibility.js');\n\n// const pdfjsWebTextLayerBuilder = require('pdfjs-dist/lib/web/text_layer_builder.js');\n// console.log(pdfjsWebTextLayerBuilder);\n// const pdfjsWebAnnotationLayerBuilder = require('./annotation_layer_builder.js');\n// /* global PDFJS */\n\n// const pdfViewer = require('../../static/libs/pdfjs-dist/web/pdf_viewer.js');\n// console.log(pdfViewer);\npdfjsLib.PDFJS.workerSrc = '/static/libs/pdfjs-dist/build/pdf.worker.js';\n\nexport default {\n  name: 'pdf',\n  components: {\n    'Page': Page\n  },\n  props: {\n    'src': {\n      type: String\n    },\n    'width': {\n      type: Number,\n      default: undefined\n    },\n    'height': {\n      type: Number,\n      default: undefined\n    },\n    'page': {\n      default: 0,\n      type: Number\n    },\n    'spreads': {\n      default: true,\n      type: Boolean\n    }\n  },\n  data () {\n    return {\n      pdf: undefined,\n      numPages: 0,\n      scale: 1,\n      rotate: undefined,\n      isLoading: true,\n      viewportWidth: 0,\n      viewportHeight: 0,\n      displayedPage: 0,\n      displayedPages: []\n    }\n  },\n  updated () {\n  },\n  mounted () {\n    if (this.src) {\n      this.loadDocument(this.src)\n        .then(() => this.display(this.page))\n    }\n  },\n  watch: {\n    src () {\n      if (this.src) {\n        this.loadDocument(this.src)\n          .then(() => this.display(this.page))\n      }\n    },\n    page (pg) {\n      if (this.page) {\n        this.display(this.page);\n      }\n    }\n  },\n  methods: {\n    loadDocument (src) {\n      console.log('src', src);\n      return pdfjsLib.getDocument(src)\n        .then((pdfDocument) => {\n          // Document loaded, retrieving the page.\n          var pagesCount = pdfDocument.numPages;\n          // var noCover = settings.cover === false;\n          this.numPages = pagesCount;\n\n          this.pdf = pdfDocument;\n\n          this.isLoading = false;\n\n          this.$emit('loaded');\n          // return pdfDocument.getPage(1);\n        })\n        // .then((firstPage) => {\n        // // var viewport = firstPage.getViewport(SCALE);\n        //   var CSS_UNITS = 96.0 / 72.0;\n        //\n        //   var widthScale = (window.innerWidth / 2) / firstPage.getViewport(CSS_UNITS).width;\n        //   var heightScale = (window.innerHeight) / firstPage.getViewport(CSS_UNITS).height;\n        //   var scale = (widthScale > heightScale ? heightScale : widthScale);\n        //\n        //   var viewport = firstPage.getViewport(scale);\n        //\n        // })\n    },\n    display (page = this.page) {\n      if (this.spreads) {\n        this.displayedPages = []; // clear\n\n        if (page % 2 === 0) {\n          this.displayedPage = page;\n        } else {\n          this.displayedPage = page - 1;\n        }\n\n        this.loadPage(this.displayedPage); // left\n        this.loadPage(this.displayedPage + 1); // right\n      } else {\n        this.displayedPage = page;\n        this.loadPage(this.displayedPage);\n      }\n    },\n    next () {\n      // TODO: don't go over total pages\n      this.displayedPage += this.spreads ? 2 : 1;\n      this.display(this.displayedPage);\n    },\n    prev () {\n      if (this.displayedPage > 1) {\n        this.displayedPage -= this.spreads ? 2 : 1;\n        this.display(this.displayedPage);\n      }\n    },\n    loadPage (pageIndex) {\n      const { pdf } = this;\n\n      if (!pdf) {\n        throw new Error('Unexpected call to getPage() before the document has been loaded.');\n      }\n\n      let pageNumber = pageIndex + 1;\n\n      if (!pageIndex || pageNumber < 1) {\n        pageNumber = 1;\n      } else if (pageNumber >= pdf.numPages) {\n        pageNumber = pdf.numPages;\n      }\n\n      return pdf.getPage(pageNumber)\n        .then((page) => this.onPageLoad(page))\n        .catch((page) => this.onPageError(page));\n    },\n    onPageLoad (page) {\n      this.displayedPages.push(page);\n    },\n    onPageError (page) {\n      console.error(page);\n    },\n    handleViewport (viewport) {\n      this.viewportWidth = viewport.width;\n      this.viewportHeight = viewport.height;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.loading {\n  /*background: #eee url('../assets/loading-icon.gif') center no-repeat;*/\n}\n.pageContainer {\n  margin: 0 auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: center;\n}\n\n.page {\n  flex: none;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// PDF.vue?67bf00dc","<template>\n  <div class=\"pageWrapper\" :class=\"{ loading: isLoading }\" :style=\"{ width: `${viewportWidth}px`, height: `${viewportHeight}px` }\">\n    <canvas ref=\"canvas\" :width=\"`${viewportWidth}px`\" :height=\"`${viewportHeight}px`\"/>\n    <textlayer :page=\"page\" :viewport=\"viewport\"></textlayer>\n    <imagelayer :images=\"images\" :viewport=\"viewport\"></imagelayer>\n    <div ref=\"annotationLayer\"></div>\n  </div>\n</template>\n\n<script>\nimport TextLayer from '@/components/TextLayer'\nimport ImageLayer from '@/components/ImageLayer'\n\nconst pdfjsLib = require('pdfjs-dist');\npdfjsLib.PDFJS.workerSrc = '/static/libs/pdfjs-dist/build/pdf.worker.js';\n\nexport default {\n  name: 'page',\n  components: {\n    'textlayer': TextLayer,\n    'imagelayer': ImageLayer\n  },\n  props: {\n    'scale': {\n      default: 1,\n      type: Number\n    },\n    'rotate': {\n      default: undefined,\n      type: Number\n    },\n    'width': {\n      type: Number\n    },\n    'height': {\n      type: Number\n    },\n    'page': {\n      default: undefined,\n      type: Object\n    },\n    'onViewport': {\n      default: undefined,\n      type: Function\n    }\n  },\n  data () {\n    return {\n      pdf: undefined,\n      isLoading: true,\n      viewportWidth: 0,\n      viewportHeight: 0,\n      viewportScale: 1,\n      viewport: undefined,\n      textContent: undefined,\n      images: []\n    }\n  },\n  updated () {\n  },\n  mounted () {\n    if (this.page) {\n      this.displayPage(this.page);\n    }\n  },\n  watch: {\n    page () {\n      if (this.page) {\n        this.displayPage(this.page);\n      }\n    }\n  },\n  methods: {\n    getPageScale (page = this.page) {\n      const { scale, width } = this;\n\n      // Be default, we'll render page at 100% * scale width.\n      let pageScale = 1;\n\n      // If width is defined, calculate the scale of the page so it could be of desired width.\n      if (width) {\n        pageScale = width / page.getViewport(scale).width;\n      }\n      // console.log('pageScale', pageScale);\n\n      return scale * pageScale;\n    },\n    displayPage (page) {\n      // const scale = this.getPageScale(page);\n      const { canvas } = this.$refs;\n      const canvasContext = canvas.getContext('2d');\n      const { scale, rotate } = this;\n      const scaled = scale !== 1 ? scale : this.getPageScale(page);\n      const viewport = page.getViewport(scaled, rotate);\n      let images = this.images;\n      let imageCount = 0;\n      const imageLayer = {\n        beginLayout () { },\n        endLayout () { },\n        appendImage (i) {\n          i.page = page.pageIndex;\n          i.index = imageCount;\n          images.push(i);\n          imageCount++;\n        }\n      };\n\n      this.viewport = viewport;\n      this.viewportScale = scale;\n      this.viewportHeight = viewport.height;\n      this.viewportWidth = viewport.width;\n\n      this.onViewport && this.onViewport(viewport);\n\n      page.render({ canvasContext, viewport, imageLayer });\n    },\n    onPageError (page) {\n      console.error(page);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.loading {\n  /*background: #eee url('../assets/loading-icon.gif') center no-repeat;*/\n}\ncanvas {\n  /*background-color: #eee;*/\n}\n\n.pageWrapper {\n  direction: ltr;\n  position: relative;\n  overflow: visible;\n  margin: 0 auto;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Page.vue?391d6c14","<template>\n  <div id=\"page-wrap\">\n    <PDF ref=\"pdf\" :src=\"this.manifest.pdf\" :page=\"page\" @loaded=\"loaded\" :width=\"1000\"/>\n    <div id=\"prev\" class=\"arrow\" @click=\"this.prev\">‹</div>\n    <div id=\"next\" class=\"arrow\" @click=\"this.next\">›</div>\n    <header>\n      <h1>{{manifest.title}}: </h1>\n      <h2>{{manifest.subtitle}}, </h2>\n      <h3>{{manifest.author_as_it_appears}}</h3>\n    </header>\n    <div id=\"images\">\n      <ol>\n        <li v-for=\"image in images\">\n          <a class=\"img_link\" @click=\"page = (image.page - 1)\">\n            <img :src=\"image.thumbnail\" />\n          </a>\n        </li>\n      </ol>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PDF from '@/components/PDF'\nimport 'whatwg-fetch'\n\nexport default {\n  name: 'reader',\n  components: {\n    'PDF': PDF\n  },\n  props: ['manifest-url'],\n  data () {\n    return {\n      manifest: {},\n      images: [],\n      page: 0\n    }\n  },\n  created () {\n    this.fetchManifest();\n    window.addEventListener('keyup', this.keyListener.bind(this), false);\n  },\n  beforeDestory () {\n    window.removeEventListener('keyup', this.keyListener);\n  },\n  methods: {\n    fetchManifest () {\n      return fetch(this.manifestUrl)\n        .then((response) => {\n          return response.json()\n        })\n        .then((manifest) => {\n          console.log(manifest)\n          this.manifest = manifest;\n        })\n    },\n    loaded () {\n      // Wait for PDF to load\n      this.images = this.manifest.images;\n    },\n    next () {\n      const { pdf } = this.$refs;\n      pdf.next();\n    },\n    prev () {\n      const { pdf } = this.$refs;\n      pdf.prev();\n    },\n    keyListener (e) {\n      const { keyCode } = e;\n      if (keyCode === 37) {\n        this.prev();\n      } else if (keyCode === 39) {\n        this.next();\n      }\n    }\n\n  }\n}\n</script>\n\n<style scoped>\n\nheader {\n\n}\n\nh1, h2, h3 {\n  font-weight: normal;\n  display: inline;\n  font-size: 16px;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\n\na {\n  color: #42b983;\n}\n\n#prev {\n  left: 40px;\n}\n\n#next {\n  right: 40px;\n}\n\n.arrow {\n  position: absolute;\n  top: 50vh;\n  margin-top: -32px;\n  font-size: 64px;\n  color: #E2E2E2;\n  font-family: arial, sans-serif;\n  font-weight: bold;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  /*display: none;*/\n}\n\n.arrow:hover {\n  color: #777;\n}\n\n.arrow:active {\n  color: #000;\n}\n\n.img_link {\n  cursor: pointer;\n}\n\n.img_link:hover {\n  opacity: 0.8;\n}\n\n.img_link:active {\n  opacity: 0.5;\n}\n\n.img_link img {\n  max-width: 100px;\n  max-height: 100px;\n}\n\nheader {\n  margin: 24px;\n}\n\n#images {\n  margin: 40px;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Reader.vue?8003f23a","<template>\n  <div ref=\"textLayer\" :style=\"{ width: `${viewport ? viewport.width : 0}px`, height: `${viewport ? viewport.height : 0}px` }\" class=\"textLayer\"></div>\n</template>\n\n\n<script>\nconst pdfjsLib = require('pdfjs-dist');\n// pdfjsLib.PDFJS.workerSrc = '/static/libs/pdfjs-dist/build/pdf.worker.js';\n\nexport default {\n  name: 'textlayer',\n  props: {\n    'page': {\n      default: undefined\n    },\n    'viewport': {\n      default: undefined\n    },\n    'renderTimeout': {\n      default: 300,\n      type: Number\n    }\n  },\n  data () {\n    return {\n\n    }\n  },\n  updated () {\n  },\n  mounted () {\n    if (this.page) {\n      this.getTextContent(this.page).then((textContent) => this.onContent(textContent));\n    }\n  },\n  watch: {\n    page () {\n      if (this.page) {\n        this.getTextContent(this.page).then((textContent) => this.onContent(textContent));\n      }\n    }\n  },\n  methods: {\n    getTextContent (page) {\n      return page.getTextContent({ normalizeWhitespace: true });\n    },\n    onContent (textContent) {\n      const { textLayer } = this.$refs;\n      this.textDivs = [];\n      let textLayerFrag = document.createDocumentFragment();\n\n      if (this.textLayerRenderTask) {\n        this.textLayerRenderTask.cancel();\n        this.textLayerRenderTask = null;\n      }\n\n      this.textLayerRenderTask = pdfjsLib.renderTextLayer({\n        textContent: textContent,\n        container: textLayerFrag,\n        viewport: this.viewport,\n        textDivs: this.textDivs,\n        timeout: this.renderTimeout\n      });\n\n      this.textLayerRenderTask.promise.then(() => {\n        textLayer.appendChild(textLayerFrag);\n      });\n    },\n    onPageError (page) {\n      console.error(page);\n    }\n  }\n}\n</script>\n\n<style scoped>\n.textLayer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  opacity: 0.2;\n  line-height: 1.0;\n}\n</style>\n\n<style>\n.textLayer > div {\n    color: transparent;\n    position: absolute;\n    white-space: pre;\n    cursor: text;\n    -webkit-transform-origin: 0% 0%;\n    -moz-transform-origin: 0% 0%;\n    -o-transform-origin: 0% 0%;\n    -ms-transform-origin: 0% 0%;\n    transform-origin: 0% 0%;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// TextLayer.vue?43799d02","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-633d2fa2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ImageLayer.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ImageLayer.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-633d2fa2\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ImageLayer.vue\"),\n  /* scopeId */\n  \"data-v-633d2fa2\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ImageLayer.vue\n// module id = 22\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-0b9bd71c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Main.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Main.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0b9bd71c\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Main.vue\"),\n  /* scopeId */\n  \"data-v-0b9bd71c\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Main.vue\n// module id = 23\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-84dcc46e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./PDF.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./PDF.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-84dcc46e\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./PDF.vue\"),\n  /* scopeId */\n  \"data-v-84dcc46e\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/PDF.vue\n// module id = 24\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-2ded1648\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Page.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Page.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2ded1648\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Page.vue\"),\n  /* scopeId */\n  \"data-v-2ded1648\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Page.vue\n// module id = 25\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-59fa2e3c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Reader.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Reader.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59fa2e3c\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Reader.vue\"),\n  /* scopeId */\n  \"data-v-59fa2e3c\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Reader.vue\n// module id = 26\n// module chunks = 1","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-448030bb\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TextLayer.vue\")\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-448030bb\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./TextLayer.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TextLayer.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-448030bb\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TextLayer.vue\"),\n  /* scopeId */\n  \"data-v-448030bb\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TextLayer.vue\n// module id = 27\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('Reader', {\n    attrs: {\n      \"manifest-url\": _vm.url\n    }\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-0b9bd71c\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Main.vue\n// module id = 28\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"pageWrapper\",\n    class: {\n      loading: _vm.isLoading\n    },\n    style: ({\n      width: (_vm.viewportWidth + \"px\"),\n      height: (_vm.viewportHeight + \"px\")\n    })\n  }, [_c('canvas', {\n    ref: \"canvas\",\n    attrs: {\n      \"width\": (_vm.viewportWidth + \"px\"),\n      \"height\": (_vm.viewportHeight + \"px\")\n    }\n  }), _vm._v(\" \"), _c('textlayer', {\n    attrs: {\n      \"page\": _vm.page,\n      \"viewport\": _vm.viewport\n    }\n  }), _vm._v(\" \"), _c('imagelayer', {\n    attrs: {\n      \"images\": _vm.images,\n      \"viewport\": _vm.viewport\n    }\n  }), _vm._v(\" \"), _c('div', {\n    ref: \"annotationLayer\"\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-2ded1648\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Page.vue\n// module id = 29\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"textLayer\",\n    staticClass: \"textLayer\",\n    style: ({\n      width: ((_vm.viewport ? _vm.viewport.width : 0) + \"px\"),\n      height: ((_vm.viewport ? _vm.viewport.height : 0) + \"px\")\n    })\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-448030bb\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/TextLayer.vue\n// module id = 30\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"page-wrap\"\n    }\n  }, [_c('PDF', {\n    ref: \"pdf\",\n    attrs: {\n      \"src\": this.manifest.pdf,\n      \"page\": _vm.page,\n      \"width\": 1000\n    },\n    on: {\n      \"loaded\": _vm.loaded\n    }\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"arrow\",\n    attrs: {\n      \"id\": \"prev\"\n    },\n    on: {\n      \"click\": this.prev\n    }\n  }, [_vm._v(\"‹\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"arrow\",\n    attrs: {\n      \"id\": \"next\"\n    },\n    on: {\n      \"click\": this.next\n    }\n  }, [_vm._v(\"›\")]), _vm._v(\" \"), _c('header', [_c('h1', [_vm._v(_vm._s(_vm.manifest.title) + \": \")]), _vm._v(\" \"), _c('h2', [_vm._v(_vm._s(_vm.manifest.subtitle) + \", \")]), _vm._v(\" \"), _c('h3', [_vm._v(_vm._s(_vm.manifest.author_as_it_appears))])]), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"images\"\n    }\n  }, [_c('ol', _vm._l((_vm.images), function(image) {\n    return _c('li', [_c('a', {\n      staticClass: \"img_link\",\n      on: {\n        \"click\": function($event) {\n          _vm.page = (image.page - 1)\n        }\n      }\n    }, [_c('img', {\n      attrs: {\n        \"src\": image.thumbnail\n      }\n    })])])\n  }))])], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-59fa2e3c\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Reader.vue\n// module id = 31\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('router-view')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-626c8dc1\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 32\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    ref: \"imageLayer\",\n    staticClass: \"imageLayer\",\n    style: ({\n      width: ((_vm.viewport ? _vm.viewport.width : 0) + \"px\"),\n      height: ((_vm.viewport ? _vm.viewport.height : 0) + \"px\")\n    })\n  }, _vm._l((_vm.images), function(image) {\n    return _c('div', {\n      staticClass: \"imageLayerItem\",\n      style: ({\n        width: ((image.width) + \"px\"),\n        height: ((image.height) + \"px\"),\n        top: ((image.top-image.height) + \"px\"),\n        left: ((image.left) + \"px\")\n      }),\n      on: {\n        \"click\": function($event) {\n          _vm.handleClick(image)\n        }\n      }\n    })\n  }))\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-633d2fa2\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/ImageLayer.vue\n// module id = 33\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"pageContainer\",\n    class: {\n      loading: _vm.isLoading\n    },\n    style: ({\n      width: (_vm.width + \"px\"),\n      height: ((_vm.height ? _vm.height : _vm.viewportHeight) + \"px\")\n    })\n  }, _vm._l((_vm.displayedPages), function(page) {\n    return _c('div', {\n      staticClass: \"page\"\n    }, [_c('page', {\n      attrs: {\n        \"page\": page,\n        \"width\": _vm.spreads ? _vm.width / 2 : _vm.width,\n        \"height\": _vm.height,\n        \"onViewport\": _vm.handleViewport\n      }\n    })], 1)\n  }))\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-84dcc46e\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/PDF.vue\n// module id = 34\n// module chunks = 1"],"sourceRoot":""}